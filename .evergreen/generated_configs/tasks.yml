tasks:
  - name: abi-compliance-check-impls-cxx11
    run_on: rhel95-large
    tags: [abi-stability, rhel95, abi-compliance-check, impls, cxx11]
    commands:
      - func: abi-compliance-check
        vars:
          cxx_standard: "11"
          polyfill: impls
  - name: abi-compliance-check-impls-cxx17
    run_on: rhel95-large
    tags: [abi-stability, rhel95, abi-compliance-check, impls, cxx17]
    commands:
      - func: abi-compliance-check
        vars:
          cxx_standard: "17"
          polyfill: impls
  - name: abi-compliance-check-stdlib-cxx17
    run_on: rhel95-large
    tags: [abi-stability, rhel95, abi-compliance-check, stdlib, cxx17]
    commands:
      - func: abi-compliance-check
        vars:
          cxx_standard: "17"
          polyfill: stdlib
  - name: abi-compliance-check-stdlib-cxx20
    run_on: rhel95-large
    tags: [abi-stability, rhel95, abi-compliance-check, stdlib, cxx20]
    commands:
      - func: abi-compliance-check
        vars:
          cxx_standard: "20"
          polyfill: stdlib
  - name: abi-compliance-check-stdlib-cxx23
    run_on: rhel95-large
    tags: [abi-stability, rhel95, abi-compliance-check, stdlib, cxx23]
    commands:
      - func: abi-compliance-check
        vars:
          cxx_standard: "23"
          polyfill: stdlib
  - name: abi-prohibited-symbols-impls-cxx11
    run_on: rhel95-large
    tags: [abi-stability, rhel95, abi-prohibited-symbols, impls, cxx11]
    commands:
      - func: abi-prohibited-symbols
        vars:
          cxx_standard: "11"
          polyfill: impls
  - name: abi-prohibited-symbols-impls-cxx17
    run_on: rhel95-large
    tags: [abi-stability, rhel95, abi-prohibited-symbols, impls, cxx17]
    commands:
      - func: abi-prohibited-symbols
        vars:
          cxx_standard: "17"
          polyfill: impls
  - name: abi-prohibited-symbols-stdlib-cxx17
    run_on: rhel95-large
    tags: [abi-stability, rhel95, abi-prohibited-symbols, stdlib, cxx17]
    commands:
      - func: abi-prohibited-symbols
        vars:
          cxx_standard: "17"
          polyfill: stdlib
  - name: abi-prohibited-symbols-stdlib-cxx20
    run_on: rhel95-large
    tags: [abi-stability, rhel95, abi-prohibited-symbols, stdlib, cxx20]
    commands:
      - func: abi-prohibited-symbols
        vars:
          cxx_standard: "20"
          polyfill: stdlib
  - name: abi-prohibited-symbols-stdlib-cxx23
    run_on: rhel95-large
    tags: [abi-stability, rhel95, abi-prohibited-symbols, stdlib, cxx23]
    commands:
      - func: abi-prohibited-symbols
        vars:
          cxx_standard: "23"
          polyfill: stdlib
  - name: abidiff-impls-cxx11
    run_on: ubuntu2204-large
    tags: [abi-stability, ubuntu2204, abidiff, impls, cxx11]
    commands:
      - func: abidiff
        vars:
          cxx_standard: "11"
          polyfill: impls
  - name: abidiff-impls-cxx17
    run_on: ubuntu2204-large
    tags: [abi-stability, ubuntu2204, abidiff, impls, cxx17]
    commands:
      - func: abidiff
        vars:
          cxx_standard: "17"
          polyfill: impls
  - name: abidiff-stdlib-cxx17
    run_on: ubuntu2204-large
    tags: [abi-stability, ubuntu2204, abidiff, stdlib, cxx17]
    commands:
      - func: abidiff
        vars:
          cxx_standard: "17"
          polyfill: stdlib
  - name: abidiff-stdlib-cxx20
    run_on: ubuntu2204-large
    tags: [abi-stability, ubuntu2204, abidiff, stdlib, cxx20]
    commands:
      - func: abidiff
        vars:
          cxx_standard: "20"
          polyfill: stdlib
  - name: abidiff-stdlib-cxx23
    run_on: ubuntu2204-large
    tags: [abi-stability, ubuntu2204, abidiff, stdlib, cxx23]
    commands:
      - func: abidiff
        vars:
          cxx_standard: "23"
          polyfill: stdlib
  - name: atlas-search-indexes-7.0
    run_on: rhel80-large
    tags: [atlas-search-indexes, rhel80]
    commands:
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          build_type: Debug
      - func: test-search-index-helpers
  - name: atlas-search-indexes-8.0
    run_on: rhel80-large
    tags: [atlas-search-indexes, rhel80]
    commands:
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          build_type: Debug
      - func: test-search-index-helpers
  - name: benchmarks
    run_on: rhel90-dbx-perf-large
    tags: [benchmarks, rhel90-dbx-perf]
    commands:
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: v6.0-perf
      - func: fetch_c_driver_source
      - func: benchmarks-compile
      - func: benchmarks-run
  - name: clang-tidy
    run_on: rhel80-small
    tags: [clang-tidy, rhel80]
    commands:
      - func: setup
      - func: install-uv
      - func: install_c_driver
        vars:
          cc_compiler: clang
          cxx_compiler: clang++
      - func: clang-tidy
        vars:
          cc_compiler: clang
          cxx_compiler: clang++
  - name: cmake-compat-max-add-c
    run_on: rhel80-small
    tags: [cmake-compat, cmake-max, cmake-add-c]
    commands:
      - func: setup
      - func: install-uv
      - func: fetch_c_driver_source
      - func: cmake-compat
        vars:
          CMAKE_MAJOR_VERSION: 4
          CMAKE_MINOR_VERSION: 0
          CMAKE_PATCH_VERSION: 1
          INSTALL_C_DRIVER: 0
  - name: cmake-compat-max-find-c
    run_on: rhel80-small
    tags: [cmake-compat, cmake-max, cmake-find-c]
    commands:
      - func: setup
      - func: install-uv
      - func: install_c_driver
      - func: cmake-compat
        vars:
          CMAKE_MAJOR_VERSION: 4
          CMAKE_MINOR_VERSION: 0
          CMAKE_PATCH_VERSION: 1
          INSTALL_C_DRIVER: 1
  - name: cmake-compat-max-v3-add-c
    run_on: rhel80-small
    tags: [cmake-compat, cmake-max-v3, cmake-add-c]
    commands:
      - func: setup
      - func: install-uv
      - func: fetch_c_driver_source
      - func: cmake-compat
        vars:
          CMAKE_MAJOR_VERSION: 3
          CMAKE_MINOR_VERSION: 31
          CMAKE_PATCH_VERSION: 7
          INSTALL_C_DRIVER: 0
  - name: cmake-compat-max-v3-find-c
    run_on: rhel80-small
    tags: [cmake-compat, cmake-max-v3, cmake-find-c]
    commands:
      - func: setup
      - func: install-uv
      - func: install_c_driver
      - func: cmake-compat
        vars:
          CMAKE_MAJOR_VERSION: 3
          CMAKE_MINOR_VERSION: 31
          CMAKE_PATCH_VERSION: 7
          INSTALL_C_DRIVER: 1
  - name: cmake-compat-min-add-c
    run_on: rhel80-small
    tags: [cmake-compat, cmake-min, cmake-add-c]
    commands:
      - func: setup
      - func: install-uv
      - func: fetch_c_driver_source
      - func: cmake-compat
        vars:
          CMAKE_MAJOR_VERSION: 3
          CMAKE_MINOR_VERSION: 15
          CMAKE_PATCH_VERSION: 4
          INSTALL_C_DRIVER: 0
  - name: cmake-compat-min-find-c
    run_on: rhel80-small
    tags: [cmake-compat, cmake-min, cmake-find-c]
    commands:
      - func: setup
      - func: install-uv
      - func: install_c_driver
      - func: cmake-compat
        vars:
          CMAKE_MAJOR_VERSION: 3
          CMAKE_MINOR_VERSION: 15
          CMAKE_PATCH_VERSION: 4
          INSTALL_C_DRIVER: 1
  - name: compile-only-debian10-gcc-8-cxx11-debug
    run_on: debian10-large
    tags: [compile-only, debian10, cxx11, gcc-8, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc-8 }
            - { key: cxx_compiler, value: g++-8 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: gcc-8
          cxx_compiler: g++-8
  - name: compile-only-debian10-gcc-8-cxx17-debug
    run_on: debian10-large
    tags: [compile-only, debian10, cxx17, gcc-8, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc-8 }
            - { key: cxx_compiler, value: g++-8 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: gcc-8
          cxx_compiler: g++-8
  - name: compile-only-debian10-gcc-8-cxx20-debug
    run_on: debian10-large
    tags: [compile-only, debian10, cxx20, gcc-8, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc-8 }
            - { key: cxx_compiler, value: g++-8 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: gcc-8
          cxx_compiler: g++-8
  - name: compile-only-debian11-gcc-10-cxx11-debug
    run_on: debian11-large
    tags: [compile-only, debian11, cxx11, gcc-10, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc-10 }
            - { key: cxx_compiler, value: g++-10 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: gcc-10
          cxx_compiler: g++-10
  - name: compile-only-debian11-gcc-10-cxx17-debug
    run_on: debian11-large
    tags: [compile-only, debian11, cxx17, gcc-10, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc-10 }
            - { key: cxx_compiler, value: g++-10 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: gcc-10
          cxx_compiler: g++-10
  - name: compile-only-debian11-gcc-10-cxx20-debug
    run_on: debian11-large
    tags: [compile-only, debian11, cxx20, gcc-10, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc-10 }
            - { key: cxx_compiler, value: g++-10 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: gcc-10
          cxx_compiler: g++-10
  - name: compile-only-macos-14-arm64-cxx11-debug
    run_on: macos-14-arm64
    tags: [compile-only, macos-14-arm64, cxx11, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
  - name: compile-only-macos-14-arm64-cxx17-debug
    run_on: macos-14-arm64
    tags: [compile-only, macos-14-arm64, cxx17, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
  - name: compile-only-macos-14-cxx11-debug
    run_on: macos-14
    tags: [compile-only, macos-14, cxx11, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
  - name: compile-only-macos-14-cxx17-debug
    run_on: macos-14
    tags: [compile-only, macos-14, cxx17, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
  - name: compile-only-rhel7.9-gcc-cxx11-debug
    run_on: rhel7.9-large
    tags: [compile-only, rhel7.9, cxx11, gcc, debug]
    disable: true
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel7.9-gcc-cxx14-debug
    run_on: rhel7.9-large
    tags: [compile-only, rhel7.9, cxx14, gcc, debug]
    disable: true
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 14
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel8-power-cxx11-debug
    run_on: rhel8-power-large
    tags: [compile-only, rhel8-power, cxx11, debug]
    patchable: false
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
  - name: compile-only-rhel8-power-cxx17-debug
    run_on: rhel8-power-large
    tags: [compile-only, rhel8-power, cxx17, debug]
    patchable: false
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
  - name: compile-only-rhel8-zseries-cxx11-debug
    run_on: rhel8-zseries-large
    tags: [compile-only, rhel8-zseries, cxx11, debug]
    patchable: false
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
  - name: compile-only-rhel8-zseries-cxx17-debug
    run_on: rhel8-zseries-large
    tags: [compile-only, rhel8-zseries, cxx17, debug]
    patchable: false
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
  - name: compile-only-rhel80-clang-cxx11-debug
    run_on: rhel80-large
    tags: [compile-only, rhel80, cxx11, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel80-clang-cxx17-debug
    run_on: rhel80-large
    tags: [compile-only, rhel80, cxx17, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel80-clang-cxx20-debug
    run_on: rhel80-large
    tags: [compile-only, rhel80, cxx20, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel80-gcc-cxx11-debug
    run_on: rhel80-large
    tags: [compile-only, rhel80, cxx11, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel80-gcc-cxx17-debug
    run_on: rhel80-large
    tags: [compile-only, rhel80, cxx17, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel80-gcc-cxx20-debug
    run_on: rhel80-large
    tags: [compile-only, rhel80, cxx20, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel84-clang-cxx11-debug
    run_on: rhel84-large
    tags: [compile-only, rhel84, cxx11, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel84-clang-cxx17-debug
    run_on: rhel84-large
    tags: [compile-only, rhel84, cxx17, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel84-clang-cxx20-debug
    run_on: rhel84-large
    tags: [compile-only, rhel84, cxx20, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel84-gcc-cxx11-debug
    run_on: rhel84-large
    tags: [compile-only, rhel84, cxx11, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel84-gcc-cxx17-debug
    run_on: rhel84-large
    tags: [compile-only, rhel84, cxx17, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel84-gcc-cxx20-debug
    run_on: rhel84-large
    tags: [compile-only, rhel84, cxx20, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel90-clang-cxx11-debug
    run_on: rhel90-large
    tags: [compile-only, rhel90, cxx11, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel90-clang-cxx17-debug
    run_on: rhel90-large
    tags: [compile-only, rhel90, cxx17, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel90-clang-cxx20-debug
    run_on: rhel90-large
    tags: [compile-only, rhel90, cxx20, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel90-clang-cxx23-debug
    run_on: rhel90-large
    tags: [compile-only, rhel90, cxx23, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 23
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel90-gcc-cxx11-debug
    run_on: rhel90-large
    tags: [compile-only, rhel90, cxx11, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel90-gcc-cxx17-debug
    run_on: rhel90-large
    tags: [compile-only, rhel90, cxx17, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel90-gcc-cxx20-debug
    run_on: rhel90-large
    tags: [compile-only, rhel90, cxx20, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel90-gcc-cxx23-debug
    run_on: rhel90-large
    tags: [compile-only, rhel90, cxx23, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 23
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel91-clang-cxx11-debug
    run_on: rhel91-large
    tags: [compile-only, rhel91, cxx11, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel91-clang-cxx17-debug
    run_on: rhel91-large
    tags: [compile-only, rhel91, cxx17, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel91-clang-cxx20-debug
    run_on: rhel91-large
    tags: [compile-only, rhel91, cxx20, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel91-clang-cxx23-debug
    run_on: rhel91-large
    tags: [compile-only, rhel91, cxx23, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 23
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel92-clang-cxx11-debug
    run_on: rhel92-large
    tags: [compile-only, rhel92, cxx11, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel92-clang-cxx17-debug
    run_on: rhel92-large
    tags: [compile-only, rhel92, cxx17, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel92-clang-cxx20-debug
    run_on: rhel92-large
    tags: [compile-only, rhel92, cxx20, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel92-clang-cxx23-debug
    run_on: rhel92-large
    tags: [compile-only, rhel92, cxx23, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 23
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel92-gcc-cxx11-debug
    run_on: rhel92-large
    tags: [compile-only, rhel92, cxx11, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel92-gcc-cxx17-debug
    run_on: rhel92-large
    tags: [compile-only, rhel92, cxx17, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel92-gcc-cxx20-debug
    run_on: rhel92-large
    tags: [compile-only, rhel92, cxx20, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel92-gcc-cxx23-debug
    run_on: rhel92-large
    tags: [compile-only, rhel92, cxx23, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 23
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel93-clang-cxx11-debug
    run_on: rhel93-large
    tags: [compile-only, rhel93, cxx11, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel93-clang-cxx17-debug
    run_on: rhel93-large
    tags: [compile-only, rhel93, cxx17, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel93-clang-cxx20-debug
    run_on: rhel93-large
    tags: [compile-only, rhel93, cxx20, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel93-clang-cxx23-debug
    run_on: rhel93-large
    tags: [compile-only, rhel93, cxx23, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 23
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel94-clang-cxx11-debug
    run_on: rhel94-large
    tags: [compile-only, rhel94, cxx11, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel94-clang-cxx17-debug
    run_on: rhel94-large
    tags: [compile-only, rhel94, cxx17, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel94-clang-cxx20-debug
    run_on: rhel94-large
    tags: [compile-only, rhel94, cxx20, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel94-clang-cxx23-debug
    run_on: rhel94-large
    tags: [compile-only, rhel94, cxx23, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 23
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel94-gcc-cxx11-debug
    run_on: rhel94-large
    tags: [compile-only, rhel94, cxx11, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel94-gcc-cxx17-debug
    run_on: rhel94-large
    tags: [compile-only, rhel94, cxx17, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel94-gcc-cxx20-debug
    run_on: rhel94-large
    tags: [compile-only, rhel94, cxx20, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel94-gcc-cxx23-debug
    run_on: rhel94-large
    tags: [compile-only, rhel94, cxx23, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 23
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel95-clang-cxx11-debug
    run_on: rhel95-large
    tags: [compile-only, rhel95, cxx11, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel95-clang-cxx17-debug
    run_on: rhel95-large
    tags: [compile-only, rhel95, cxx17, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel95-clang-cxx20-debug
    run_on: rhel95-large
    tags: [compile-only, rhel95, cxx20, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel95-clang-cxx23-debug
    run_on: rhel95-large
    tags: [compile-only, rhel95, cxx23, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 23
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-rhel95-gcc-cxx11-debug
    run_on: rhel95-large
    tags: [compile-only, rhel95, cxx11, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel95-gcc-cxx17-debug
    run_on: rhel95-large
    tags: [compile-only, rhel95, cxx17, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel95-gcc-cxx20-debug
    run_on: rhel95-large
    tags: [compile-only, rhel95, cxx20, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-rhel95-gcc-cxx23-debug
    run_on: rhel95-large
    tags: [compile-only, rhel95, cxx23, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 23
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-ubuntu2004-arm64-clang-cxx11-debug
    run_on: ubuntu2004-arm64-large
    tags: [compile-only, ubuntu2004-arm64, cxx11, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-ubuntu2004-arm64-clang-cxx17-debug
    run_on: ubuntu2004-arm64-large
    tags: [compile-only, ubuntu2004-arm64, cxx17, clang, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang }
            - { key: cxx_compiler, value: clang++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: compile-only-ubuntu2004-arm64-gcc-cxx11-debug
    run_on: ubuntu2004-arm64-large
    tags: [compile-only, ubuntu2004-arm64, cxx11, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-ubuntu2004-arm64-gcc-cxx17-debug
    run_on: ubuntu2004-arm64-large
    tags: [compile-only, ubuntu2004-arm64, cxx17, gcc, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc }
            - { key: cxx_compiler, value: g++ }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: compile-only-ubuntu2004-clang-10-cxx11-debug
    run_on: ubuntu2004-large
    tags: [compile-only, ubuntu2004, cxx11, clang-10, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang-10 }
            - { key: cxx_compiler, value: clang++-10 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: clang-10
          cxx_compiler: clang++-10
  - name: compile-only-ubuntu2004-clang-10-cxx17-debug
    run_on: ubuntu2004-large
    tags: [compile-only, ubuntu2004, cxx17, clang-10, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang-10 }
            - { key: cxx_compiler, value: clang++-10 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: clang-10
          cxx_compiler: clang++-10
  - name: compile-only-ubuntu2004-clang-10-cxx20-debug
    run_on: ubuntu2004-large
    tags: [compile-only, ubuntu2004, cxx20, clang-10, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang-10 }
            - { key: cxx_compiler, value: clang++-10 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: clang-10
          cxx_compiler: clang++-10
  - name: compile-only-ubuntu2004-gcc-9-cxx11-debug
    run_on: ubuntu2004-large
    tags: [compile-only, ubuntu2004, cxx11, gcc-9, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc-9 }
            - { key: cxx_compiler, value: g++-9 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: gcc-9
          cxx_compiler: g++-9
  - name: compile-only-ubuntu2004-gcc-9-cxx17-debug
    run_on: ubuntu2004-large
    tags: [compile-only, ubuntu2004, cxx17, gcc-9, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc-9 }
            - { key: cxx_compiler, value: g++-9 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: gcc-9
          cxx_compiler: g++-9
  - name: compile-only-ubuntu2004-gcc-9-cxx20-debug
    run_on: ubuntu2004-large
    tags: [compile-only, ubuntu2004, cxx20, gcc-9, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: gcc-9 }
            - { key: cxx_compiler, value: g++-9 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: gcc-9
          cxx_compiler: g++-9
  - name: compile-only-ubuntu2204-clang-12-cxx11-debug
    run_on: ubuntu2204-large
    tags: [compile-only, ubuntu2204, cxx11, clang-12, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang-12 }
            - { key: cxx_compiler, value: clang++-12 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          cc_compiler: clang-12
          cxx_compiler: clang++-12
  - name: compile-only-ubuntu2204-clang-12-cxx17-debug
    run_on: ubuntu2204-large
    tags: [compile-only, ubuntu2204, cxx17, clang-12, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang-12 }
            - { key: cxx_compiler, value: clang++-12 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          cc_compiler: clang-12
          cxx_compiler: clang++-12
  - name: compile-only-ubuntu2204-clang-12-cxx20-debug
    run_on: ubuntu2204-large
    tags: [compile-only, ubuntu2204, cxx20, clang-12, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang-12 }
            - { key: cxx_compiler, value: clang++-12 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          cc_compiler: clang-12
          cxx_compiler: clang++-12
  - name: compile-only-ubuntu2204-clang-12-cxx23-debug
    run_on: ubuntu2204-large
    tags: [compile-only, ubuntu2204, cxx23, clang-12, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: clang-12 }
            - { key: cxx_compiler, value: clang++-12 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 23
          build_type: Debug
          cc_compiler: clang-12
          cxx_compiler: clang++-12
  - name: compile-only-windows-2019-vs2015-x64-cxx11-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx11, vs2015x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 14 2015 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          generator: Visual Studio 14 2015
          platform: x64
  - name: compile-only-windows-2019-vs2015-x64-cxx14-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx14, vs2015x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 14 2015 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 14
          build_type: Debug
          generator: Visual Studio 14 2015
          platform: x64
  - name: compile-only-windows-2019-vs2015-x64-cxxlatest-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxxlatest, vs2015x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 14 2015 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: latest
          build_type: Debug
          generator: Visual Studio 14 2015
          platform: x64
  - name: compile-only-windows-2019-vs2017-x64-cxx11-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx11, vs2017x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 15 2017 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          generator: Visual Studio 15 2017
          platform: x64
  - name: compile-only-windows-2019-vs2017-x64-cxx14-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx14, vs2017x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 15 2017 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 14
          build_type: Debug
          generator: Visual Studio 15 2017
          platform: x64
  - name: compile-only-windows-2019-vs2017-x64-cxx17-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx17, vs2017x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 15 2017 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          generator: Visual Studio 15 2017
          platform: x64
  - name: compile-only-windows-2019-vs2017-x64-cxx20-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx20, vs2017x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 15 2017 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          generator: Visual Studio 15 2017
          platform: x64
  - name: compile-only-windows-2019-vs2017-x64-cxxlatest-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxxlatest, vs2017x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 15 2017 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: latest
          build_type: Debug
          generator: Visual Studio 15 2017
          platform: x64
  - name: compile-only-windows-2019-vs2019-x64-cxx11-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx11, vs2019x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 16 2019 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          generator: Visual Studio 16 2019
          platform: x64
  - name: compile-only-windows-2019-vs2019-x64-cxx14-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx14, vs2019x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 16 2019 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 14
          build_type: Debug
          generator: Visual Studio 16 2019
          platform: x64
  - name: compile-only-windows-2019-vs2019-x64-cxx17-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx17, vs2019x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 16 2019 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          generator: Visual Studio 16 2019
          platform: x64
  - name: compile-only-windows-2019-vs2019-x64-cxx20-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx20, vs2019x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 16 2019 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          generator: Visual Studio 16 2019
          platform: x64
  - name: compile-only-windows-2019-vs2019-x64-cxx23-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx23, vs2019x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 16 2019 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 23
          build_type: Debug
          generator: Visual Studio 16 2019
          platform: x64
  - name: compile-only-windows-2019-vs2019-x64-cxxlatest-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxxlatest, vs2019x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 16 2019 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: latest
          build_type: Debug
          generator: Visual Studio 16 2019
          platform: x64
  - name: compile-only-windows-2019-vs2022-x64-cxx11-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx11, vs2022x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 11
          build_type: Debug
          generator: Visual Studio 17 2022
          platform: x64
  - name: compile-only-windows-2019-vs2022-x64-cxx14-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx14, vs2022x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 14
          build_type: Debug
          generator: Visual Studio 17 2022
          platform: x64
  - name: compile-only-windows-2019-vs2022-x64-cxx17-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx17, vs2022x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 17
          build_type: Debug
          generator: Visual Studio 17 2022
          platform: x64
  - name: compile-only-windows-2019-vs2022-x64-cxx20-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx20, vs2022x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 20
          build_type: Debug
          generator: Visual Studio 17 2022
          platform: x64
  - name: compile-only-windows-2019-vs2022-x64-cxx23-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxx23, vs2022x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: 23
          build_type: Debug
          generator: Visual Studio 17 2022
          platform: x64
  - name: compile-only-windows-2019-vs2022-x64-cxxlatest-debug
    run_on: windows-vsCurrent-large
    tags: [compile-only, windows-vsCurrent, cxxlatest, vs2022x64, debug]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          BUILD_SHARED_AND_STATIC_LIBS: "ON"
          REQUIRED_CXX_STANDARD: latest
          build_type: Debug
          generator: Visual Studio 17 2022
          platform: x64
  - name: docker-build-ubuntu2204
    run_on: ubuntu2204-large
    tags: [docker-build, ubuntu2204]
    commands:
      - func: setup
      - func: docker-image-build
  - name: docker-build-ubuntu2204-arm64
    run_on: ubuntu2204-arm64-large
    tags: [docker-build, ubuntu2204-arm64]
    commands:
      - func: setup
      - func: docker-image-build
  - name: integration-macos-14-arm64-debug-shared-cxx11-6.0-replica
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-6.0-sharded
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-6.0-single
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-8.0-replica
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-8.0-sharded
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-8.0-single
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-csfle-6.0-replica
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, csfle, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-csfle-6.0-sharded
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, csfle, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-csfle-6.0-single
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, csfle, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-csfle-8.0-replica
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, csfle, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-csfle-8.0-sharded
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, csfle, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-csfle-8.0-single
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, csfle, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-csfle-latest-replica
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, csfle, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-csfle-latest-replica-mongocryptd
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, csfle, latest, replica, mongocryptd]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
          use_mongocryptd: true
  - name: integration-macos-14-arm64-debug-shared-cxx11-csfle-latest-sharded
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, csfle, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-csfle-latest-single
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, csfle, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-latest-replica
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-latest-sharded
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx11-latest-single
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx11, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-arm64-debug-shared-cxx17-6.0-replica
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-6.0-sharded
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-6.0-single
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-8.0-replica
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-8.0-sharded
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-8.0-single
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-csfle-6.0-replica
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, csfle, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-csfle-6.0-sharded
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, csfle, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-csfle-6.0-single
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, csfle, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-csfle-8.0-replica
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, csfle, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-csfle-8.0-sharded
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, csfle, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-csfle-8.0-single
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, csfle, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-csfle-latest-replica
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, csfle, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-csfle-latest-sharded
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, csfle, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-csfle-latest-single
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, csfle, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-latest-replica
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-latest-sharded
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-macos-14-arm64-debug-shared-cxx17-latest-single
    run_on: macos-14-arm64
    tags: [integration, macos-14-arm64, macos, debug, shared, cxx17, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-macos-14-debug-shared-cxx11-4.2-replica
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, "4.2", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-4.2-sharded
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, "4.2", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-4.2-single
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, "4.2", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-8.0-replica
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-8.0-sharded
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-8.0-single
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-csfle-4.2-replica
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, csfle, "4.2", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-csfle-4.2-sharded
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, csfle, "4.2", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-csfle-4.2-single
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, csfle, "4.2", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-csfle-8.0-replica
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, csfle, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-csfle-8.0-sharded
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, csfle, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-csfle-8.0-single
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, csfle, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-csfle-latest-replica
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, csfle, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-csfle-latest-replica-mongocryptd
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, csfle, latest, replica, mongocryptd]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
          use_mongocryptd: true
  - name: integration-macos-14-debug-shared-cxx11-csfle-latest-sharded
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, csfle, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-csfle-latest-single
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, csfle, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-latest-replica
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-latest-sharded
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-macos-14-debug-shared-cxx11-latest-single
    run_on: macos-14
    tags: [integration, macos-14, macos, debug, shared, cxx11, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel8-power-debug-shared-cxx11-csfle-latest-replica
    run_on: rhel8-power-large
    tags: [integration, rhel8-power, linux, debug, shared, cxx11, csfle, latest, replica]
    patchable: false
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel8-power-debug-shared-cxx11-csfle-latest-replica-mongocryptd
    run_on: rhel8-power-large
    tags: [integration, rhel8-power, linux, debug, shared, cxx11, csfle, latest, replica, mongocryptd]
    patchable: false
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
          use_mongocryptd: true
  - name: integration-rhel8-zseries-debug-shared-cxx11-csfle-latest-replica
    run_on: rhel8-zseries-large
    tags: [integration, rhel8-zseries, linux, debug, shared, cxx11, csfle, latest, replica]
    patchable: false
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel8-zseries-debug-shared-cxx11-csfle-latest-replica-mongocryptd
    run_on: rhel8-zseries-large
    tags: [integration, rhel8-zseries, linux, debug, shared, cxx11, csfle, latest, replica, mongocryptd]
    patchable: false
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
          use_mongocryptd: true
  - name: integration-rhel80-debug-shared-cxx11-4.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "4.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-4.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "4.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-4.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "4.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-4.2-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "4.2", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-4.2-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "4.2", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-4.2-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "4.2", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-4.4-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-4.4-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-4.4-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-5.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-5.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-5.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-6.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-6.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-6.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-7.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-7.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-7.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-8.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-8.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-8.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-4.2-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "4.2", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-4.2-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "4.2", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-4.2-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "4.2", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-4.4-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-4.4-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-4.4-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-5.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-5.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-5.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-6.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-6.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-6.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-7.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-7.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-7.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-8.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-8.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-8.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-latest-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-latest-replica-mongocryptd
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, latest, replica, mongocryptd]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
          use_mongocryptd: true
  - name: integration-rhel80-debug-shared-cxx11-csfle-latest-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-csfle-latest-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, csfle, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-latest-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-latest-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx11-latest-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx11, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-shared-cxx17-4.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "4.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-4.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "4.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-4.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "4.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-4.2-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "4.2", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-4.2-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "4.2", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-4.2-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "4.2", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-4.4-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-4.4-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-4.4-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-5.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-5.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-5.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-6.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-6.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-6.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-7.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-7.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-7.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-8.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-8.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-8.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-4.2-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "4.2", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-4.2-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "4.2", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-4.2-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "4.2", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-4.4-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-4.4-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-4.4-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-5.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-5.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-5.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-6.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-6.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-6.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-7.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-7.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-7.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-8.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-8.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-8.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-latest-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-latest-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-csfle-latest-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, csfle, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-latest-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-latest-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-shared-cxx17-latest-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, shared, cxx17, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx11-4.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "4.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-4.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "4.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-4.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "4.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-4.2-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "4.2", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-4.2-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "4.2", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-4.2-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "4.2", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-4.4-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-4.4-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-4.4-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-5.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-5.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-5.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-6.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-6.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-6.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-7.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-7.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-7.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-8.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-8.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-8.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-4.2-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "4.2", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-4.2-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "4.2", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-4.2-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "4.2", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-4.4-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-4.4-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-4.4-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-5.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-5.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-5.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-6.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-6.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-6.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-7.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-7.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-7.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-8.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-8.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-8.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-latest-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-latest-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-csfle-latest-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, csfle, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-latest-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-latest-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx11-latest-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx11, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-rhel80-debug-static-cxx17-4.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "4.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-4.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "4.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-4.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "4.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-4.2-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "4.2", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-4.2-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "4.2", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-4.2-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "4.2", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-4.4-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-4.4-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-4.4-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-5.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-5.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-5.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-6.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-6.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-6.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-7.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-7.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-7.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-8.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-8.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-8.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-4.2-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "4.2", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-4.2-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "4.2", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-4.2-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "4.2", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-4.4-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-4.4-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-4.4-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-5.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-5.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-5.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-6.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-6.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-6.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-7.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-7.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-7.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-8.0-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-8.0-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-8.0-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-latest-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-latest-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-csfle-latest-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, csfle, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-latest-replica
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-latest-sharded
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-rhel80-debug-static-cxx17-latest-single
    run_on: rhel80-large
    tags: [integration, rhel80, linux, debug, static, cxx17, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-4.4-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-4.4-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-4.4-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-5.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-5.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-5.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-6.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-6.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-6.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-7.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-7.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-7.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-8.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-8.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-8.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-4.4-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-4.4-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-4.4-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-5.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-5.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-5.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-6.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-6.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-6.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-7.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-7.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-7.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-8.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-8.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-8.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-latest-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-latest-replica-mongocryptd
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, latest, replica, mongocryptd]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
          use_mongocryptd: true
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-latest-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-csfle-latest-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, csfle, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-latest-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-latest-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx11-latest-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx11, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-4.4-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-4.4-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-4.4-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-5.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-5.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-5.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-6.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-6.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-6.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-7.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-7.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-7.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-8.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-8.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-8.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-4.4-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-4.4-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-4.4-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-5.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-5.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-5.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-6.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-6.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-6.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-7.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-7.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-7.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-8.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-8.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-8.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-latest-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-latest-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-csfle-latest-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, csfle, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-latest-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-latest-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-shared-cxx17-latest-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, shared, cxx17, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-4.4-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-4.4-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-4.4-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-5.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-5.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-5.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-6.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-6.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-6.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-7.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-7.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-7.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-8.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-8.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-8.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-4.4-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-4.4-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-4.4-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-5.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-5.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-5.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-6.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-6.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-6.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-7.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-7.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-7.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-8.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-8.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-8.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-latest-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-latest-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-csfle-latest-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, csfle, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-latest-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-latest-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx11-latest-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx11, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 11
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-4.4-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-4.4-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-4.4-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-5.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-5.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-5.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-6.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-6.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-6.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-7.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-7.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-7.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-8.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-8.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-8.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-4.4-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "4.4", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-4.4-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "4.4", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-4.4-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "4.4", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.4"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-5.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "5.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-5.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "5.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-5.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "5.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "5.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-6.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "6.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-6.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "6.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-6.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "6.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "6.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-7.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "7.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-7.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "7.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-7.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "7.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "7.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-8.0-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-8.0-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-8.0-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-latest-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-latest-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-csfle-latest-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, csfle, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-latest-replica
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-latest-sharded
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-ubuntu2004-arm64-debug-static-cxx17-latest-single
    run_on: ubuntu2004-arm64-large
    tags: [integration, ubuntu2004-arm64, linux, debug, static, cxx17, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
          USE_STATIC_LIBS: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          USE_STATIC_LIBS: 1
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-4.2-replica
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, "4.2", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-4.2-sharded
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, "4.2", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-4.2-single
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, "4.2", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-8.0-replica
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-8.0-sharded
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-8.0-single
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-csfle-4.2-replica
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, csfle, "4.2", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-csfle-4.2-sharded
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, csfle, "4.2", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-csfle-4.2-single
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, csfle, "4.2", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-csfle-8.0-replica
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, csfle, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-csfle-8.0-sharded
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, csfle, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-csfle-8.0-single
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, csfle, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-csfle-latest-replica
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, csfle, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-csfle-latest-replica-mongocryptd
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, csfle, latest, replica, mongocryptd]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
          use_mongocryptd: true
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-csfle-latest-sharded
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, csfle, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-csfle-latest-single
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, csfle, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-latest-replica
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-latest-sharded
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx11-latest-single
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx11, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 11
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 11
          example_projects_cxx_standard: 11
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-4.2-replica
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, "4.2", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-4.2-sharded
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, "4.2", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-4.2-single
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, "4.2", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-8.0-replica
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-8.0-sharded
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-8.0-single
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-csfle-4.2-replica
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, csfle, "4.2", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-csfle-4.2-sharded
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, csfle, "4.2", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-csfle-4.2-single
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, csfle, "4.2", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.2"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-csfle-8.0-replica
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, csfle, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-csfle-8.0-sharded
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, csfle, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-csfle-8.0-single
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, csfle, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-csfle-latest-replica
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, csfle, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-csfle-latest-sharded
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, csfle, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-csfle-latest-single
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, csfle, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          TEST_WITH_CSFLE: "ON"
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-latest-replica
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-latest-sharded
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: integration-windows-2019-vs2022-x64-debug-shared-cxx17-latest-single
    run_on: windows-vsCurrent-large
    tags: [integration, windows-vsCurrent, windows, debug, shared, cxx17, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: generator, value: Visual Studio 17 2022 }
            - { key: platform, value: x64 }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          REQUIRED_CXX_STANDARD: 17
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          REQUIRED_CXX_STANDARD: 17
          example_projects_cxx_standard: 17
  - name: lint
    run_on: rhel80-small
    tags: [lint]
    commands:
      - func: setup
      - func: install-uv
      - func: lint
  - name: macro-guards-rhel80
    run_on: rhel80-large
    tags: [macro-guards, rhel80]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          COMPILE_MACRO_GUARD_TESTS: "ON"
          ENABLE_TESTS: "ON"
          build_type: Debug
  - name: macro-guards-rhel80-clang
    run_on: rhel80-large
    tags: [macro-guards, rhel80, clang]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          COMPILE_MACRO_GUARD_TESTS: "ON"
          ENABLE_TESTS: "ON"
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
  - name: macro-guards-rhel80-gcc
    run_on: rhel80-large
    tags: [macro-guards, rhel80, gcc]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          COMPILE_MACRO_GUARD_TESTS: "ON"
          ENABLE_TESTS: "ON"
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
  - name: packaging-debian
    run_on: debian12-latest-large
    tags: [packaging, debian12-latest]
    allowed_requesters:
      - ad_hoc
      - commit
      - patch
      - trigger
    commands:
      - func: setup
      - func: build-package-debian
  - name: packaging-rpm
    run_on: rhel92-arm64-large
    tags: [packaging, rhel92-arm64]
    allowed_requesters:
      - ad_hoc
      - commit
      - patch
      - trigger
    commands:
      - func: setup
      - func: build-package-rpm
  - name: sanitizers-asan-rhel80-clang-shared-4.0-replica
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, shared, "4.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-shared-4.0-sharded
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, shared, "4.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-shared-4.0-single
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, shared, "4.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-shared-8.0-replica
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, shared, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-shared-8.0-sharded
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, shared, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-shared-8.0-single
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, shared, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-shared-latest-replica
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, shared, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-shared-latest-sharded
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, shared, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-shared-latest-single
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, shared, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-static-4.0-replica
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, static, "4.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-static-4.0-sharded
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, static, "4.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-static-4.0-single
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, static, "4.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-static-8.0-replica
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, static, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-static-8.0-sharded
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, static, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-static-8.0-single
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, static, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-static-latest-replica
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, static, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-static-latest-sharded
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, static, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-asan-rhel80-clang-static-latest-single
    run_on: rhel80-large
    tags: [sanitizers, asan, rhel80, clang, static, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_ASAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_ASAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=address -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=address
  - name: sanitizers-ubsan-rhel80-clang-shared-4.0-replica
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, shared, "4.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined
  - name: sanitizers-ubsan-rhel80-clang-shared-4.0-sharded
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, shared, "4.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined
  - name: sanitizers-ubsan-rhel80-clang-shared-4.0-single
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, shared, "4.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined
  - name: sanitizers-ubsan-rhel80-clang-shared-8.0-replica
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, shared, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined
  - name: sanitizers-ubsan-rhel80-clang-shared-8.0-sharded
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, shared, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined
  - name: sanitizers-ubsan-rhel80-clang-shared-8.0-single
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, shared, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined
  - name: sanitizers-ubsan-rhel80-clang-shared-latest-replica
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, shared, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined
  - name: sanitizers-ubsan-rhel80-clang-shared-latest-sharded
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, shared, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined
  - name: sanitizers-ubsan-rhel80-clang-shared-latest-single
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, shared, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined
  - name: sanitizers-ubsan-rhel80-clang-static-4.0-replica
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, static, "4.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined -static-libsan
  - name: sanitizers-ubsan-rhel80-clang-static-4.0-sharded
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, static, "4.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined -static-libsan
  - name: sanitizers-ubsan-rhel80-clang-static-4.0-single
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, static, "4.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined -static-libsan
  - name: sanitizers-ubsan-rhel80-clang-static-8.0-replica
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, static, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined -static-libsan
  - name: sanitizers-ubsan-rhel80-clang-static-8.0-sharded
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, static, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined -static-libsan
  - name: sanitizers-ubsan-rhel80-clang-static-8.0-single
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, static, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined -static-libsan
  - name: sanitizers-ubsan-rhel80-clang-static-latest-replica
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, static, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined -static-libsan
  - name: sanitizers-ubsan-rhel80-clang-static-latest-sharded
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, static, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined -static-libsan
  - name: sanitizers-ubsan-rhel80-clang-static-latest-single
    run_on: rhel80-large
    tags: [sanitizers, ubsan, rhel80, clang, static, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
            - { key: cc_compiler, value: /opt/mongodbtoolchain/v4/bin/clang }
            - { key: cxx_compiler, value: /opt/mongodbtoolchain/v4/bin/clang++ }
            - { key: USE_STATIC_LIBS, value: "1" }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
          USE_SANITIZER_UBSAN: "ON"
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_UBSAN: "ON"
          example_projects_cc: clang
          example_projects_cxx: clang++
          example_projects_cxxflags: -fsanitize=undefined -fno-sanitize-recover=undefined -fno-omit-frame-pointer
          example_projects_ldflags: -fsanitize=undefined -fno-sanitize-recover=undefined -static-libsan
  - name: sbom
    run_on: rhel80-small
    tags: [sbom, rhel80]
    commands:
      - func: setup
      - func: check augmented sbom
      - func: upload augmented sbom
  - name: scan-build-rhel80-std11-default
    run_on: rhel80-large
    tags: [scan-build, rhel80, std11]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: run scan build
        vars:
          CXX_STANDARD: 11
      - func: upload scan artifacts
  - name: scan-build-rhel80-std11-impls
    run_on: rhel80-large
    tags: [scan-build, rhel80, std11, impls]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: run scan build
        vars:
          BSONCXX_POLYFILL: impls
          CXX_STANDARD: 11
      - func: upload scan artifacts
  - name: scan-build-rhel80-std14-default
    run_on: rhel80-large
    tags: [scan-build, rhel80, std14]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: run scan build
        vars:
          CXX_STANDARD: 14
      - func: upload scan artifacts
  - name: scan-build-rhel80-std14-impls
    run_on: rhel80-large
    tags: [scan-build, rhel80, std14, impls]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: run scan build
        vars:
          BSONCXX_POLYFILL: impls
          CXX_STANDARD: 14
      - func: upload scan artifacts
  - name: scan-build-rhel80-std17-default
    run_on: rhel80-large
    tags: [scan-build, rhel80, std17]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: run scan build
        vars:
          CXX_STANDARD: 17
      - func: upload scan artifacts
  - name: scan-build-rhel80-std17-impls
    run_on: rhel80-large
    tags: [scan-build, rhel80, std17, impls]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: run scan build
        vars:
          BSONCXX_POLYFILL: impls
          CXX_STANDARD: 17
      - func: upload scan artifacts
  - name: test_mongohouse
    run_on: ubuntu2204-large
    tags: [mongohouse, ubuntu2204]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          build_type: Release
      - func: build_mongohouse
      - func: run_mongohouse
      - func: test_mongohouse
  - name: uninstall-check-macos-14-arm64-clang-debug-shared
    run_on: macos-14-arm64
    tags: [uninstall-check, macos-14-arm64, clang, debug, shared]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
      - func: uninstall-check
  - name: uninstall-check-macos-14-arm64-clang-debug-static
    run_on: macos-14-arm64
    tags: [uninstall-check, macos-14-arm64, clang, debug, static]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          build_type: Debug
          cc_compiler: clang
          cxx_compiler: clang++
      - func: uninstall-check
  - name: uninstall-check-macos-14-arm64-clang-release-shared
    run_on: macos-14-arm64
    tags: [uninstall-check, macos-14-arm64, clang, release, shared]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          build_type: Release
          cc_compiler: clang
          cxx_compiler: clang++
      - func: uninstall-check
  - name: uninstall-check-macos-14-arm64-clang-release-static
    run_on: macos-14-arm64
    tags: [uninstall-check, macos-14-arm64, clang, release, static]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          build_type: Release
          cc_compiler: clang
          cxx_compiler: clang++
      - func: uninstall-check
  - name: uninstall-check-rhel80-gcc-debug-shared
    run_on: rhel80-large
    tags: [uninstall-check, rhel80, gcc, debug, shared]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
      - func: uninstall-check
  - name: uninstall-check-rhel80-gcc-debug-static
    run_on: rhel80-large
    tags: [uninstall-check, rhel80, gcc, debug, static]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          build_type: Debug
          cc_compiler: gcc
          cxx_compiler: g++
      - func: uninstall-check
  - name: uninstall-check-rhel80-gcc-release-shared
    run_on: rhel80-large
    tags: [uninstall-check, rhel80, gcc, release, shared]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          build_type: Release
          cc_compiler: gcc
          cxx_compiler: g++
      - func: uninstall-check
  - name: uninstall-check-rhel80-gcc-release-static
    run_on: rhel80-large
    tags: [uninstall-check, rhel80, gcc, release, static]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          build_type: Release
          cc_compiler: gcc
          cxx_compiler: g++
      - func: uninstall-check
  - name: uninstall-check-windows-2019-vs2017-x64-debug-shared
    run_on: windows-vsCurrent-large
    tags: [uninstall-check, windows-vsCurrent, vs2017x64, debug, shared]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          build_type: Debug
          generator: Visual Studio 15 2017
          platform: x64
      - func: uninstall-check
  - name: uninstall-check-windows-2019-vs2017-x64-debug-static
    run_on: windows-vsCurrent-large
    tags: [uninstall-check, windows-vsCurrent, vs2017x64, debug, static]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          build_type: Debug
          generator: Visual Studio 15 2017
          platform: x64
      - func: uninstall-check
  - name: uninstall-check-windows-2019-vs2017-x64-release-shared
    run_on: windows-vsCurrent-large
    tags: [uninstall-check, windows-vsCurrent, vs2017x64, release, shared]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          build_type: Release
          generator: Visual Studio 15 2017
          platform: x64
      - func: uninstall-check
  - name: uninstall-check-windows-2019-vs2017-x64-release-static
    run_on: windows-vsCurrent-large
    tags: [uninstall-check, windows-vsCurrent, vs2017x64, release, static]
    commands:
      - func: setup
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          build_type: Release
          generator: Visual Studio 15 2017
          platform: x64
      - func: uninstall-check
  - name: valgrind-rhel80-shared-4.0-replica
    run_on: rhel80-large
    tags: [valgrind, rhel80, shared, "4.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_VALGRIND: "ON"
          disable_slow_tests: 1
          use_mongocryptd: true
  - name: valgrind-rhel80-shared-4.0-sharded
    run_on: rhel80-large
    tags: [valgrind, rhel80, shared, "4.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_VALGRIND: "ON"
          disable_slow_tests: 1
          use_mongocryptd: true
  - name: valgrind-rhel80-shared-4.0-single
    run_on: rhel80-large
    tags: [valgrind, rhel80, shared, "4.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "4.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_VALGRIND: "ON"
          disable_slow_tests: 1
          use_mongocryptd: true
  - name: valgrind-rhel80-shared-8.0-replica
    run_on: rhel80-large
    tags: [valgrind, rhel80, shared, "8.0", replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_VALGRIND: "ON"
          disable_slow_tests: 1
          use_mongocryptd: true
  - name: valgrind-rhel80-shared-8.0-sharded
    run_on: rhel80-large
    tags: [valgrind, rhel80, shared, "8.0", sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_VALGRIND: "ON"
          disable_slow_tests: 1
          use_mongocryptd: true
  - name: valgrind-rhel80-shared-8.0-single
    run_on: rhel80-large
    tags: [valgrind, rhel80, shared, "8.0", single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: "8.0"
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_VALGRIND: "ON"
          disable_slow_tests: 1
          use_mongocryptd: true
  - name: valgrind-rhel80-shared-latest-replica
    run_on: rhel80-large
    tags: [valgrind, rhel80, shared, latest, replica]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: replica_set
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: replica
          TEST_WITH_VALGRIND: "ON"
          disable_slow_tests: 1
          use_mongocryptd: true
  - name: valgrind-rhel80-shared-latest-sharded
    run_on: rhel80-large
    tags: [valgrind, rhel80, shared, latest, sharded]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          TOPOLOGY: sharded_cluster
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: sharded
          TEST_WITH_VALGRIND: "ON"
          disable_slow_tests: 1
          use_mongocryptd: true
  - name: valgrind-rhel80-shared-latest-single
    run_on: rhel80-large
    tags: [valgrind, rhel80, shared, latest, single]
    commands:
      - command: expansions.update
        params:
          updates:
            - { key: build_type, value: Debug }
      - func: setup
      - func: start_mongod
        vars:
          mongodb_version: latest
      - func: install_c_driver
        vars:
          SKIP_INSTALL_LIBMONGOCRYPT: 1
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          RUN_DISTCHECK: 1
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          TEST_WITH_VALGRIND: "ON"
          disable_slow_tests: 1
          use_mongocryptd: true
  - name: versioned-api-one-required-macos-14-arm64-debug-shared
    run_on: macos-14-arm64
    tags: [versioned-api, macos-14-arm64, debug, shared]
    commands:
      - func: setup
      - func: start_mongod
        vars:
          AUTH: noauth
          REQUIRE_API_VERSION: true
          mongodb_version: latest
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          build_type: Debug
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          MONGODB_API_VERSION: 1
          build_type: Debug
  - name: versioned-api-one-required-rhel80-debug-shared
    run_on: rhel80-large
    tags: [versioned-api, rhel80, debug, shared]
    commands:
      - func: setup
      - func: start_mongod
        vars:
          AUTH: noauth
          REQUIRE_API_VERSION: true
          mongodb_version: latest
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          build_type: Debug
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          MONGODB_API_VERSION: 1
          build_type: Debug
  - name: versioned-api-one-required-windows-2019-vs2022-x64-debug-shared
    run_on: windows-vsCurrent-large
    tags: [versioned-api, windows-vsCurrent, vs2022x64, debug, shared]
    commands:
      - func: setup
      - func: start_mongod
        vars:
          AUTH: noauth
          REQUIRE_API_VERSION: true
          mongodb_version: latest
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          build_type: Debug
          generator: Visual Studio 17 2022
          platform: x64
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          MONGODB_API_VERSION: 1
          build_type: Debug
          example_projects_cxx_standard: 17
          generator: Visual Studio 17 2022
          platform: x64
  - name: versioned-api-two-accepted-macos-14-arm64-debug-shared
    run_on: macos-14-arm64
    tags: [versioned-api, macos-14-arm64, debug, shared]
    commands:
      - func: setup
      - func: start_mongod
        vars:
          AUTH: noauth
          ORCHESTRATION_FILE: versioned-api-testing.json
          mongodb_version: latest
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          build_type: Debug
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          build_type: Debug
  - name: versioned-api-two-accepted-rhel80-debug-shared
    run_on: rhel80-large
    tags: [versioned-api, rhel80, debug, shared]
    commands:
      - func: setup
      - func: start_mongod
        vars:
          AUTH: noauth
          ORCHESTRATION_FILE: versioned-api-testing.json
          mongodb_version: latest
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          build_type: Debug
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          build_type: Debug
  - name: versioned-api-two-accepted-windows-2019-vs2022-x64-debug-shared
    run_on: windows-vsCurrent-large
    tags: [versioned-api, windows-vsCurrent, vs2022x64, debug, shared]
    commands:
      - func: setup
      - func: start_mongod
        vars:
          AUTH: noauth
          ORCHESTRATION_FILE: versioned-api-testing.json
          mongodb_version: latest
      - func: fetch_c_driver_source
      - func: install-uv
      - func: compile
        vars:
          ENABLE_TESTS: "ON"
          build_type: Debug
          generator: Visual Studio 17 2022
          platform: x64
      - func: fetch-det
      - func: run_kms_servers
      - func: test
        vars:
          MONGOCXX_TEST_TOPOLOGY: single
          build_type: Debug
          example_projects_cxx_standard: 17
          generator: Visual Studio 17 2022
          platform: x64

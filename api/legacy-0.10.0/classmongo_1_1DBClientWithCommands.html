<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>MongoDB C++ Driver: mongo::DBClientWithCommands Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MongoDB C++ Driver
   &#160;<span id="projectnumber">legacy-0.10.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemongo.html">mongo</a></li><li class="navelem"><a class="el" href="classmongo_1_1DBClientWithCommands.html">DBClientWithCommands</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classmongo_1_1DBClientWithCommands-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mongo::DBClientWithCommands Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>DB "commands" Basically just invocations of connection.  
 <a href="classmongo_1_1DBClientWithCommands.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="dbclientinterface_8h_source.html">dbclientinterface.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for mongo::DBClientWithCommands:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="classmongo_1_1DBClientWithCommands.png" usemap="#mongo::DBClientWithCommands_map" alt=""/>
  <map id="mongo::DBClientWithCommands_map" name="mongo::DBClientWithCommands_map">
<area href="classmongo_1_1DBClientInterface.html" title="The interface that any db connection should implement. " alt="mongo::DBClientInterface" shape="rect" coords="99,56,288,80"/>
<area href="classmongo_1_1DBClientBase.html" title="abstract class that implements the core db operations " alt="mongo::DBClientBase" shape="rect" coords="99,168,288,192"/>
<area href="classmongo_1_1DBClientConnection.html" title="A basic connection to the database. " alt="mongo::DBClientConnection" shape="rect" coords="0,224,189,248"/>
<area href="classmongo_1_1DBClientReplicaSet.html" title="Use this class to connect to a replica set of servers. " alt="mongo::DBClientReplicaSet" shape="rect" coords="199,224,388,248"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmongo_1_1DBClientWithCommands_1_1MROutput.html">MROutput</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This implicitly converts from char*, string, and <a class="el" href="classmongo_1_1BSONObj.html" title="C++ representation of a &quot;BSON&quot; object â€“ that is, an extended JSON-style object in a binary represent...">BSONObj</a> to be an argument to mapreduce You shouldn't need to explicitly construct this.  <a href="structmongo_1_1DBClientWithCommands_1_1MROutput.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a9f1eab7d912975b9208ac65e4e0e5a26"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a9f1eab7d912975b9208ac65e4e0e5a26">ProfilingLevel</a> <tr class="memdesc:a9f1eab7d912975b9208ac65e4e0e5a26"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Mongo database provides built-in performance profiling capabilities.  <a href="classmongo_1_1DBClientWithCommands.html#a9f1eab7d912975b9208ac65e4e0e5a26">More...</a><br /></td></tr>
<tr class="separator:a9f1eab7d912975b9208ac65e4e0e5a26"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
<tr class="memitem:ad8e21d67f8039fdb5656e3257f5377cd"><td class="memItemLeft" align="right" valign="top">typedef stdx::function&lt; void(<a class="el" href="classmongo_1_1BSONObjBuilder.html">BSONObjBuilder</a> *)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#ad8e21d67f8039fdb5656e3257f5377cd">RunCommandHookFunc</a></td></tr>
<tr class="memdesc:ad8e21d67f8039fdb5656e3257f5377cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function type for runCommand hooking; the function takes a pointer to a <a class="el" href="classmongo_1_1BSONObjBuilder.html" title="Utility for creating a BSONObj. ">BSONObjBuilder</a> and returns nothing.  <a href="#ad8e21d67f8039fdb5656e3257f5377cd">More...</a><br /></td></tr>
<tr class="separator:ad8e21d67f8039fdb5656e3257f5377cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad67de41fc2b796b1e0063cab70149e0b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad67de41fc2b796b1e0063cab70149e0b"></a>
typedef stdx::function&lt; void(const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;, const std::string &amp;)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#ad67de41fc2b796b1e0063cab70149e0b">PostRunCommandHookFunc</a></td></tr>
<tr class="memdesc:ad67de41fc2b796b1e0063cab70149e0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Similar to above, but for running a function on a command response after a command has been run. <br /></td></tr>
<tr class="separator:ad67de41fc2b796b1e0063cab70149e0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afbc1c985c253386696f222ed103ea25f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#afbc1c985c253386696f222ed103ea25f">simpleCommand</a> (const std::string &amp;dbname, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *info, const std::string &amp;command)</td></tr>
<tr class="memdesc:afbc1c985c253386696f222ed103ea25f"><td class="mdescLeft">&#160;</td><td class="mdescRight">helper function.  <a href="#afbc1c985c253386696f222ed103ea25f">More...</a><br /></td></tr>
<tr class="separator:afbc1c985c253386696f222ed103ea25f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf5d3460d983fbd491c081bb556c5b49"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#abf5d3460d983fbd491c081bb556c5b49">runCommand</a> (const std::string &amp;dbname, const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;cmd, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;info, int options=0)</td></tr>
<tr class="memdesc:abf5d3460d983fbd491c081bb556c5b49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a database command.  <a href="#abf5d3460d983fbd491c081bb556c5b49">More...</a><br /></td></tr>
<tr class="separator:abf5d3460d983fbd491c081bb556c5b49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef21a401b2151f3f35c77c0b9c7e00d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#aef21a401b2151f3f35c77c0b9c7e00d0">auth</a> (const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;params)</td></tr>
<tr class="memdesc:aef21a401b2151f3f35c77c0b9c7e00d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Authenticate a user.  <a href="#aef21a401b2151f3f35c77c0b9c7e00d0">More...</a><br /></td></tr>
<tr class="separator:aef21a401b2151f3f35c77c0b9c7e00d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f4e1b9b4f321430578f3daad3fc44cd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a9f4e1b9b4f321430578f3daad3fc44cd">auth</a> (const std::string &amp;dbname, const std::string &amp;username, const std::string &amp;pwd, std::string &amp;errmsg, bool digestPassword=true)</td></tr>
<tr class="memdesc:a9f4e1b9b4f321430578f3daad3fc44cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Authorize access to a particular database.  <a href="#a9f4e1b9b4f321430578f3daad3fc44cd">More...</a><br /></td></tr>
<tr class="separator:a9f4e1b9b4f321430578f3daad3fc44cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad800ddc61600f203e50309c1f0f79628"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#ad800ddc61600f203e50309c1f0f79628">logout</a> (const std::string &amp;dbname, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;info)</td></tr>
<tr class="memdesc:ad800ddc61600f203e50309c1f0f79628"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs out the connection for the given database.  <a href="#ad800ddc61600f203e50309c1f0f79628">More...</a><br /></td></tr>
<tr class="separator:ad800ddc61600f203e50309c1f0f79628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f78344b7f5acf3bad6af9a371f36877"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5f78344b7f5acf3bad6af9a371f36877"></a>
virtual unsigned long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a5f78344b7f5acf3bad6af9a371f36877">count</a> (const std::string &amp;ns, const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;query=<a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>(), int options=0, int limit=0, int skip=0)</td></tr>
<tr class="memdesc:a5f78344b7f5acf3bad6af9a371f36877"><td class="mdescLeft">&#160;</td><td class="mdescRight">count number of objects in collection ns that match the query criteria specified throws UserAssertion if database returns an error <br /></td></tr>
<tr class="separator:a5f78344b7f5acf3bad6af9a371f36877"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7835ef6aae90c24cff383a67caa22ef"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#ad7835ef6aae90c24cff383a67caa22ef">isMaster</a> (bool &amp;isMaster, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *info=0)</td></tr>
<tr class="memdesc:ad7835ef6aae90c24cff383a67caa22ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns true in isMaster parm if this db is the current master of a replica pair.  <a href="#ad7835ef6aae90c24cff383a67caa22ef">More...</a><br /></td></tr>
<tr class="separator:ad7835ef6aae90c24cff383a67caa22ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41b95555c0d9954f67e68b51174e0ba1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a41b95555c0d9954f67e68b51174e0ba1">createCollection</a> (const std::string &amp;ns, long long size=0, bool capped=false, int max=0, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *info=0)</td></tr>
<tr class="memdesc:a41b95555c0d9954f67e68b51174e0ba1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new collection in the database.  <a href="#a41b95555c0d9954f67e68b51174e0ba1">More...</a><br /></td></tr>
<tr class="separator:a41b95555c0d9954f67e68b51174e0ba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a649485f980c83b008e02e4cb255c3cc5"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a649485f980c83b008e02e4cb255c3cc5">getLastError</a> (const std::string &amp;db, bool fsync=false, bool j=false, int w=0, int wtimeout=0)</td></tr>
<tr class="memdesc:a649485f980c83b008e02e4cb255c3cc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get error result from the last write operation (insert/update/delete) on this connection.  <a href="#a649485f980c83b008e02e4cb255c3cc5">More...</a><br /></td></tr>
<tr class="separator:a649485f980c83b008e02e4cb255c3cc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e9555c2a773f4077402ea92ba1a9b54"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9e9555c2a773f4077402ea92ba1a9b54"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a9e9555c2a773f4077402ea92ba1a9b54">getLastError</a> (bool fsync=false, bool j=false, int w=0, int wtimeout=0)</td></tr>
<tr class="memdesc:a9e9555c2a773f4077402ea92ba1a9b54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as the form of getLastError that takes a dbname, but just uses the admin DB. <br /></td></tr>
<tr class="separator:a9e9555c2a773f4077402ea92ba1a9b54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a004541e85d95df2e6b7b88e9646688d0"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a004541e85d95df2e6b7b88e9646688d0">getLastErrorDetailed</a> (const std::string &amp;db, bool fsync=false, bool j=false, int w=0, int wtimeout=0)</td></tr>
<tr class="memdesc:a004541e85d95df2e6b7b88e9646688d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get error result from the last write operation (insert/update/delete) on this connection.  <a href="#a004541e85d95df2e6b7b88e9646688d0">More...</a><br /></td></tr>
<tr class="separator:a004541e85d95df2e6b7b88e9646688d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3607567dafc27fd345c394d7180d9d55"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3607567dafc27fd345c394d7180d9d55"></a>
virtual <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a3607567dafc27fd345c394d7180d9d55">getLastErrorDetailed</a> (bool fsync=false, bool j=false, int w=0, int wtimeout=0)</td></tr>
<tr class="memdesc:a3607567dafc27fd345c394d7180d9d55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as the form of getLastErrorDetailed that takes a dbname, but just uses the admin DB. <br /></td></tr>
<tr class="separator:a3607567dafc27fd345c394d7180d9d55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf7c4c97d476e8485b075664fa1e7fbb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#adf7c4c97d476e8485b075664fa1e7fbb">getPrevError</a> ()</td></tr>
<tr class="memdesc:adf7c4c97d476e8485b075664fa1e7fbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the last error which has occurred, even if not the very last operation.  <a href="#adf7c4c97d476e8485b075664fa1e7fbb">More...</a><br /></td></tr>
<tr class="separator:adf7c4c97d476e8485b075664fa1e7fbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae979625de44e7cdafb2b1574a6eaf735"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#ae979625de44e7cdafb2b1574a6eaf735">resetError</a> ()</td></tr>
<tr class="memdesc:ae979625de44e7cdafb2b1574a6eaf735"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the previous error state for this connection (accessed via getLastError and getPrevError).  <a href="#ae979625de44e7cdafb2b1574a6eaf735">More...</a><br /></td></tr>
<tr class="separator:ae979625de44e7cdafb2b1574a6eaf735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c5143c1c2f891bdfd991f73baaf865e"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a4c5143c1c2f891bdfd991f73baaf865e">dropCollection</a> (const std::string &amp;ns, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *info=NULL)</td></tr>
<tr class="memdesc:a4c5143c1c2f891bdfd991f73baaf865e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete the specified collection.  <a href="#a4c5143c1c2f891bdfd991f73baaf865e">More...</a><br /></td></tr>
<tr class="separator:a4c5143c1c2f891bdfd991f73baaf865e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4029b9b7cdc42e0ec62043aa1f7ea5f4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a4029b9b7cdc42e0ec62043aa1f7ea5f4">repairDatabase</a> (const std::string &amp;dbname, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *info=0)</td></tr>
<tr class="memdesc:a4029b9b7cdc42e0ec62043aa1f7ea5f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a repair and compaction of the specified database.  <a href="#a4029b9b7cdc42e0ec62043aa1f7ea5f4">More...</a><br /></td></tr>
<tr class="separator:a4029b9b7cdc42e0ec62043aa1f7ea5f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef309f92e568cf787e5df0fc5975b7cb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#aef309f92e568cf787e5df0fc5975b7cb">copyDatabase</a> (const std::string &amp;fromdb, const std::string &amp;todb, const std::string &amp;fromhost=&quot;&quot;, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *info=0)</td></tr>
<tr class="memdesc:aef309f92e568cf787e5df0fc5975b7cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy database from one server or name to another server or name.  <a href="#aef309f92e568cf787e5df0fc5975b7cb">More...</a><br /></td></tr>
<tr class="separator:aef309f92e568cf787e5df0fc5975b7cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae740dc6a0a970505023f1392e9dffd4f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#ae740dc6a0a970505023f1392e9dffd4f">mapreduce</a> (const std::string &amp;ns, const std::string &amp;jsmapf, const std::string &amp;jsreducef, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> query=<a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>(), <a class="el" href="structmongo_1_1DBClientWithCommands_1_1MROutput.html">MROutput</a> output=MRInline)</td></tr>
<tr class="memdesc:ae740dc6a0a970505023f1392e9dffd4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a map/reduce job on the server.  <a href="#ae740dc6a0a970505023f1392e9dffd4f">More...</a><br /></td></tr>
<tr class="separator:ae740dc6a0a970505023f1392e9dffd4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac33b3d997c6dff8774bdd978f2587c35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#ac33b3d997c6dff8774bdd978f2587c35">group</a> (const StringData &amp;ns, const StringData &amp;jsreduce, std::vector&lt; <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &gt; *output, const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;initial=<a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>(), const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;cond=<a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>(), const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;key=<a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>(), const StringData &amp;finalize=&quot;&quot;)</td></tr>
<tr class="memdesc:ac33b3d997c6dff8774bdd978f2587c35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Groups documents in a collection by the specified key and performs simple aggregation functions such as computing counts and sums.  <a href="#ac33b3d997c6dff8774bdd978f2587c35">More...</a><br /></td></tr>
<tr class="separator:ac33b3d997c6dff8774bdd978f2587c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace7079f43ecae33afeded01bf6d3acf7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#ace7079f43ecae33afeded01bf6d3acf7">groupWithKeyFunction</a> (const StringData &amp;ns, const StringData &amp;jsreduce, std::vector&lt; <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &gt; *output, const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;initial=<a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>(), const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;cond=<a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>(), const StringData &amp;jskey=&quot;&quot;, const StringData &amp;finalize=&quot;&quot;)</td></tr>
<tr class="memdesc:ace7079f43ecae33afeded01bf6d3acf7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does the same thing as 'group' but accepts a key function, 'jskey', that is used to create an object representing the key.  <a href="#ace7079f43ecae33afeded01bf6d3acf7">More...</a><br /></td></tr>
<tr class="separator:ace7079f43ecae33afeded01bf6d3acf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a2bf5ad35bd2e4415848c77cdf5f8e0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a4a2bf5ad35bd2e4415848c77cdf5f8e0">eval</a> (const std::string &amp;dbname, const std::string &amp;jscode, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;info, <a class="el" href="classmongo_1_1BSONElement.html">BSONElement</a> &amp;retValue, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *args=0)</td></tr>
<tr class="memdesc:a4a2bf5ad35bd2e4415848c77cdf5f8e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run javascript code on the database server.  <a href="#a4a2bf5ad35bd2e4415848c77cdf5f8e0">More...</a><br /></td></tr>
<tr class="separator:a4a2bf5ad35bd2e4415848c77cdf5f8e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ba41f08e965f77d728d45cf7055a6da"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a0ba41f08e965f77d728d45cf7055a6da">validate</a> (const std::string &amp;ns, bool scandata=true)</td></tr>
<tr class="memdesc:a0ba41f08e965f77d728d45cf7055a6da"><td class="mdescLeft">&#160;</td><td class="mdescRight">validate a collection, checking for errors and reporting back statistics.  <a href="#a0ba41f08e965f77d728d45cf7055a6da">More...</a><br /></td></tr>
<tr class="separator:a0ba41f08e965f77d728d45cf7055a6da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa7616dc96492a35e10c2fe299137eba"><td class="memTemplParams" colspan="2"><a class="anchor" id="afa7616dc96492a35e10c2fe299137eba"></a>
template&lt;class T , class NumType &gt; </td></tr>
<tr class="memitem:afa7616dc96492a35e10c2fe299137eba"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#afa7616dc96492a35e10c2fe299137eba">eval</a> (const std::string &amp;dbname, const std::string &amp;jscode, T parm1, NumType &amp;ret)</td></tr>
<tr class="memdesc:afa7616dc96492a35e10c2fe299137eba"><td class="mdescLeft">&#160;</td><td class="mdescRight">eval invocation with one parm to server and one numeric field (either int or double) returned <br /></td></tr>
<tr class="separator:afa7616dc96492a35e10c2fe299137eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ec3c25ce449bbde83425980a3322981"><td class="memItemLeft" align="right" valign="top">std::list&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a3ec3c25ce449bbde83425980a3322981">getDatabaseNames</a> ()</td></tr>
<tr class="memdesc:a3ec3c25ce449bbde83425980a3322981"><td class="mdescLeft">&#160;</td><td class="mdescRight">get a list of all the current databases uses the { listDatabases : 1 } command.  <a href="#a3ec3c25ce449bbde83425980a3322981">More...</a><br /></td></tr>
<tr class="separator:a3ec3c25ce449bbde83425980a3322981"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a523077814f25e4b990c684de4a7d9edb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a523077814f25e4b990c684de4a7d9edb"></a>
std::list&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a523077814f25e4b990c684de4a7d9edb">getCollectionNames</a> (const std::string &amp;db)</td></tr>
<tr class="memdesc:a523077814f25e4b990c684de4a7d9edb"><td class="mdescLeft">&#160;</td><td class="mdescRight">get a list of all the current collections in db <br /></td></tr>
<tr class="separator:a523077814f25e4b990c684de4a7d9edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af530bd1e49b5734fe3c7bfe496bac21c"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#af530bd1e49b5734fe3c7bfe496bac21c">ensureIndex</a> (const std::string &amp;ns, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> keys, bool unique=false, const std::string &amp;name=&quot;&quot;, bool cache=true, bool background=false, int v=-1, int ttl=0)</td></tr>
<tr class="memdesc:af530bd1e49b5734fe3c7bfe496bac21c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an index if it does not already exist.  <a href="#af530bd1e49b5734fe3c7bfe496bac21c">More...</a><br /></td></tr>
<tr class="separator:af530bd1e49b5734fe3c7bfe496bac21c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1703bbf65fa13fbca637c131de8fd4b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad1703bbf65fa13fbca637c131de8fd4b"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#ad1703bbf65fa13fbca637c131de8fd4b">resetIndexCache</a> ()</td></tr>
<tr class="memdesc:ad1703bbf65fa13fbca637c131de8fd4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">clears the index cache, so the subsequent call to ensureIndex for any index will go to the server <br /></td></tr>
<tr class="separator:ad1703bbf65fa13fbca637c131de8fd4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a545174e7e66f7aeb52f42b3bf55e8434"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a545174e7e66f7aeb52f42b3bf55e8434"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a545174e7e66f7aeb52f42b3bf55e8434">dropIndexes</a> (const std::string &amp;ns)</td></tr>
<tr class="memdesc:a545174e7e66f7aeb52f42b3bf55e8434"><td class="mdescLeft">&#160;</td><td class="mdescRight">drops all indexes for the collection <br /></td></tr>
<tr class="separator:a545174e7e66f7aeb52f42b3bf55e8434"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c4e2a3338f9d34cfc9fc8fe9da78ae4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7c4e2a3338f9d34cfc9fc8fe9da78ae4"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a7c4e2a3338f9d34cfc9fc8fe9da78ae4">dropDatabase</a> (const std::string &amp;dbname, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *info=0)</td></tr>
<tr class="memdesc:a7c4e2a3338f9d34cfc9fc8fe9da78ae4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erase / drop an entire database. <br /></td></tr>
<tr class="separator:a7c4e2a3338f9d34cfc9fc8fe9da78ae4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classmongo_1_1DBClientInterface"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classmongo_1_1DBClientInterface')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classmongo_1_1DBClientInterface.html">mongo::DBClientInterface</a></td></tr>
<tr class="memitem:a9226e3693a4fd0f6b05b8c9977f6c007 inherit pub_methods_classmongo_1_1DBClientInterface"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientInterface.html#a9226e3693a4fd0f6b05b8c9977f6c007">findOne</a> (const std::string &amp;ns, const <a class="el" href="classmongo_1_1Query.html">Query</a> &amp;query, const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *fieldsToReturn=0, int queryOptions=0)</td></tr>
<tr class="separator:a9226e3693a4fd0f6b05b8c9977f6c007 inherit pub_methods_classmongo_1_1DBClientInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14611a5624a90900dd3fb9d0703b1747 inherit pub_methods_classmongo_1_1DBClientInterface"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientInterface.html#a14611a5624a90900dd3fb9d0703b1747">findN</a> (std::vector&lt; <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &gt; &amp;<a class="el" href="namespacemongo.html#a6e7b630480b6b76682977229cd3a4fbf">out</a>, const std::string &amp;ns, <a class="el" href="classmongo_1_1Query.html">Query</a> query, int nToReturn, int nToSkip=0, const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *fieldsToReturn=0, int queryOptions=0, int batchSize=0)</td></tr>
<tr class="memdesc:a14611a5624a90900dd3fb9d0703b1747 inherit pub_methods_classmongo_1_1DBClientInterface"><td class="mdescLeft">&#160;</td><td class="mdescRight">query N objects from the database into an array.  <a href="#a14611a5624a90900dd3fb9d0703b1747">More...</a><br /></td></tr>
<tr class="separator:a14611a5624a90900dd3fb9d0703b1747 inherit pub_methods_classmongo_1_1DBClientInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dde98652045a710cf1024588cb9ea49 inherit pub_methods_classmongo_1_1DBClientInterface"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2dde98652045a710cf1024588cb9ea49"></a>
virtual std::auto_ptr&lt; <a class="el" href="classmongo_1_1DBClientCursor.html">DBClientCursor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientInterface.html#a2dde98652045a710cf1024588cb9ea49">getMore</a> (const std::string &amp;ns, long long cursorId, int nToReturn=0, int options=0)=0</td></tr>
<tr class="memdesc:a2dde98652045a710cf1024588cb9ea49 inherit pub_methods_classmongo_1_1DBClientInterface"><td class="mdescLeft">&#160;</td><td class="mdescRight">don't use this - called automatically by <a class="el" href="classmongo_1_1DBClientCursor.html" title="Queries return a cursor object. ">DBClientCursor</a> for you <br /></td></tr>
<tr class="separator:a2dde98652045a710cf1024588cb9ea49 inherit pub_methods_classmongo_1_1DBClientInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a45b8381965a2ce1883a6ba4c1941accc"><td class="memItemLeft" align="right" valign="top">static std::string MONGO_CLIENT_FUNC&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a45b8381965a2ce1883a6ba4c1941accc">getLastErrorString</a> (const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;res)</td></tr>
<tr class="memdesc:a45b8381965a2ce1883a6ba4c1941accc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can be called with the returned value from getLastErrorDetailed to extract an error string.  <a href="#a45b8381965a2ce1883a6ba4c1941accc">More...</a><br /></td></tr>
<tr class="separator:a45b8381965a2ce1883a6ba4c1941accc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a6300bcc3561506cf0b2606a3ae69d1ac"><td class="memItemLeft" align="right" valign="top">logger::LogSeverity&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a6300bcc3561506cf0b2606a3ae69d1ac">_logLevel</a></td></tr>
<tr class="memdesc:a6300bcc3561506cf0b2606a3ae69d1ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">controls how chatty the client is about network errors &amp; such.  <a href="#a6300bcc3561506cf0b2606a3ae69d1ac">More...</a><br /></td></tr>
<tr class="separator:a6300bcc3561506cf0b2606a3ae69d1ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aeadd1aff188b73db1793d7f2058b2f7a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeadd1aff188b73db1793d7f2058b2f7a"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#aeadd1aff188b73db1793d7f2058b2f7a">isOk</a> (const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;)</td></tr>
<tr class="memdesc:aeadd1aff188b73db1793d7f2058b2f7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">if the result of a command is ok <br /></td></tr>
<tr class="separator:aeadd1aff188b73db1793d7f2058b2f7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a150c81a6f12a8d0419e8b02c8c48e9da"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a150c81a6f12a8d0419e8b02c8c48e9da"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a150c81a6f12a8d0419e8b02c8c48e9da">isNotMasterErrorString</a> (const <a class="el" href="classmongo_1_1BSONElement.html">BSONElement</a> &amp;e)</td></tr>
<tr class="memdesc:a150c81a6f12a8d0419e8b02c8c48e9da"><td class="mdescLeft">&#160;</td><td class="mdescRight">if the element contains a not master error <br /></td></tr>
<tr class="separator:a150c81a6f12a8d0419e8b02c8c48e9da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d9b356a8aa9f1e645800054b157d5d4"><td class="memItemLeft" align="right" valign="top">QueryOptions&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a3d9b356a8aa9f1e645800054b157d5d4">availableOptions</a> ()</td></tr>
<tr class="memdesc:a3d9b356a8aa9f1e645800054b157d5d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Look up the options available on this client.  <a href="#a3d9b356a8aa9f1e645800054b157d5d4">More...</a><br /></td></tr>
<tr class="separator:a3d9b356a8aa9f1e645800054b157d5d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23446ab4f3f5f4d35560ffaf9fd5bc88"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a23446ab4f3f5f4d35560ffaf9fd5bc88">_authMongoCR</a> (const std::string &amp;dbname, const std::string &amp;username, const std::string &amp;pwd, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *info, bool digestPassword)</td></tr>
<tr class="memdesc:a23446ab4f3f5f4d35560ffaf9fd5bc88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the MONGODB-CR protocol to authenticate as "username" against the database "dbname", with the given password.  <a href="#a23446ab4f3f5f4d35560ffaf9fd5bc88">More...</a><br /></td></tr>
<tr class="separator:a23446ab4f3f5f4d35560ffaf9fd5bc88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0096ac24a28821f00480e6df4bf05235"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a0096ac24a28821f00480e6df4bf05235">_authX509</a> (const std::string &amp;dbname, const std::string &amp;username, <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *info)</td></tr>
<tr class="memdesc:a0096ac24a28821f00480e6df4bf05235"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the MONGODB-X509 protocol to authenticate as "username.  <a href="#a0096ac24a28821f00480e6df4bf05235">More...</a><br /></td></tr>
<tr class="separator:a0096ac24a28821f00480e6df4bf05235"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a3e38d8da11fc6dc7ed25ec4c443a1907"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3e38d8da11fc6dc7ed25ec4c443a1907"></a>
<a class="el" href="classmongo_1_1DBClientWithCommands.html#ad8e21d67f8039fdb5656e3257f5377cd">RunCommandHookFunc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1DBClientWithCommands.html#a3e38d8da11fc6dc7ed25ec4c443a1907">_runCommandHook</a></td></tr>
<tr class="memdesc:a3e38d8da11fc6dc7ed25ec4c443a1907"><td class="mdescLeft">&#160;</td><td class="mdescRight">These functions will be executed by the driver on runCommand calls. <br /></td></tr>
<tr class="separator:a3e38d8da11fc6dc7ed25ec4c443a1907"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>DB "commands" Basically just invocations of connection. </p>
<p>$cmd.findOne({...}); </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="ad8e21d67f8039fdb5656e3257f5377cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef stdx::function&lt;void(<a class="el" href="classmongo_1_1BSONObjBuilder.html">BSONObjBuilder</a>*)&gt; <a class="el" href="classmongo_1_1DBClientWithCommands.html#ad8e21d67f8039fdb5656e3257f5377cd">mongo::DBClientWithCommands::RunCommandHookFunc</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function type for runCommand hooking; the function takes a pointer to a <a class="el" href="classmongo_1_1BSONObjBuilder.html" title="Utility for creating a BSONObj. ">BSONObjBuilder</a> and returns nothing. </p>
<p>The builder contains a runCommand BSON object. Once such a function is set as the runCommand hook, every time the DBClient processes a runCommand, the hook will be called just prior to sending it to the server. </p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a9f1eab7d912975b9208ac65e4e0e5a26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classmongo_1_1DBClientWithCommands.html#a9f1eab7d912975b9208ac65e4e0e5a26">mongo::DBClientWithCommands::ProfilingLevel</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The Mongo database provides built-in performance profiling capabilities. </p>
<p>Uset setDbProfilingLevel() to enable. Profiling information is then written to the system.profile collection, which one can then query. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a23446ab4f3f5f4d35560ffaf9fd5bc88"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::DBClientWithCommands::_authMongoCR </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dbname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pwd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>digestPassword</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use the MONGODB-CR protocol to authenticate as "username" against the database "dbname", with the given password. </p>
<p>If digestPassword is false, the password is assumed to be pre-digested. Returns false on failure, and sets "errmsg". </p>

</div>
</div>
<a class="anchor" id="a0096ac24a28821f00480e6df4bf05235"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::DBClientWithCommands::_authX509 </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dbname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use the MONGODB-X509 protocol to authenticate as "username. </p>
<p>The certificate details has already been communicated automatically as part of the connect call. Returns false on failure and set "errmsg". </p>

</div>
</div>
<a class="anchor" id="aef21a401b2151f3f35c77c0b9c7e00d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongo::DBClientWithCommands::auth </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Authenticate a user. </p>
<p>The "params" <a class="el" href="classmongo_1_1BSONObj.html" title="C++ representation of a &quot;BSON&quot; object â€“ that is, an extended JSON-style object in a binary represent...">BSONObj</a> should be initialized with some of the fields below. Which fields are required depends on the mechanism, which is mandatory. </p><pre class="fragment">"mechanism": The string name of the sasl mechanism to use.  Mandatory.
"user": The string name of the user to authenticate.  Mandatory.
"db": The database target of the auth command, which identifies the location
    of the credential information for the user.  May be "$external" if
    credential information is stored outside of the mongo cluster.  Mandatory.
"pwd": The password data.
"digestPassword": Boolean, set to true if the "pwd" is undigested (default).
"serviceName": The GSSAPI service name to use.  Defaults to "mongodb".
"serviceHostname": The GSSAPI hostname to use.  Defaults to the name of the remote
     host.
</pre><p>Other fields in "params" are silently ignored.</p>
<p>Returns normally on success, and throws on error. Throws a <a class="el" href="classmongo_1_1DBException.html" title="Most mongo exceptions inherit from this; this is commonly caught in most threads. ...">DBException</a> with getCode() == ErrorCodes::AuthenticationFailed if authentication is rejected. All other exceptions are tantamount to authentication failure, but may also indicate more serious problems. </p>

</div>
</div>
<a class="anchor" id="a9f4e1b9b4f321430578f3daad3fc44cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::DBClientWithCommands::auth </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dbname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pwd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>errmsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>digestPassword</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Authorize access to a particular database. </p>
<p>Authentication is separate for each database on the server &ndash; you may authenticate for any number of databases on a single connection. The "admin" database is special and once authenticated provides access to all databases on the server. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">digestPassword</td><td>if password is plain text, set this to true. otherwise assumed to be pre-digested </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">authLevel</td><td>level of authentication for the given user </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a3d9b356a8aa9f1e645800054b157d5d4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QueryOptions mongo::DBClientWithCommands::availableOptions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Look up the options available on this client. </p>
<p>Caches the answer from _lookupAvailableOptions(), below. </p>

</div>
</div>
<a class="anchor" id="aef309f92e568cf787e5df0fc5975b7cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::DBClientWithCommands::copyDatabase </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>fromdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>todb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>fromhost</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *&#160;</td>
          <td class="paramname"><em>info</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy database from one server or name to another server or name. </p>
<p>Generally, you should <a class="el" href="classmongo_1_1DBClientWithCommands.html#a7c4e2a3338f9d34cfc9fc8fe9da78ae4" title="Erase / drop an entire database. ">dropDatabase()</a> first as otherwise the copied information will MERGE into whatever data is already present in this database.</p>
<p>For security reasons this function only works when you are authorized to access the "admin" db. However, if you have access to said db, you can copy any database from one place to another. TODO: this needs enhancement to be more flexible in terms of security.</p>
<p>This method provides a way to "rename" a database by copying it to a new db name and location. The copy is "repaired" and compacted.</p>
<p>fromdb database name from which to copy. todb database name to copy to. fromhost hostname of the database (and optionally, ":port") from which to copy the data. copies from self if "".</p>
<p>returns true if successful </p>

</div>
</div>
<a class="anchor" id="a41b95555c0d9954f67e68b51174e0ba1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::DBClientWithCommands::createCollection </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long long&#160;</td>
          <td class="paramname"><em>size</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>capped</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *&#160;</td>
          <td class="paramname"><em>info</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new collection in the database. </p>
<p>Normally, collection creation is automatic. You would use this function if you wish to specify special options on creation.</p>
<p>If the collection already exists, no action occurs.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ns</td><td>fully qualified collection name </td></tr>
    <tr><td class="paramname">size</td><td>desired initial extent size for the collection. Must be &lt;= 1000000000 for normal collections. For fixed size (capped) collections, this size is the total/max size of the collection. </td></tr>
    <tr><td class="paramname">capped</td><td>if true, this is a fixed size collection (where old data rolls out). </td></tr>
    <tr><td class="paramname">max</td><td>maximum number of objects if capped (optional).</td></tr>
  </table>
  </dd>
</dl>
<p>returns true if successful. </p>

</div>
</div>
<a class="anchor" id="a4c5143c1c2f891bdfd991f73baaf865e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool mongo::DBClientWithCommands::dropCollection </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *&#160;</td>
          <td class="paramname"><em>info</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete the specified collection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>An optional output parameter that receives the result object the database returns from the drop command. May be null if the caller doesn't need that info. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af530bd1e49b5734fe3c7bfe496bac21c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool mongo::DBClientWithCommands::ensureIndex </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>&#160;</td>
          <td class="paramname"><em>keys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>unique</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>cache</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>background</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>v</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ttl</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create an index if it does not already exist. </p>
<p>ensureIndex calls are remembered so it is safe/fast to call this function many times in your code. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ns</td><td>collection to be indexed </td></tr>
    <tr><td class="paramname">keys</td><td>the "key pattern" for the index. e.g., { name : 1 } </td></tr>
    <tr><td class="paramname">unique</td><td>if true, indicates that key uniqueness should be enforced for this index </td></tr>
    <tr><td class="paramname">name</td><td>if not specified, it will be created from the keys automatically (which is recommended) </td></tr>
    <tr><td class="paramname">cache</td><td>if set to false, the index cache for the connection won't remember this call </td></tr>
    <tr><td class="paramname">background</td><td>build index in the background (see mongodb docs for details) </td></tr>
    <tr><td class="paramname">v</td><td>index version. leave at default value. (unit tests set this parameter.) </td></tr>
    <tr><td class="paramname">ttl.</td><td>The value of how many seconds before data should be removed from a collection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether or not sent message to db. should be true on first call, false on subsequent unless resetIndexCache was called </dd></dl>

</div>
</div>
<a class="anchor" id="a4a2bf5ad35bd2e4415848c77cdf5f8e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::DBClientWithCommands::eval </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dbname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>jscode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONElement.html">BSONElement</a> &amp;&#160;</td>
          <td class="paramname"><em>retValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *&#160;</td>
          <td class="paramname"><em>args</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run javascript code on the database server. </p>
<p>dbname database SavedContext in which the code runs. The javascript variable 'db' will be assigned to this database when the function is invoked. jscode source code for a javascript function. info the command object which contains any information on the invocation result including the return value and other information. If an error occurs running the jscode, error information will be in info. (try "out() &lt;&lt; info.toString()") retValue return value from the jscode function. args args to pass to the jscode function. when invoked, the 'args' variable will be defined for use by the jscode.</p>
<p>returns true if runs ok.</p>
<p>See testDbEval() in dbclient.cpp for an example of usage. </p>

</div>
</div>
<a class="anchor" id="a3ec3c25ce449bbde83425980a3322981"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;std::string&gt; mongo::DBClientWithCommands::getDatabaseNames </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get a list of all the current databases uses the { listDatabases : 1 } command. </p>
<p>throws on error </p>

</div>
</div>
<a class="anchor" id="a649485f980c83b008e02e4cb255c3cc5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string mongo::DBClientWithCommands::getLastError </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fsync</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>j</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>wtimeout</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get error result from the last write operation (insert/update/delete) on this connection. </p>
<p>db doesn't change the command's behavior - it is just for auth checks. </p><dl class="section return"><dt>Returns</dt><dd>error message text, or empty string if no error. </dd></dl>

</div>
</div>
<a class="anchor" id="a004541e85d95df2e6b7b88e9646688d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> mongo::DBClientWithCommands::getLastErrorDetailed </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fsync</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>j</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>w</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>wtimeout</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get error result from the last write operation (insert/update/delete) on this connection. </p>
<p>db doesn't change the command's behavior - it is just for auth checks. </p><dl class="section return"><dt>Returns</dt><dd>full error object.</dd></dl>
<p>If "w" is -1, wait for propagation to majority of nodes. If "wtimeout" is 0, the operation will block indefinitely if needed. </p>

</div>
</div>
<a class="anchor" id="a45b8381965a2ce1883a6ba4c1941accc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string MONGO_CLIENT_FUNC mongo::DBClientWithCommands::getLastErrorString </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;&#160;</td>
          <td class="paramname"><em>res</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Can be called with the returned value from getLastErrorDetailed to extract an error string. </p>
<p>If all you need is the string, just call <a class="el" href="classmongo_1_1DBClientWithCommands.html#a649485f980c83b008e02e4cb255c3cc5" title="Get error result from the last write operation (insert/update/delete) on this connection. ">getLastError()</a> instead. </p>

</div>
</div>
<a class="anchor" id="adf7c4c97d476e8485b075664fa1e7fbb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> mongo::DBClientWithCommands::getPrevError </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the last error which has occurred, even if not the very last operation. </p>
<dl class="section return"><dt>Returns</dt><dd>{ err : &lt;error message&gt;=""&gt;, nPrev : &lt;how_many_ops_back_occurred&gt;, ok : 1 }</dd></dl>
<p>result.err will be null if no error has occurred. </p>

</div>
</div>
<a class="anchor" id="ac33b3d997c6dff8774bdd978f2587c35"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongo::DBClientWithCommands::group </td>
          <td>(</td>
          <td class="paramtype">const StringData &amp;&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const StringData &amp;&#160;</td>
          <td class="paramname"><em>jsreduce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &gt; *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;&#160;</td>
          <td class="paramname"><em>initial</em> = <code><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;&#160;</td>
          <td class="paramname"><em>cond</em> = <code><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em> = <code><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const StringData &amp;&#160;</td>
          <td class="paramname"><em>finalize</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Groups documents in a collection by the specified key and performs simple aggregation functions such as computing counts and sums. </p>
<dl class="section note"><dt>Note</dt><dd>WARNING: Use of the group command is strongly discouraged, it is much better to use the aggregation framework to acheive similar functionality.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://docs.mongodb.org/manual/reference/method/db.collection.group">http://docs.mongodb.org/manual/reference/method/db.collection.group</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ns</td><td>The namespace to group </td></tr>
    <tr><td class="paramname">key</td><td>The field or fields to group specified as a projection document: { field: 1 } </td></tr>
    <tr><td class="paramname">jsreduce</td><td>An aggregation function that operates on the documents during the group ing operation. The function should take two arguments: the current document and an aggregation result for that group. </td></tr>
    <tr><td class="paramname">output</td><td>The output vector. </td></tr>
    <tr><td class="paramname">initial</td><td>Initial aggregation result document. </td></tr>
    <tr><td class="paramname">cond</td><td>Optional selection criteria to determine which documents to process. </td></tr>
    <tr><td class="paramname">finalize</td><td>Optional function that runs for each item in the result set before returning the final values in the output vector. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ace7079f43ecae33afeded01bf6d3acf7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongo::DBClientWithCommands::groupWithKeyFunction </td>
          <td>(</td>
          <td class="paramtype">const StringData &amp;&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const StringData &amp;&#160;</td>
          <td class="paramname"><em>jsreduce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &gt; *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;&#160;</td>
          <td class="paramname"><em>initial</em> = <code><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;&#160;</td>
          <td class="paramname"><em>cond</em> = <code><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const StringData &amp;&#160;</td>
          <td class="paramname"><em>jskey</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const StringData &amp;&#160;</td>
          <td class="paramname"><em>finalize</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Does the same thing as 'group' but accepts a key function, 'jskey', that is used to create an object representing the key. </p>
<p>This allows for grouping on calculated fields rather on existing fields alone.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classmongo_1_1DBClientWithCommands.html#ac33b3d997c6dff8774bdd978f2587c35" title="Groups documents in a collection by the specified key and performs simple aggregation functions such ...">DBClientWithCommands::group</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ad7835ef6aae90c24cff383a67caa22ef"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool mongo::DBClientWithCommands::isMaster </td>
          <td>(</td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>isMaster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *&#160;</td>
          <td class="paramname"><em>info</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>returns true in isMaster parm if this db is the current master of a replica pair. </p>
<p>pass in info for more details e.g.: { "ismaster" : 1.0 , "msg" : "not paired" , "ok" : 1.0 }</p>
<p>returns true if command invoked successfully. </p>

</div>
</div>
<a class="anchor" id="ad800ddc61600f203e50309c1f0f79628"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void mongo::DBClientWithCommands::logout </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dbname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Logs out the connection for the given database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dbname</td><td>the database to logout from. </td></tr>
    <tr><td class="paramname">info</td><td>the result object for the logout command (provided for backwards compatibility with mongo shell) </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classmongo_1_1DBClientConnection.html#a7b763987a9a52653d2515f9e868ef65f">mongo::DBClientConnection</a>, and <a class="el" href="classmongo_1_1DBClientReplicaSet.html#a21de30926c7e44cce0b77b6dbe8dd905">mongo::DBClientReplicaSet</a>.</p>

</div>
</div>
<a class="anchor" id="ae740dc6a0a970505023f1392e9dffd4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> mongo::DBClientWithCommands::mapreduce </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>jsmapf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>jsreducef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>&#160;</td>
          <td class="paramname"><em>query</em> = <code><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmongo_1_1DBClientWithCommands_1_1MROutput.html">MROutput</a>&#160;</td>
          <td class="paramname"><em>output</em> = <code>MRInline</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run a map/reduce job on the server. </p>
<p>See <a href="http://dochub.mongodb.org/core/mapreduce">http://dochub.mongodb.org/core/mapreduce</a></p>
<p>ns namespace (db+collection name) of input data jsmapf javascript map function code jsreducef javascript reduce function code. query optional query filter for the input output either a string collection name or an object representing output type if not specified uses inline output type</p>
<p>returns a result object which contains: { result : &lt;collection_name&gt;, numObjects : &lt;number_of_objects_scanned&gt;, timeMillis : &lt;job_time&gt;, ok : &lt;1_if_ok&gt;, [, err : &lt;errmsg_if_error&gt;] }</p>
<p>For example one might call: result.getField("ok").trueValue() on the result to check if ok. </p>

</div>
</div>
<a class="anchor" id="a4029b9b7cdc42e0ec62043aa1f7ea5f4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::DBClientWithCommands::repairDatabase </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dbname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *&#160;</td>
          <td class="paramname"><em>info</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Perform a repair and compaction of the specified database. </p>
<p>May take a long time to run. Disk space must be available equal to the size of the database while repairing. </p>

</div>
</div>
<a class="anchor" id="ae979625de44e7cdafb2b1574a6eaf735"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::DBClientWithCommands::resetError </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset the previous error state for this connection (accessed via getLastError and getPrevError). </p>
<p>Useful when performing several operations at once and then checking for an error after attempting all operations. </p>

</div>
</div>
<a class="anchor" id="abf5d3460d983fbd491c081bb556c5b49"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool mongo::DBClientWithCommands::runCommand </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dbname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>options</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run a database command. </p>
<p>Database commands are represented as BSON objects. Common database commands have prebuilt helper functions &ndash; see below. If a helper is not available you can directly call runCommand.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dbname</td><td>database name. Use "admin" for global administrative commands. </td></tr>
    <tr><td class="paramname">cmd</td><td>the command object to execute. For example, { ismaster : 1 } </td></tr>
    <tr><td class="paramname">info</td><td>the result object the database returns. Typically has { ok : ..., errmsg : ... } fields set. </td></tr>
    <tr><td class="paramname">options</td><td>see enum QueryOptions - normally not needed to run a command </td></tr>
    <tr><td class="paramname">auth</td><td>if set, the <a class="el" href="classmongo_1_1BSONObj.html" title="C++ representation of a &quot;BSON&quot; object â€“ that is, an extended JSON-style object in a binary represent...">BSONObj</a> representation will be appended to the command object sent</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the command returned "ok". </dd></dl>

<p>Reimplemented in <a class="el" href="classmongo_1_1DBClientConnection.html#a0282d7967b2a3ef0d81684b1a1c072bf">mongo::DBClientConnection</a>.</p>

</div>
</div>
<a class="anchor" id="afbc1c985c253386696f222ed103ea25f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::DBClientWithCommands::simpleCommand </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dbname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObj.html">BSONObj</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>command</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>helper function. </p>
<p>run a simple command where the command expression is simply { command : 1 } </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>&ndash; where to put result object. may be null if caller doesn't need that info </td></tr>
    <tr><td class="paramname">command</td><td>&ndash; command name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the command returned "ok". </dd></dl>

</div>
</div>
<a class="anchor" id="a0ba41f08e965f77d728d45cf7055a6da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongo::DBClientWithCommands::validate </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>scandata</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>validate a collection, checking for errors and reporting back statistics. </p>
<p>this operation is slow and blocking. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a6300bcc3561506cf0b2606a3ae69d1ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">logger::LogSeverity mongo::DBClientWithCommands::_logLevel</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>controls how chatty the client is about network errors &amp; such. </p>
<p>See <a class="el" href="log_8h_source.html">log.h</a> </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/mongo/client/<a class="el" href="dbclientinterface_8h_source.html">dbclientinterface.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>

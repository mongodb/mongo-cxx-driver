<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MongoDB C++ Driver: mongocxx::v_noabi::client_session Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MongoDB C++ Driver<span id="projectnumber">&#160;mongocxx-3.9.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemongocxx.html">mongocxx</a></li><li class="navelem"><a class="el" href="namespacemongocxx_1_1v__noabi.html">v_noabi</a></li><li class="navelem"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html">client_session</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmongocxx_1_1v__noabi_1_1client__session-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">mongocxx::v_noabi::client_session Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Use a session for a sequence of operations, optionally with either causal consistency or snapshots.  
 <a href="classmongocxx_1_1v__noabi_1_1client__session.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="client__session_8hpp_source.html">client_session.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aa9ee32fc4b2136b145c915e41d980789"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#aa9ee32fc4b2136b145c915e41d980789">with_transaction_cb</a> = std::function&lt; void(<a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html">client_session</a> *)&gt;</td></tr>
<tr class="memdesc:aa9ee32fc4b2136b145c915e41d980789"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper to run a user-provided callback within a transaction.  <br /></td></tr>
<tr class="separator:aa9ee32fc4b2136b145c915e41d980789"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5e656ce2da95185e7caed108dd9f263d"><td class="memItemLeft" align="right" valign="top"><a id="a5e656ce2da95185e7caed108dd9f263d" name="a5e656ce2da95185e7caed108dd9f263d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>client_session</b> (<a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html">client_session</a> &amp;&amp;) noexcept</td></tr>
<tr class="memdesc:a5e656ce2da95185e7caed108dd9f263d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move constructs a session. <br /></td></tr>
<tr class="separator:a5e656ce2da95185e7caed108dd9f263d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa40c0715e787884057a9989fc3c9c3c8"><td class="memItemLeft" align="right" valign="top"><a id="aa40c0715e787884057a9989fc3c9c3c8" name="aa40c0715e787884057a9989fc3c9c3c8"></a>
<a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html">client_session</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html">client_session</a> &amp;&amp;) noexcept</td></tr>
<tr class="memdesc:aa40c0715e787884057a9989fc3c9c3c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move assigns a session. <br /></td></tr>
<tr class="separator:aa40c0715e787884057a9989fc3c9c3c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44d2b712d5e2cecc291e5df4618aa20a"><td class="memItemLeft" align="right" valign="top"><a id="a44d2b712d5e2cecc291e5df4618aa20a" name="a44d2b712d5e2cecc291e5df4618aa20a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>~client_session</b> () noexcept</td></tr>
<tr class="memdesc:a44d2b712d5e2cecc291e5df4618aa20a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ends and destroys the session. <br /></td></tr>
<tr class="separator:a44d2b712d5e2cecc291e5df4618aa20a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc913aa02b8fcac370f04560b38c283e"><td class="memItemLeft" align="right" valign="top"><a id="adc913aa02b8fcac370f04560b38c283e" name="adc913aa02b8fcac370f04560b38c283e"></a>
const class <a class="el" href="classmongocxx_1_1v__noabi_1_1client.html">client</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>client</b> () const noexcept</td></tr>
<tr class="memdesc:adc913aa02b8fcac370f04560b38c283e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the client that started this session. <br /></td></tr>
<tr class="separator:adc913aa02b8fcac370f04560b38c283e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a6d41ec4fcf00d3b8620a2055cff48a"><td class="memItemLeft" align="right" valign="top"><a id="a4a6d41ec4fcf00d3b8620a2055cff48a" name="a4a6d41ec4fcf00d3b8620a2055cff48a"></a>
const <a class="el" href="classmongocxx_1_1v__noabi_1_1options_1_1client__session.html">options::client_session</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>options</b> () const noexcept</td></tr>
<tr class="memdesc:a4a6d41ec4fcf00d3b8620a2055cff48a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the options this session was created with. <br /></td></tr>
<tr class="separator:a4a6d41ec4fcf00d3b8620a2055cff48a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afea98be7ae7bc53d0aef49f39c60a68d"><td class="memItemLeft" align="right" valign="top">bsoncxx::document::view&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#afea98be7ae7bc53d0aef49f39c60a68d">id</a> () const noexcept</td></tr>
<tr class="memdesc:afea98be7ae7bc53d0aef49f39c60a68d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the server-side "logical session ID" associated with this session, as a BSON document.  <br /></td></tr>
<tr class="separator:afea98be7ae7bc53d0aef49f39c60a68d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44f9381a2a023f96b07a2490c75cca73"><td class="memItemLeft" align="right" valign="top">bsoncxx::document::view&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#a44f9381a2a023f96b07a2490c75cca73">cluster_time</a> () const noexcept</td></tr>
<tr class="memdesc:a44f9381a2a023f96b07a2490c75cca73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the session's clusterTime, as a BSON document.  <br /></td></tr>
<tr class="separator:a44f9381a2a023f96b07a2490c75cca73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae21962705177c6f8bb8dfa6b12de0cb"><td class="memItemLeft" align="right" valign="top">bsoncxx::types::b_timestamp&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#aae21962705177c6f8bb8dfa6b12de0cb">operation_time</a> () const noexcept</td></tr>
<tr class="memdesc:aae21962705177c6f8bb8dfa6b12de0cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the session's operationTime, as a BSON timestamp.  <br /></td></tr>
<tr class="separator:aae21962705177c6f8bb8dfa6b12de0cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab31800e68f9fa0ab9d5e12186931849e"><td class="memItemLeft" align="right" valign="top">std::uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#ab31800e68f9fa0ab9d5e12186931849e">server_id</a> () const noexcept</td></tr>
<tr class="memdesc:ab31800e68f9fa0ab9d5e12186931849e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the server_id the session is pinned to.  <br /></td></tr>
<tr class="separator:ab31800e68f9fa0ab9d5e12186931849e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a45216da5478f59bd7be2d3d0501108"><td class="memItemLeft" align="right" valign="top"><a id="a2a45216da5478f59bd7be2d3d0501108" name="a2a45216da5478f59bd7be2d3d0501108"></a>
transaction_state&#160;</td><td class="memItemRight" valign="bottom"><b>get_transaction_state</b> () const noexcept</td></tr>
<tr class="memdesc:a2a45216da5478f59bd7be2d3d0501108"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current transaction state for this session. <br /></td></tr>
<tr class="separator:a2a45216da5478f59bd7be2d3d0501108"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ad1ab1720eed5d2b1e77f994836fdfe"><td class="memItemLeft" align="right" valign="top"><a id="a6ad1ab1720eed5d2b1e77f994836fdfe" name="a6ad1ab1720eed5d2b1e77f994836fdfe"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>get_dirty</b> () const noexcept</td></tr>
<tr class="memdesc:a6ad1ab1720eed5d2b1e77f994836fdfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether or not this session is dirty. <br /></td></tr>
<tr class="separator:a6ad1ab1720eed5d2b1e77f994836fdfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b255873875eeb6c4bae230784551b05"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#a4b255873875eeb6c4bae230784551b05">advance_cluster_time</a> (const bsoncxx::document::view &amp;<a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#a44f9381a2a023f96b07a2490c75cca73">cluster_time</a>)</td></tr>
<tr class="memdesc:a4b255873875eeb6c4bae230784551b05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance the cluster time for a session.  <br /></td></tr>
<tr class="separator:a4b255873875eeb6c4bae230784551b05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9cfa61dba41baa402920bee0a8f1c85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#af9cfa61dba41baa402920bee0a8f1c85">advance_operation_time</a> (const bsoncxx::types::b_timestamp &amp;<a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#aae21962705177c6f8bb8dfa6b12de0cb">operation_time</a>)</td></tr>
<tr class="memdesc:af9cfa61dba41baa402920bee0a8f1c85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance the session's operation time, expressed as a BSON timestamp.  <br /></td></tr>
<tr class="separator:af9cfa61dba41baa402920bee0a8f1c85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84ea5613813e6efbe065e3f39e1f972b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#a84ea5613813e6efbe065e3f39e1f972b">start_transaction</a> (const stdx::optional&lt; <a class="el" href="classmongocxx_1_1v__noabi_1_1options_1_1transaction.html">options::transaction</a> &gt; &amp;transaction_opts={})</td></tr>
<tr class="memdesc:a84ea5613813e6efbe065e3f39e1f972b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a transaction on the current client session.  <br /></td></tr>
<tr class="separator:a84ea5613813e6efbe065e3f39e1f972b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2d1a8f7c77542db6ec7629d162761ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#ad2d1a8f7c77542db6ec7629d162761ff">commit_transaction</a> ()</td></tr>
<tr class="memdesc:ad2d1a8f7c77542db6ec7629d162761ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Commits a transaction on the current client session.  <br /></td></tr>
<tr class="separator:ad2d1a8f7c77542db6ec7629d162761ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabb8247a655741af6fe0f78bef8116e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#aabb8247a655741af6fe0f78bef8116e1">abort_transaction</a> ()</td></tr>
<tr class="memdesc:aabb8247a655741af6fe0f78bef8116e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Aborts a transaction on the current client session.  <br /></td></tr>
<tr class="separator:aabb8247a655741af6fe0f78bef8116e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Use a session for a sequence of operations, optionally with either causal consistency or snapshots. </p>
<p>Note that <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html" title="Use a session for a sequence of operations, optionally with either causal consistency or snapshots.">client_session</a> is not thread-safe. See <a href="https://mongodb.github.io/mongo-cxx-driver/mongocxx-v3/thread-safety/">https://mongodb.github.io/mongo-cxx-driver/mongocxx-v3/thread-safety/</a> for more details.</p>
<dl class="section see"><dt>See also</dt><dd><a href="https://www.mongodb.com/docs/manual/core/read-isolation-consistency-recency/#causal-consistency">https://www.mongodb.com/docs/manual/core/read-isolation-consistency-recency/#causal-consistency</a> </dd></dl>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="aa9ee32fc4b2136b145c915e41d980789" name="aa9ee32fc4b2136b145c915e41d980789"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9ee32fc4b2136b145c915e41d980789">&#9670;&#160;</a></span>with_transaction_cb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#aa9ee32fc4b2136b145c915e41d980789">mongocxx::v_noabi::client_session::with_transaction_cb</a> =  std::function&lt;void (<a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html">client_session</a>*)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper to run a user-provided callback within a transaction. </p>
<p>This method will start a new transaction on this client session, run the callback, then commit the transaction. If it cannot commit the transaction, the entire sequence may be retried, and the callback may be run multiple times.</p>
<p>If the user callback calls driver methods that run operations against the server that can throw an <a class="el" href="classmongocxx_1_1v__noabi_1_1operation__exception.html" title="Class representing an exception received from a MongoDB server.">operation_exception</a> (ex: <a class="el" href="classmongocxx_1_1v__noabi_1_1collection.html#ac2d3c68174096ff15439acf3b9b0a25a" title="Inserts a single document into the collection.">collection::insert_one</a>), the user callback should allow those exceptions to propagate up the stack so they can be caught and processed by the with_transaction helper.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>The callback to run inside of a transaction. </td></tr>
    <tr><td class="paramname">opts</td><td>(optional) The options to use to run the transaction.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classmongocxx_1_1v__noabi_1_1operation__exception.html" title="Class representing an exception received from a MongoDB server.">mongocxx::operation_exception</a></td><td>if there are errors completing the transaction. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aabb8247a655741af6fe0f78bef8116e1" name="aabb8247a655741af6fe0f78bef8116e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabb8247a655741af6fe0f78bef8116e1">&#9670;&#160;</a></span>abort_transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongocxx::v_noabi::client_session::abort_transaction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Aborts a transaction on the current client session. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classmongocxx_1_1v__noabi_1_1operation__exception.html" title="Class representing an exception received from a MongoDB server.">mongocxx::operation_exception</a></td><td>if the options are misconfigured or if there are other errors such as a session with no transaction in progress. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4b255873875eeb6c4bae230784551b05" name="a4b255873875eeb6c4bae230784551b05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b255873875eeb6c4bae230784551b05">&#9670;&#160;</a></span>advance_cluster_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongocxx::v_noabi::client_session::advance_cluster_time </td>
          <td>(</td>
          <td class="paramtype">const bsoncxx::document::view &amp;&#160;</td>
          <td class="paramname"><em>cluster_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Advance the cluster time for a session. </p>
<p>Has an effect only if the new cluster time is greater than the session's current cluster time.</p>
<p>Use <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#af9cfa61dba41baa402920bee0a8f1c85" title="Advance the session&#39;s operation time, expressed as a BSON timestamp.">advance_operation_time()</a> and <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#a4b255873875eeb6c4bae230784551b05" title="Advance the cluster time for a session.">advance_cluster_time()</a> to copy the operationTime and clusterTime from another session, ensuring subsequent operations in this session are causally consistent with the last operation in the other session. </p>

</div>
</div>
<a id="af9cfa61dba41baa402920bee0a8f1c85" name="af9cfa61dba41baa402920bee0a8f1c85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9cfa61dba41baa402920bee0a8f1c85">&#9670;&#160;</a></span>advance_operation_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongocxx::v_noabi::client_session::advance_operation_time </td>
          <td>(</td>
          <td class="paramtype">const bsoncxx::types::b_timestamp &amp;&#160;</td>
          <td class="paramname"><em>operation_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Advance the session's operation time, expressed as a BSON timestamp. </p>
<p>Has an effect only if the new operation time is greater than the session's current operation time.</p>
<p>Use <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#af9cfa61dba41baa402920bee0a8f1c85" title="Advance the session&#39;s operation time, expressed as a BSON timestamp.">advance_operation_time()</a> and <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#a4b255873875eeb6c4bae230784551b05" title="Advance the cluster time for a session.">advance_cluster_time()</a> to copy the operationTime and clusterTime from another session, ensuring subsequent operations in this session are causally consistent with the last operation in the other session. </p>

</div>
</div>
<a id="a44f9381a2a023f96b07a2490c75cca73" name="a44f9381a2a023f96b07a2490c75cca73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44f9381a2a023f96b07a2490c75cca73">&#9670;&#160;</a></span>cluster_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bsoncxx::document::view mongocxx::v_noabi::client_session::cluster_time </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the session's clusterTime, as a BSON document. </p>
<p>This is an opaque value suitable for passing to <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#a4b255873875eeb6c4bae230784551b05" title="Advance the cluster time for a session.">advance_cluster_time()</a>. The document is empty if the session has not been used for any operation and you have not called <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#a4b255873875eeb6c4bae230784551b05" title="Advance the cluster time for a session.">advance_cluster_time()</a>. This view is invalid after the session is destroyed. </p>

</div>
</div>
<a id="ad2d1a8f7c77542db6ec7629d162761ff" name="ad2d1a8f7c77542db6ec7629d162761ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2d1a8f7c77542db6ec7629d162761ff">&#9670;&#160;</a></span>commit_transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongocxx::v_noabi::client_session::commit_transaction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Commits a transaction on the current client session. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classmongocxx_1_1v__noabi_1_1operation__exception.html" title="Class representing an exception received from a MongoDB server.">mongocxx::operation_exception</a></td><td>if the options are misconfigured, if there are network or other transient failures, or if there are other errors such as a session with no transaction in progress. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afea98be7ae7bc53d0aef49f39c60a68d" name="afea98be7ae7bc53d0aef49f39c60a68d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afea98be7ae7bc53d0aef49f39c60a68d">&#9670;&#160;</a></span>id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bsoncxx::document::view mongocxx::v_noabi::client_session::id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the server-side "logical session ID" associated with this session, as a BSON document. </p>
<p>This view is invalid after the session is destroyed. </p>

</div>
</div>
<a id="aae21962705177c6f8bb8dfa6b12de0cb" name="aae21962705177c6f8bb8dfa6b12de0cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae21962705177c6f8bb8dfa6b12de0cb">&#9670;&#160;</a></span>operation_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bsoncxx::types::b_timestamp mongocxx::v_noabi::client_session::operation_time </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the session's operationTime, as a BSON timestamp. </p>
<p>This is an opaque value suitable for passing to <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#af9cfa61dba41baa402920bee0a8f1c85" title="Advance the session&#39;s operation time, expressed as a BSON timestamp.">advance_operation_time()</a>. The timestamp is zero if the session has not been used for any operation and you have not called <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#af9cfa61dba41baa402920bee0a8f1c85" title="Advance the session&#39;s operation time, expressed as a BSON timestamp.">advance_operation_time()</a>. </p>

</div>
</div>
<a id="ab31800e68f9fa0ab9d5e12186931849e" name="ab31800e68f9fa0ab9d5e12186931849e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab31800e68f9fa0ab9d5e12186931849e">&#9670;&#160;</a></span>server_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::uint32_t mongocxx::v_noabi::client_session::server_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the server_id the session is pinned to. </p>
<p>The server_id is zero if the session is not pinned to a server. </p>

</div>
</div>
<a id="a84ea5613813e6efbe065e3f39e1f972b" name="a84ea5613813e6efbe065e3f39e1f972b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84ea5613813e6efbe065e3f39e1f972b">&#9670;&#160;</a></span>start_transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongocxx::v_noabi::client_session::start_transaction </td>
          <td>(</td>
          <td class="paramtype">const stdx::optional&lt; <a class="el" href="classmongocxx_1_1v__noabi_1_1options_1_1transaction.html">options::transaction</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>transaction_opts</em> = <code>{}</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts a transaction on the current client session. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transaction_opts</td><td>(optional) The options to use in the transaction.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classmongocxx_1_1v__noabi_1_1operation__exception.html" title="Class representing an exception received from a MongoDB server.">mongocxx::operation_exception</a></td><td>if the options are misconfigured, if there are network or other transient failures, or if there are other errors such as a session with a transaction already in progress. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/mongocxx/include/mongocxx/v_noabi/mongocxx/<a class="el" href="client__session_8hpp_source.html">client_session.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>

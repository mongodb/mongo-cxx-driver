<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MongoDB C++ Driver: BSON Documents</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-extra.css" rel="stylesheet" type="text/css"/>
<!-- patch-apidocs-current-redirects: mongocxx-3.11.0 -->
<link rel="canonical" href="https://mongocxx.org/api/mongocxx-3.11.0/topic-bsoncxx-examples-bson-documents.html"/>
<script type="text/javascript">
if (window.location.pathname.startsWith("/api/current/")) {
  window.location.replace(
    window.location.href.replace("/api/current/", "/api/mongocxx-3.11.0/")
  )
}
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MongoDB C++ Driver<span id="projectnumber">&#160;mongocxx-3.11.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="topic-bsoncxx.html">The bsoncxx Library</a></li><li class="navelem"><a class="el" href="topic-bsoncxx-examples.html">How-To Guides</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">BSON Documents</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#create-a-document">Create a Document</a>
    <ul>
      <li class="level2">
        <a href="#from-a-json-string">From a JSON String</a>
        <ul>
          <li class="level3">
            <a href="#basic-example">Basic Example</a>
          </li>
          <li class="level3">
            <a href="#with-extended-json">With Extended JSON</a>
          </li>
          <li class="level3">
            <a href="#with-a-sub-document">With a Sub-Document</a>
          </li>
          <li class="level3">
            <a href="#with-a-sub-array">With a Sub-Array</a>
          </li>
          <li class="level3">
            <a href="#with-a-user-defined-literal">With a User-Defined Literal</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#using-the-basic-builder">Using the Basic Builder</a>
        <ul>
          <li class="level3">
            <a href="#basic-example-1">Basic Example</a>
          </li>
          <li class="level3">
            <a href="#with-make_document">With make_document</a>
          </li>
          <li class="level3">
            <a href="#with-multiple-appends">With Multiple Appends</a>
          </li>
          <li class="level3">
            <a href="#to-create-multiple-documents">To Create Multiple Documents</a>
          </li>
          <li class="level3">
            <a href="#with-a-value-type">With a Value Type</a>
          </li>
          <li class="level3">
            <a href="#with-a-bson-type">With a BSON Type</a>
          </li>
          <li class="level3">
            <a href="#with-a-bson-value">With a BSON Value</a>
          </li>
          <li class="level3">
            <a href="#with-a-sub-document-1">With a Sub-Document</a>
          </li>
          <li class="level3">
            <a href="#with-multiple-sub-document-appends">With Multiple Sub-Document Appends</a>
          </li>
          <li class="level3">
            <a href="#with-a-sub-array-1">With a Sub-Array</a>
          </li>
          <li class="level3">
            <a href="#with-multiple-sub-array-appends">With Multiple Sub-Array Appends</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#from-raw-bytes">From Raw Bytes</a>
        <ul>
          <li class="level3">
            <a href="#as-a-view">As a View</a>
          </li>
          <li class="level3">
            <a href="#as-a-value">As a Value</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#create-an-array">Create an Array</a>
    <ul>
      <li class="level2">
        <a href="#from-a-json-string-1">From a JSON String</a>
        <ul>
          <li class="level3">
            <a href="#basic-example-2">Basic Example</a>
          </li>
          <li class="level3">
            <a href="#with-extended-json-1">With Extended JSON</a>
          </li>
          <li class="level3">
            <a href="#with-a-sub-document-2">With a Sub-Document</a>
          </li>
          <li class="level3">
            <a href="#with-a-sub-array-2">With a Sub-Array</a>
          </li>
          <li class="level3">
            <a href="#with-a-user-defined-literal-1">With a User-Defined Literal</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#using-the-basic-builder-1">Using the Basic Builder</a>
        <ul>
          <li class="level3">
            <a href="#basic-example-3">Basic Example</a>
          </li>
          <li class="level3">
            <a href="#with-make_document-1">With make_document</a>
          </li>
          <li class="level3">
            <a href="#with-multiple-appends-1">With Multiple Appends</a>
          </li>
          <li class="level3">
            <a href="#to-create-multiple-documents-1">To Create Multiple Documents</a>
          </li>
          <li class="level3">
            <a href="#with-a-value-type-1">With a Value Type</a>
          </li>
          <li class="level3">
            <a href="#with-a-bson-type-1">With a BSON Type</a>
          </li>
          <li class="level3">
            <a href="#with-a-bson-value-1">With a BSON Value</a>
          </li>
          <li class="level3">
            <a href="#with-a-sub-document-3">With a Sub-Document</a>
          </li>
          <li class="level3">
            <a href="#with-multiple-sub-document-appends-1">With Multiple Sub-Document Appends</a>
          </li>
          <li class="level3">
            <a href="#with-a-sub-array-3">With a Sub-Array</a>
          </li>
          <li class="level3">
            <a href="#with-multiple-sub-array-appends-1">With Multiple Sub-Array Appends</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#from-raw-bytes-1">From Raw Bytes</a>
        <ul>
          <li class="level3">
            <a href="#as-a-view-1">As a View</a>
          </li>
          <li class="level3">
            <a href="#as-a-value-1">As a Value</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#access-a-document-element">Access a Document Element</a>
    <ul>
      <li class="level2">
        <a href="#by-iteration">By Iteration</a>
        <ul>
          <li class="level3">
            <a href="#basic-example-4">Basic Example</a>
          </li>
          <li class="level3">
            <a href="#using-iterators">Using Iterators</a>
          </li>
          <li class="level3">
            <a href="#using-algorithms">Using Algorithms</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#by-key">By Key</a>
        <ul>
          <li class="level3">
            <a href="#using-find">Using find()</a>
          </li>
          <li class="level3">
            <a href="#using-the-subscript-operator">Using the Subscript Operator</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#access-an-array-element">Access an Array Element</a>
    <ul>
      <li class="level2">
        <a href="#by-iteration-1">By Iteration</a>
        <ul>
          <li class="level3">
            <a href="#basic-example-5">Basic Example</a>
          </li>
          <li class="level3">
            <a href="#using-iterators-1">Using Iterators</a>
          </li>
          <li class="level3">
            <a href="#using-algorithms-1">Using Algorithms</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#by-key-1">By Key</a>
        <ul>
          <li class="level3">
            <a href="#using-find-1">Using find()</a>
          </li>
          <li class="level3">
            <a href="#using-the-subscript-operator-1">Using the Subscript Operator</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#query-an-element">Query an Element</a>
    <ul>
      <li class="level2">
        <a href="#in-a-document">In a Document</a>
        <ul>
          <li class="level3">
            <a href="#for-a-single-type">For a Single Type</a>
          </li>
          <li class="level3">
            <a href="#for-multiple-types">For Multiple Types</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#in-an-array">In an Array</a>
        <ul>
          <li class="level3">
            <a href="#for-single-type">For Single Type</a>
          </li>
          <li class="level3">
            <a href="#for-multiple-types-1">For Multiple Types</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#comparison">Comparison</a>
        <ul>
          <li class="level3">
            <a href="#by-type">By Type</a>
          </li>
          <li class="level3">
            <a href="#by-bson-value">By BSON Value</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#obtain-a-bson-value">Obtain a BSON Value</a>
    <ul>
      <li class="level2">
        <a href="#from-a-bson-type">From a BSON Type</a>
        <ul>
          <li class="level3">
            <a href="#as-a-view-2">As a View</a>
          </li>
          <li class="level3">
            <a href="#as-a-value-2">As a Value</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#from-a-document-element">From a Document Element</a>
        <ul>
          <li class="level3">
            <a href="#as-a-view-3">As a View</a>
          </li>
          <li class="level3">
            <a href="#as-a-value-3">As a Value</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#from-an-array-element">From an Array Element</a>
        <ul>
          <li class="level3">
            <a href="#as-a-view-4">As a View</a>
          </li>
          <li class="level3">
            <a href="#as-a-value-4">As a Value</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#from-a-value-type">From a Value Type</a>
      </li>
      <li class="level2">
        <a href="#with-make_value">With make_value</a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#convert-to-a-json-string">Convert to a JSON String</a>
    <ul>
      <li class="level2">
        <a href="#from-a-document">From a Document</a>
      </li>
      <li class="level2">
        <a href="#from-an-array">From an Array</a>
      </li>
    </ul>
  </li>
</ul>
</div>
<div class="textblock"><p>How to create and use BSON documents.</p>
<h1><a class="anchor" id="create-a-document"></a>
Create a Document</h1>
<h2><a class="anchor" id="from-a-json-string"></a>
From a JSON String</h2>
<h3><a class="anchor" id="basic-example"></a>
Basic Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = <a class="code hl_function" href="namespacebsoncxx.html#acb4c8f97b3588e04426880ec49e6d9a7">bsoncxx::from_json</a>(R<span class="stringliteral">&quot;(</span></div>
<div class="line"><span class="stringliteral">        {</span></div>
<div class="line"><span class="stringliteral">            &quot;a&quot;: 1,</span></div>
<div class="line"><span class="stringliteral">            &quot;b&quot;: 2.0,</span></div>
<div class="line"><span class="stringliteral">            &quot;c&quot;: &quot;three&quot;</span></div>
<div class="line"><span class="stringliteral">        }</span></div>
<div class="line"><span class="stringliteral">    )&quot;);</span></div>
<div class="line"><span class="stringliteral">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc = owner.view();</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    ASSERT(doc[</span><span class="stringliteral">&quot;a&quot;</span>].get_int32().value == 1);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;b&quot;</span>].get_double().value == 2.0);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;c&quot;</span>].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-extended-json"></a>
With Extended JSON</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = <a class="code hl_function" href="namespacebsoncxx.html#acb4c8f97b3588e04426880ec49e6d9a7">bsoncxx::from_json</a>(R<span class="stringliteral">&quot;(</span></div>
<div class="line"><span class="stringliteral">        {</span></div>
<div class="line"><span class="stringliteral">            &quot;a&quot;: {&quot;$numberInt&quot;:    &quot;1&quot;},</span></div>
<div class="line"><span class="stringliteral">            &quot;b&quot;: {&quot;$numberLong&quot;:   &quot;2&quot;},</span></div>
<div class="line"><span class="stringliteral">            &quot;c&quot;: {&quot;$numberDouble&quot;: &quot;3&quot;}</span></div>
<div class="line"><span class="stringliteral">        }</span></div>
<div class="line"><span class="stringliteral">    )&quot;);</span></div>
<div class="line"><span class="stringliteral">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc = owner.view();</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    ASSERT(doc[</span><span class="stringliteral">&quot;a&quot;</span>].get_int32().value == 1);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;b&quot;</span>].get_int64().value == 2);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;c&quot;</span>].get_double().value == 3.0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-sub-document"></a>
With a Sub-Document</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> doc = <a class="code hl_function" href="namespacebsoncxx.html#acb4c8f97b3588e04426880ec49e6d9a7">bsoncxx::from_json</a>(R<span class="stringliteral">&quot;(</span></div>
<div class="line"><span class="stringliteral">        {</span></div>
<div class="line"><span class="stringliteral">            &quot;v&quot;: {&quot;key&quot;: &quot;value&quot;}</span></div>
<div class="line"><span class="stringliteral">        }</span></div>
<div class="line"><span class="stringliteral">    )&quot;);</span></div>
<div class="line"><span class="stringliteral">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> v = doc[</span><span class="stringliteral">&quot;v&quot;</span>].get_document().value;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v[<span class="stringliteral">&quot;key&quot;</span>].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;value&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-sub-array"></a>
With a Sub-Array</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = <a class="code hl_function" href="namespacebsoncxx.html#acb4c8f97b3588e04426880ec49e6d9a7">bsoncxx::from_json</a>(R<span class="stringliteral">&quot;(</span></div>
<div class="line"><span class="stringliteral">        {</span></div>
<div class="line"><span class="stringliteral">            &quot;v&quot;: [1, 2]</span></div>
<div class="line"><span class="stringliteral">        }</span></div>
<div class="line"><span class="stringliteral">    )&quot;);</span></div>
<div class="line"><span class="stringliteral">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> sub = owner.view()[</span><span class="stringliteral">&quot;v&quot;</span>].get_array().value;</div>
<div class="line"> </div>
<div class="line">    ASSERT(sub[0].get_int32().value == 1);</div>
<div class="line">    ASSERT(sub[1].get_int32().value == 2);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-user-defined-literal"></a>
With a User-Defined Literal</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacebsoncxx.html">bsoncxx</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> a = R<span class="stringliteral">&quot;({&quot;key&quot;: &quot;value&quot;})&quot;_bson;</span></div>
<div class="line"><span class="stringliteral">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> b = <a class="code hl_function" href="namespacebsoncxx.html#acb4c8f97b3588e04426880ec49e6d9a7">bsoncxx::from_json</a>(R</span><span class="stringliteral">&quot;({&quot;key&quot;: &quot;value&quot;})&quot;);</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    ASSERT(a == b);</span></div>
<div class="line"><span class="stringliteral">}</span></div>
</div><!-- fragment --><h2><a class="anchor" id="using-the-basic-builder"></a>
Using the Basic Builder</h2>
<h3><a class="anchor" id="basic-example-1"></a>
Basic Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1builder_1_1basic_1_1document.html">bsoncxx::builder::basic::document</a> builder;</div>
<div class="line">    builder.append(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;a&quot;</span>, std::int32_t{1}), <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;b&quot;</span>, 2.0), <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;three&quot;</span>));</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = builder.extract();</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc = owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;a&quot;</span>].get_int32().value == 1);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;b&quot;</span>].get_double().value == 2.0);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;c&quot;</span>].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-make_document"></a>
With make_document</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = <a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a4bf5ec569109f7c726a0991650faedbc">bsoncxx::builder::basic::make_document</a>(</div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;a&quot;</span>, std::int32_t{1}), <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;b&quot;</span>, 2.0), <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;three&quot;</span>));</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc = owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;a&quot;</span>].get_int32().value == 1);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;b&quot;</span>].get_double().value == 2.0);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;c&quot;</span>].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-multiple-appends"></a>
With Multiple Appends</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1builder_1_1basic_1_1document.html">bsoncxx::builder::basic::document</a> builder;</div>
<div class="line">    builder.append(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;a&quot;</span>, std::int32_t{1}));</div>
<div class="line">    builder.append(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;b&quot;</span>, 2.0));</div>
<div class="line">    builder.append(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;three&quot;</span>));</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = builder.extract();</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc = owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;a&quot;</span>].get_int32().value == 1);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;b&quot;</span>].get_double().value == 2.0);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;c&quot;</span>].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="to-create-multiple-documents"></a>
To Create Multiple Documents</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1builder_1_1basic_1_1document.html">bsoncxx::builder::basic::document</a> builder;</div>
<div class="line"> </div>
<div class="line">    builder.append(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;v&quot;</span>, std::int32_t{1}));</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> a_owner = builder.extract();</div>
<div class="line"> </div>
<div class="line">    builder.clear();</div>
<div class="line"> </div>
<div class="line">    builder.append(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;v&quot;</span>, std::int64_t{2}));</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> b_owner = builder.extract();</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> a = a_owner.view();</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> b = b_owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(a[<span class="stringliteral">&quot;v&quot;</span>].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_int32);</div>
<div class="line">    ASSERT(b[<span class="stringliteral">&quot;v&quot;</span>].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_int64);</div>
<div class="line"> </div>
<div class="line">    ASSERT(a[<span class="stringliteral">&quot;v&quot;</span>].get_int32().value == 1);</div>
<div class="line">    ASSERT(b[<span class="stringliteral">&quot;v&quot;</span>].get_int64().value == 2);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-value-type"></a>
With a Value Type</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = <a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a4bf5ec569109f7c726a0991650faedbc">bsoncxx::builder::basic::make_document</a>(</div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;a&quot;</span>, std::int32_t{1}), <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;b&quot;</span>, 2.0), <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;three&quot;</span>));</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc = owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;a&quot;</span>].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_int32);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;b&quot;</span>].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_double);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;c&quot;</span>].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_string);</div>
<div class="line"> </div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;a&quot;</span>].get_int32().value == 1);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;b&quot;</span>].get_double().value == 2.0);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;c&quot;</span>].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-bson-type"></a>
With a BSON Type</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__int32.html">bsoncxx::types::b_int32</a> a{1};</div>
<div class="line">    <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__double.html">bsoncxx::types::b_double</a> b{2.0};</div>
<div class="line">    <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__string.html">bsoncxx::types::b_string</a> c{<span class="stringliteral">&quot;three&quot;</span>};</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner =</div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a4bf5ec569109f7c726a0991650faedbc">bsoncxx::builder::basic::make_document</a>(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;a&quot;</span>, a), <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;b&quot;</span>, b), <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;c&quot;</span>, c));</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc = owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;a&quot;</span>].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_int32);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;b&quot;</span>].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_double);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;c&quot;</span>].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_string);</div>
<div class="line"> </div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;a&quot;</span>].get_int32() == a);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;b&quot;</span>].get_double() == b);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;c&quot;</span>].get_string() == c);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-bson-value"></a>
With a BSON Value</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1types_1_1bson__value_1_1value.html">bsoncxx::types::bson_value::value</a> values[]{</div>
<div class="line">        std::int32_t{1},</div>
<div class="line">        2.0,</div>
<div class="line">        <span class="stringliteral">&quot;three&quot;</span>,</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = <a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a4bf5ec569109f7c726a0991650faedbc">bsoncxx::builder::basic::make_document</a>(</div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;a&quot;</span>, values[0]), <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;b&quot;</span>, values[1]), <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;c&quot;</span>, values[2]));</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc = owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;a&quot;</span>].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_int32);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;b&quot;</span>].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_double);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;c&quot;</span>].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_string);</div>
<div class="line"> </div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;a&quot;</span>].get_value() == values[0]);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;b&quot;</span>].get_value() == values[1]);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;c&quot;</span>].get_value() == values[2]);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-sub-document-1"></a>
With a Sub-Document</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a4bf5ec569109f7c726a0991650faedbc">bsoncxx::builder::basic::make_document</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#a1df73c7685e072a4c3ba1fc37ea434c3">make_document</a>(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;v&quot;</span>, <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#a1df73c7685e072a4c3ba1fc37ea434c3">make_document</a>(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;key&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>))));</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> v = owner.view()[<span class="stringliteral">&quot;v&quot;</span>].get_document().value;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v[<span class="stringliteral">&quot;key&quot;</span>].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;value&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-multiple-sub-document-appends"></a>
With Multiple Sub-Document Appends</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line"> </div>
<div class="line">    std::string keys[] = {<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>};</div>
<div class="line">    std::int32_t values[] = {1, 2, 3};</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = <a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a4bf5ec569109f7c726a0991650faedbc">bsoncxx::builder::basic::make_document</a>(</div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;v&quot;</span>, [&amp;](<a class="code hl_class" href="classbsoncxx_1_1builder_1_1basic_1_1sub__document.html">bsoncxx::builder::basic::sub_document</a> doc) {</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; ++i) {</div>
<div class="line">                doc.append(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(keys[i], values[i]));</div>
<div class="line">            }</div>
<div class="line">        }));</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> v = owner.view()[<span class="stringliteral">&quot;v&quot;</span>].get_document().value;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v[<span class="stringliteral">&quot;a&quot;</span>].get_int32().value == 1);</div>
<div class="line">    ASSERT(v[<span class="stringliteral">&quot;b&quot;</span>].get_int32().value == 2);</div>
<div class="line">    ASSERT(v[<span class="stringliteral">&quot;c&quot;</span>].get_int32().value == 3);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-sub-array-1"></a>
With a Sub-Array</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a8fce27d10ddd45a5963044245a61a94e">bsoncxx::builder::basic::make_array</a>;</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a4bf5ec569109f7c726a0991650faedbc">bsoncxx::builder::basic::make_document</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner =</div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#a1df73c7685e072a4c3ba1fc37ea434c3">make_document</a>(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;v&quot;</span>, <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#a1e2b0e89d32a90c60fba8e8e1ba4d5d9">make_array</a>(std::int32_t{1}, std::int64_t{2})));</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> v = owner.view()[<span class="stringliteral">&quot;v&quot;</span>].get_array().value;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v[0].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_int32);</div>
<div class="line">    ASSERT(v[1].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_int64);</div>
<div class="line"> </div>
<div class="line">    ASSERT(v[0].get_int32().value == 1);</div>
<div class="line">    ASSERT(v[1].get_int64().value == 2);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-multiple-sub-array-appends"></a>
With Multiple Sub-Array Appends</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line"> </div>
<div class="line">    std::int32_t values[] = {1, 2, 3};</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = <a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a4bf5ec569109f7c726a0991650faedbc">bsoncxx::builder::basic::make_document</a>(</div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;v&quot;</span>, [&amp;](<a class="code hl_class" href="classbsoncxx_1_1builder_1_1basic_1_1sub__array.html">bsoncxx::builder::basic::sub_array</a> arr) {</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; ++i) {</div>
<div class="line">                arr.append(values[i]);</div>
<div class="line">            }</div>
<div class="line">        }));</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> v = owner.view()[<span class="stringliteral">&quot;v&quot;</span>].get_array().value;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v[0].get_int32().value == 1);</div>
<div class="line">    ASSERT(v[1].get_int32().value == 2);</div>
<div class="line">    ASSERT(v[2].get_int32().value == 3);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="from-raw-bytes"></a>
From Raw Bytes</h2>
<h3><a class="anchor" id="as-a-view"></a>
As a View</h3>
<div class="fragment"><div class="line"><span class="comment">// {&quot;key&quot;: &quot;value&quot;}</span></div>
<div class="line"><span class="keywordtype">void</span> example(<span class="keyword">const</span> std::uint8_t* data, std::size_t length) {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc{data, length};</div>
<div class="line"> </div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;key&quot;</span>].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;value&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="as-a-value"></a>
As a Value</h3>
<div class="fragment"><div class="line"><span class="comment">// {&quot;key&quot;: &quot;value&quot;}</span></div>
<div class="line"><span class="keywordtype">void</span> example(<span class="keyword">const</span> std::uint8_t* data, std::size_t length) {</div>
<div class="line">    <span class="keyword">using </span>deleter_type = bsoncxx::document::value::deleter_type;</div>
<div class="line"> </div>
<div class="line">    std::uint8_t* raw = <span class="keyword">new</span> std::uint8_t[length];</div>
<div class="line">    std::copy_n(data, length, raw);</div>
<div class="line"> </div>
<div class="line">    deleter_type deleter = [](std::uint8_t* data) { <span class="keyword">delete</span>[] data; };</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner{raw, length, deleter};</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc = owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;key&quot;</span>].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;value&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment -->  <h1><a class="anchor" id="create-an-array"></a>
Create an Array</h1>
<h2><a class="anchor" id="from-a-json-string-1"></a>
From a JSON String</h2>
<h3><a class="anchor" id="basic-example-2"></a>
Basic Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = <a class="code hl_function" href="namespacebsoncxx.html#acb4c8f97b3588e04426880ec49e6d9a7">bsoncxx::from_json</a>(R<span class="stringliteral">&quot;(</span></div>
<div class="line"><span class="stringliteral">        [1, 2.0, &quot;three&quot;]</span></div>
<div class="line"><span class="stringliteral">    )&quot;);</span></div>
<div class="line"><span class="stringliteral">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc = owner.view();</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    ASSERT(doc[</span><span class="stringliteral">&quot;0&quot;</span>].get_int32().value == 1);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;1&quot;</span>].get_double().value == 2.0);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;2&quot;</span>].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-extended-json-1"></a>
With Extended JSON</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = <a class="code hl_function" href="namespacebsoncxx.html#acb4c8f97b3588e04426880ec49e6d9a7">bsoncxx::from_json</a>(R<span class="stringliteral">&quot;(</span></div>
<div class="line"><span class="stringliteral">        [</span></div>
<div class="line"><span class="stringliteral">            {&quot;$numberInt&quot;:    &quot;1&quot;},</span></div>
<div class="line"><span class="stringliteral">            {&quot;$numberLong&quot;:   &quot;2&quot;},</span></div>
<div class="line"><span class="stringliteral">            {&quot;$numberDouble&quot;: &quot;3&quot;}</span></div>
<div class="line"><span class="stringliteral">        ]</span></div>
<div class="line"><span class="stringliteral">    )&quot;);</span></div>
<div class="line"><span class="stringliteral">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc = owner.view();</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    ASSERT(doc[</span><span class="stringliteral">&quot;0&quot;</span>].get_int32().value == 1);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;1&quot;</span>].get_int64().value == 2);</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;2&quot;</span>].get_double().value == 3.0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-sub-document-2"></a>
With a Sub-Document</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = <a class="code hl_function" href="namespacebsoncxx.html#acb4c8f97b3588e04426880ec49e6d9a7">bsoncxx::from_json</a>(R<span class="stringliteral">&quot;(</span></div>
<div class="line"><span class="stringliteral">        [</span></div>
<div class="line"><span class="stringliteral">            {&quot;key&quot;: &quot;value&quot;}</span></div>
<div class="line"><span class="stringliteral">        ]</span></div>
<div class="line"><span class="stringliteral">    )&quot;);</span></div>
<div class="line"><span class="stringliteral">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> v = owner.view()[</span><span class="stringliteral">&quot;0&quot;</span>].get_document().value;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v[<span class="stringliteral">&quot;key&quot;</span>].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;value&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-sub-array-2"></a>
With a Sub-Array</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = <a class="code hl_function" href="namespacebsoncxx.html#acb4c8f97b3588e04426880ec49e6d9a7">bsoncxx::from_json</a>(R<span class="stringliteral">&quot;(</span></div>
<div class="line"><span class="stringliteral">        [</span></div>
<div class="line"><span class="stringliteral">            [1, 2]</span></div>
<div class="line"><span class="stringliteral">        ]</span></div>
<div class="line"><span class="stringliteral">    )&quot;);</span></div>
<div class="line"><span class="stringliteral">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> sub = owner.view()[</span><span class="stringliteral">&quot;0&quot;</span>].get_array().value;</div>
<div class="line"> </div>
<div class="line">    ASSERT(sub[0].get_int32().value == 1);</div>
<div class="line">    ASSERT(sub[1].get_int32().value == 2);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-user-defined-literal-1"></a>
With a User-Defined Literal</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacebsoncxx.html">bsoncxx</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> a = R<span class="stringliteral">&quot;([1, 2])&quot;_bson;</span></div>
<div class="line"><span class="stringliteral">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> b = <a class="code hl_function" href="namespacebsoncxx.html#acb4c8f97b3588e04426880ec49e6d9a7">bsoncxx::from_json</a>(R</span><span class="stringliteral">&quot;([1, 2])&quot;);</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    ASSERT(a == b);</span></div>
<div class="line"><span class="stringliteral">}</span></div>
</div><!-- fragment --><h2><a class="anchor" id="using-the-basic-builder-1"></a>
Using the Basic Builder</h2>
<h3><a class="anchor" id="basic-example-3"></a>
Basic Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1builder_1_1basic_1_1array.html">bsoncxx::builder::basic::array</a> builder;</div>
<div class="line">    builder.append(std::int32_t{1}, 2.0, <span class="stringliteral">&quot;three&quot;</span>);</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1value.html">bsoncxx::array::value</a> owner = builder.extract();</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> arr = owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(arr[0].get_int32().value == 1);</div>
<div class="line">    ASSERT(arr[1].get_double().value == 2.0);</div>
<div class="line">    ASSERT(arr[2].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-make_document-1"></a>
With make_document</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1value.html">bsoncxx::array::value</a> owner =</div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a8fce27d10ddd45a5963044245a61a94e">bsoncxx::builder::basic::make_array</a>(std::int32_t{1}, 2.0, <span class="stringliteral">&quot;three&quot;</span>);</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> arr = owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(arr[0].get_int32().value == 1);</div>
<div class="line">    ASSERT(arr[1].get_double().value == 2.0);</div>
<div class="line">    ASSERT(arr[2].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-multiple-appends-1"></a>
With Multiple Appends</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1builder_1_1basic_1_1array.html">bsoncxx::builder::basic::array</a> builder;</div>
<div class="line">    builder.append(std::int32_t{1});</div>
<div class="line">    builder.append(2.0);</div>
<div class="line">    builder.append(<span class="stringliteral">&quot;three&quot;</span>);</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1value.html">bsoncxx::array::value</a> owner = builder.extract();</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> arr = owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(arr[0].get_int32().value == 1);</div>
<div class="line">    ASSERT(arr[1].get_double().value == 2.0);</div>
<div class="line">    ASSERT(arr[2].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="to-create-multiple-documents-1"></a>
To Create Multiple Documents</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1builder_1_1basic_1_1array.html">bsoncxx::builder::basic::array</a> builder;</div>
<div class="line"> </div>
<div class="line">    builder.append(std::int32_t{1});</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1value.html">bsoncxx::array::value</a> a_owner = builder.extract();</div>
<div class="line"> </div>
<div class="line">    builder.clear();</div>
<div class="line"> </div>
<div class="line">    builder.append(std::int64_t{2});</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1value.html">bsoncxx::array::value</a> b_owner = builder.extract();</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> a = a_owner.view();</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> b = b_owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(a[0].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_int32);</div>
<div class="line">    ASSERT(b[0].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_int64);</div>
<div class="line"> </div>
<div class="line">    ASSERT(a[0].get_int32().value == 1);</div>
<div class="line">    ASSERT(b[0].get_int64().value == 2);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-value-type-1"></a>
With a Value Type</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1value.html">bsoncxx::array::value</a> owner =</div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a8fce27d10ddd45a5963044245a61a94e">bsoncxx::builder::basic::make_array</a>(std::int32_t{1}, 2.0, <span class="stringliteral">&quot;three&quot;</span>);</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> arr = owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(arr[0].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_int32);</div>
<div class="line">    ASSERT(arr[1].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_double);</div>
<div class="line">    ASSERT(arr[2].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_string);</div>
<div class="line"> </div>
<div class="line">    ASSERT(arr[0].get_int32().value == 1);</div>
<div class="line">    ASSERT(arr[1].get_double().value == 2.0);</div>
<div class="line">    ASSERT(arr[2].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-bson-type-1"></a>
With a BSON Type</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__int32.html">bsoncxx::types::b_int32</a> a{1};</div>
<div class="line">    <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__double.html">bsoncxx::types::b_double</a> b{2.0};</div>
<div class="line">    <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__string.html">bsoncxx::types::b_string</a> c{<span class="stringliteral">&quot;three&quot;</span>};</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1value.html">bsoncxx::array::value</a> owner = <a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a8fce27d10ddd45a5963044245a61a94e">bsoncxx::builder::basic::make_array</a>(a, b, c);</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> arr = owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(arr[0].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_int32);</div>
<div class="line">    ASSERT(arr[1].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_double);</div>
<div class="line">    ASSERT(arr[2].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_string);</div>
<div class="line"> </div>
<div class="line">    ASSERT(arr[0].get_int32().value == 1);</div>
<div class="line">    ASSERT(arr[1].get_double().value == 2.0);</div>
<div class="line">    ASSERT(arr[2].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-bson-value-1"></a>
With a BSON Value</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1types_1_1bson__value_1_1value.html">bsoncxx::types::bson_value::value</a> values[]{</div>
<div class="line">        std::int32_t{1},</div>
<div class="line">        2.0,</div>
<div class="line">        <span class="stringliteral">&quot;three&quot;</span>,</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1value.html">bsoncxx::array::value</a> owner =</div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a8fce27d10ddd45a5963044245a61a94e">bsoncxx::builder::basic::make_array</a>(values[0], values[1], values[2]);</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> arr = owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(arr[0].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_int32);</div>
<div class="line">    ASSERT(arr[1].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_double);</div>
<div class="line">    ASSERT(arr[2].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_string);</div>
<div class="line"> </div>
<div class="line">    ASSERT(arr[0].get_value() == values[0]);</div>
<div class="line">    ASSERT(arr[1].get_value() == values[1]);</div>
<div class="line">    ASSERT(arr[2].get_value() == values[2]);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-sub-document-3"></a>
With a Sub-Document</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a8fce27d10ddd45a5963044245a61a94e">bsoncxx::builder::basic::make_array</a>;</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a4bf5ec569109f7c726a0991650faedbc">bsoncxx::builder::basic::make_document</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1value.html">bsoncxx::array::value</a> owner = <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#a1e2b0e89d32a90c60fba8e8e1ba4d5d9">make_array</a>(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#a1df73c7685e072a4c3ba1fc37ea434c3">make_document</a>(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;key&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>)));</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> v = owner.view()[0].get_document().value;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v[<span class="stringliteral">&quot;key&quot;</span>].get_string().<a class="code hl_variable" href="namespacebsoncxx_1_1v__noabi_1_1types.html#ae2c8e9e83b3f9394b6d9c56a15d96041">value</a>.compare(<span class="stringliteral">&quot;value&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-multiple-sub-document-appends-1"></a>
With Multiple Sub-Document Appends</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line"> </div>
<div class="line">    std::string keys[] = {<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>};</div>
<div class="line">    std::int32_t values[] = {1, 2, 3};</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1value.html">bsoncxx::array::value</a> owner =</div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a8fce27d10ddd45a5963044245a61a94e">bsoncxx::builder::basic::make_array</a>([&amp;](<a class="code hl_class" href="classbsoncxx_1_1builder_1_1basic_1_1sub__document.html">bsoncxx::builder::basic::sub_document</a> doc) {</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; ++i) {</div>
<div class="line">                doc.append(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(keys[i], values[i]));</div>
<div class="line">            }</div>
<div class="line">        });</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> v = owner.view()[0].get_document().value;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v[<span class="stringliteral">&quot;a&quot;</span>].get_int32().value == 1);</div>
<div class="line">    ASSERT(v[<span class="stringliteral">&quot;b&quot;</span>].get_int32().value == 2);</div>
<div class="line">    ASSERT(v[<span class="stringliteral">&quot;c&quot;</span>].get_int32().value == 3);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-a-sub-array-3"></a>
With a Sub-Array</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a8fce27d10ddd45a5963044245a61a94e">bsoncxx::builder::basic::make_array</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1value.html">bsoncxx::array::value</a> owner = <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#a1e2b0e89d32a90c60fba8e8e1ba4d5d9">make_array</a>(<a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#a1e2b0e89d32a90c60fba8e8e1ba4d5d9">make_array</a>(std::int32_t{1}, std::int64_t{2}));</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> v = owner.view()[0].get_array().value;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v[0].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_int32);</div>
<div class="line">    ASSERT(v[1].<a class="code hl_enumeration" href="namespacebsoncxx_1_1v__noabi.html#aa23b7a9ad54211ca9d5c2ad3f7b3525b">type</a>() == bsoncxx::type::k_int64);</div>
<div class="line"> </div>
<div class="line">    ASSERT(v[0].get_int32().value == 1);</div>
<div class="line">    ASSERT(v[1].get_int64().value == 2);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="with-multiple-sub-array-appends-1"></a>
With Multiple Sub-Array Appends</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    std::int32_t values[] = {1, 2, 3};</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1value.html">bsoncxx::array::value</a> owner =</div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a8fce27d10ddd45a5963044245a61a94e">bsoncxx::builder::basic::make_array</a>([&amp;](<a class="code hl_class" href="classbsoncxx_1_1builder_1_1basic_1_1sub__array.html">bsoncxx::builder::basic::sub_array</a> arr) {</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; ++i) {</div>
<div class="line">                arr.append(values[i]);</div>
<div class="line">            }</div>
<div class="line">        });</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> v = owner.view()[0].get_array().value;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v[0].get_int32().value == 1);</div>
<div class="line">    ASSERT(v[1].get_int32().value == 2);</div>
<div class="line">    ASSERT(v[2].get_int32().value == 3);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="from-raw-bytes-1"></a>
From Raw Bytes</h2>
<h3><a class="anchor" id="as-a-view-1"></a>
As a View</h3>
<div class="fragment"><div class="line"><span class="comment">// [1, 2]</span></div>
<div class="line"><span class="keywordtype">void</span> example(<span class="keyword">const</span> std::uint8_t* data, std::size_t length) {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> arr{data, length};</div>
<div class="line"> </div>
<div class="line">    ASSERT(arr[0].get_int32().value == 1);</div>
<div class="line">    ASSERT(arr[1].get_int32().value == 2);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="as-a-value-1"></a>
As a Value</h3>
<div class="fragment"><div class="line"><span class="comment">// [1, 2]</span></div>
<div class="line"><span class="keywordtype">void</span> example(<span class="keyword">const</span> std::uint8_t* data, std::size_t length) {</div>
<div class="line">    <span class="keyword">using </span>deleter_type = bsoncxx::array::value::deleter_type;</div>
<div class="line"> </div>
<div class="line">    std::uint8_t* raw = <span class="keyword">new</span> std::uint8_t[length];</div>
<div class="line">    std::copy_n(data, length, raw);</div>
<div class="line"> </div>
<div class="line">    deleter_type deleter = [](std::uint8_t* data) { <span class="keyword">delete</span>[] data; };</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1value.html">bsoncxx::array::value</a> owner{raw, length, deleter};</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> arr = owner.view();</div>
<div class="line"> </div>
<div class="line">    ASSERT(arr[0].get_int32().value == 1);</div>
<div class="line">    ASSERT(arr[1].get_int32().value == 2);</div>
<div class="line">}</div>
</div><!-- fragment -->  <h1><a class="anchor" id="access-a-document-element"></a>
Access a Document Element</h1>
<h2><a class="anchor" id="by-iteration"></a>
By Iteration</h2>
<h3><a class="anchor" id="basic-example-4"></a>
Basic Example</h3>
<div class="fragment"><div class="line"><span class="comment">// {&quot;a&quot;: 1, &quot;b&quot;: 2.0, &quot;c&quot;: &quot;three&quot;}</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc) {</div>
<div class="line">    <span class="keywordflow">for</span> (<a class="code hl_class" href="classbsoncxx_1_1document_1_1element.html">bsoncxx::document::element</a> e : doc) {</div>
<div class="line">        <span class="keywordflow">switch</span> (e.type()) {</div>
<div class="line">            <span class="keywordflow">case</span> bsoncxx::type::k_int32:</div>
<div class="line">                ASSERT(e.key().compare(<span class="stringliteral">&quot;a&quot;</span>) == 0);</div>
<div class="line">                ASSERT(e.get_int32().value == 1);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> bsoncxx::type::k_double:</div>
<div class="line">                ASSERT(e.key().compare(<span class="stringliteral">&quot;b&quot;</span>) == 0);</div>
<div class="line">                ASSERT(e.get_double().value == 2.0);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> bsoncxx::type::k_string:</div>
<div class="line">                ASSERT(e.key().compare(<span class="stringliteral">&quot;c&quot;</span>) == 0);</div>
<div class="line">                ASSERT(e.get_string().value.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="using-iterators"></a>
Using Iterators</h3>
<div class="fragment"><div class="line"><span class="comment">// {&quot;a&quot;: 1, &quot;b&quot;: 2}</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc) {</div>
<div class="line">    ASSERT(doc.begin() != doc.end());</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> iter = doc.begin();</div>
<div class="line">    ASSERT(iter == doc.begin());</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_class" href="classbsoncxx_1_1document_1_1element.html">bsoncxx::document::element</a> e = *iter;</div>
<div class="line"> </div>
<div class="line">        ASSERT(e.key().compare(<span class="stringliteral">&quot;a&quot;</span>) == 0);</div>
<div class="line">        ASSERT(e.get_int32().value == 1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ++iter;</div>
<div class="line"> </div>
<div class="line">    ASSERT(iter-&gt;key().compare(<span class="stringliteral">&quot;b&quot;</span>) == 0);</div>
<div class="line">    ASSERT(iter-&gt;get_int32().value == 2);</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">auto</span> iter_copy = iter++;</div>
<div class="line"> </div>
<div class="line">        ASSERT(iter_copy != iter);</div>
<div class="line">        ASSERT(iter_copy-&gt;key().compare(<span class="stringliteral">&quot;b&quot;</span>) == 0);</div>
<div class="line">        ASSERT(iter_copy-&gt;get_int32() == 2);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ASSERT(iter == doc.end());</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="using-algorithms"></a>
Using Algorithms</h3>
<div class="fragment"><div class="line"><span class="comment">// {&quot;a&quot;: 1, &quot;b&quot;: 2.0, &quot;c&quot;: &quot;three&quot;}</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc) {</div>
<div class="line">    ASSERT(std::distance(doc.begin(), doc.end()) == 3);</div>
<div class="line"> </div>
<div class="line">    std::vector&lt;bsoncxx::document::element&gt; elements;</div>
<div class="line"> </div>
<div class="line">    std::copy_if(doc.begin(),</div>
<div class="line">                 doc.end(),</div>
<div class="line">                 std::back_inserter(elements),</div>
<div class="line">                 [](<span class="keyword">const</span> <a class="code hl_class" href="classbsoncxx_1_1document_1_1element.html">bsoncxx::document::element</a>&amp; e) {</div>
<div class="line">                     return e.key().compare(<span class="stringliteral">&quot;a&quot;</span>) == 0 || e.type() == bsoncxx::type::k_string;</div>
<div class="line">                 });</div>
<div class="line"> </div>
<div class="line">    ASSERT(elements.size() == 2u);</div>
<div class="line">    ASSERT(elements[0].key().compare(<span class="stringliteral">&quot;a&quot;</span>) == 0);</div>
<div class="line">    ASSERT(elements[1].key().compare(<span class="stringliteral">&quot;c&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="by-key"></a>
By Key</h2>
<h3><a class="anchor" id="using-find"></a>
Using find()</h3>
<div class="fragment"><div class="line"><span class="comment">// {&quot;a&quot;: 1, &quot;b&quot;: 2}</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc) {</div>
<div class="line">    ASSERT(doc.find(<span class="stringliteral">&quot;a&quot;</span>) == doc.begin());</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">auto</span> iter = doc.find(<span class="stringliteral">&quot;b&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        ASSERT(iter != doc.end());</div>
<div class="line">        ASSERT(iter-&gt;key().compare(<span class="stringliteral">&quot;b&quot;</span>) == 0);</div>
<div class="line">        ASSERT(iter-&gt;get_int32().value == 2);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ASSERT(doc.find(<span class="stringliteral">&quot;x&quot;</span>) == doc.end());</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="using-the-subscript-operator"></a>
Using the Subscript Operator</h3>
<div class="fragment"><div class="line"><span class="comment">// {&quot;a&quot;: 1, &quot;b&quot;: 2}</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc) {</div>
<div class="line">    ASSERT(doc[<span class="stringliteral">&quot;a&quot;</span>]);</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_class" href="classbsoncxx_1_1document_1_1element.html">bsoncxx::document::element</a> e = doc[<span class="stringliteral">&quot;b&quot;</span>];</div>
<div class="line"> </div>
<div class="line">        ASSERT(e.key().compare(<span class="stringliteral">&quot;b&quot;</span>) == 0);</div>
<div class="line">        ASSERT(e.get_int32().value == 2);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ASSERT(!doc[<span class="stringliteral">&quot;c&quot;</span>]);  <span class="comment">// Invalid element.</span></div>
<div class="line">}</div>
</div><!-- fragment -->  <h1><a class="anchor" id="access-an-array-element"></a>
Access an Array Element</h1>
<h2><a class="anchor" id="by-iteration-1"></a>
By Iteration</h2>
<h3><a class="anchor" id="basic-example-5"></a>
Basic Example</h3>
<div class="fragment"><div class="line"><span class="comment">// [1, 2.0, &quot;three&quot;]</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> arr) {</div>
<div class="line">    <span class="keywordflow">for</span> (<a class="code hl_class" href="classbsoncxx_1_1array_1_1element.html">bsoncxx::array::element</a> e : arr) {</div>
<div class="line">        <span class="keywordflow">switch</span> (e.type()) {</div>
<div class="line">            <span class="keywordflow">case</span> bsoncxx::type::k_int32:</div>
<div class="line">                ASSERT(e.key().compare(<span class="stringliteral">&quot;0&quot;</span>) == 0);</div>
<div class="line">                ASSERT(e.get_int32().value == 1);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> bsoncxx::type::k_double:</div>
<div class="line">                ASSERT(e.key().compare(<span class="stringliteral">&quot;1&quot;</span>) == 0);</div>
<div class="line">                ASSERT(e.get_double().value == 2.0);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> bsoncxx::type::k_string:</div>
<div class="line">                ASSERT(e.key().compare(<span class="stringliteral">&quot;2&quot;</span>) == 0);</div>
<div class="line">                ASSERT(e.get_string().value.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="using-iterators-1"></a>
Using Iterators</h3>
<div class="fragment"><div class="line"><span class="comment">// [1, 2]</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> arr) {</div>
<div class="line">    ASSERT(arr.begin() != arr.end());</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> iter = arr.begin();</div>
<div class="line">    ASSERT(iter == arr.begin());</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_class" href="classbsoncxx_1_1array_1_1element.html">bsoncxx::array::element</a> e = *iter;</div>
<div class="line"> </div>
<div class="line">        ASSERT(e.key().compare(<span class="stringliteral">&quot;0&quot;</span>) == 0);</div>
<div class="line">        ASSERT(e.get_int32().value == 1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ++iter;</div>
<div class="line"> </div>
<div class="line">    ASSERT(iter-&gt;key().compare(<span class="stringliteral">&quot;1&quot;</span>) == 0);</div>
<div class="line">    ASSERT(iter-&gt;get_int32().value == 2);</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">auto</span> iter_copy = iter++;</div>
<div class="line"> </div>
<div class="line">        ASSERT(iter_copy != iter);</div>
<div class="line">        ASSERT(iter_copy-&gt;key().compare(<span class="stringliteral">&quot;1&quot;</span>) == 0);</div>
<div class="line">        ASSERT(iter_copy-&gt;get_int32() == 2);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ASSERT(iter == arr.end());</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="using-algorithms-1"></a>
Using Algorithms</h3>
<div class="fragment"><div class="line"><span class="comment">// [1, 2.0, &quot;three&quot;]</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> arr) {</div>
<div class="line">    ASSERT(std::distance(arr.begin(), arr.end()) == 3);</div>
<div class="line"> </div>
<div class="line">    std::vector&lt;bsoncxx::array::element&gt; elements;</div>
<div class="line"> </div>
<div class="line">    std::copy_if(</div>
<div class="line">        arr.begin(), arr.end(), std::back_inserter(elements), [](<span class="keyword">const</span> <a class="code hl_class" href="classbsoncxx_1_1array_1_1element.html">bsoncxx::array::element</a>&amp; e) {</div>
<div class="line">            return e.key().compare(<span class="stringliteral">&quot;0&quot;</span>) == 0 || e.type() == bsoncxx::type::k_string;</div>
<div class="line">        });</div>
<div class="line"> </div>
<div class="line">    ASSERT(elements.size() == 2u);</div>
<div class="line">    ASSERT(elements[0].key().compare(<span class="stringliteral">&quot;0&quot;</span>) == 0);</div>
<div class="line">    ASSERT(elements[1].key().compare(<span class="stringliteral">&quot;2&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="by-key-1"></a>
By Key</h2>
<h3><a class="anchor" id="using-find-1"></a>
Using find()</h3>
<div class="fragment"><div class="line"><span class="comment">// [1, 2]</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> arr) {</div>
<div class="line">    ASSERT(arr.find(0) == arr.begin());</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">auto</span> iter = arr.find(1);</div>
<div class="line"> </div>
<div class="line">        ASSERT(iter != arr.end());</div>
<div class="line">        ASSERT(iter-&gt;key().compare(<span class="stringliteral">&quot;1&quot;</span>) == 0);</div>
<div class="line">        ASSERT(iter-&gt;get_int32().value == 2);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ASSERT(arr.find(2) == arr.end());</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="using-the-subscript-operator-1"></a>
Using the Subscript Operator</h3>
<div class="fragment"><div class="line"><span class="comment">// [1, 2]</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> arr) {</div>
<div class="line">    ASSERT(arr[0]);</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_class" href="classbsoncxx_1_1array_1_1element.html">bsoncxx::array::element</a> e = arr[1];</div>
<div class="line"> </div>
<div class="line">        ASSERT(e.key().compare(<span class="stringliteral">&quot;1&quot;</span>) == 0);</div>
<div class="line">        ASSERT(e.get_int32().value == 2);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ASSERT(!arr[2]);  <span class="comment">// Invalid element.</span></div>
<div class="line">}</div>
</div><!-- fragment -->  <h1><a class="anchor" id="query-an-element"></a>
Query an Element</h1>
<h2><a class="anchor" id="in-a-document"></a>
In a Document</h2>
<h3><a class="anchor" id="for-a-single-type"></a>
For a Single Type</h3>
<div class="fragment"><div class="line"><span class="comment">// {&quot;a&quot;: 1, &quot;b&quot;: 2.0, &quot;c&quot;: &quot;three&quot;}</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1document_1_1element.html">bsoncxx::document::element</a> e) {</div>
<div class="line">    <span class="keywordflow">if</span> (e.type() == bsoncxx::type::k_int32) {</div>
<div class="line">        ASSERT(e.key().compare(<span class="stringliteral">&quot;a&quot;</span>) == 0);</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__int32.html">bsoncxx::types::b_int32</a> v = e.get_int32();</div>
<div class="line"> </div>
<div class="line">        ASSERT(v.type_id == bsoncxx::type::k_int32);</div>
<div class="line">        ASSERT(v.value == 1);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        ASSERT(e.key().compare(<span class="stringliteral">&quot;a&quot;</span>) != 0);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="for-multiple-types"></a>
For Multiple Types</h3>
<div class="fragment"><div class="line"><span class="comment">// {&quot;a&quot;: 1, &quot;b&quot;: 2.0, &quot;c&quot;: &quot;three&quot;}</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1document_1_1element.html">bsoncxx::document::element</a> e) {</div>
<div class="line">    <span class="keywordflow">switch</span> (e.type()) {</div>
<div class="line">        <span class="keywordflow">case</span> bsoncxx::type::k_int32: {</div>
<div class="line">            ASSERT(e.key().compare(<span class="stringliteral">&quot;a&quot;</span>) == 0);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__int32.html">bsoncxx::types::b_int32</a> v = e.get_int32();</div>
<div class="line"> </div>
<div class="line">            ASSERT(v.type_id == bsoncxx::type::k_int32);</div>
<div class="line">            ASSERT(v.value == 1);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">case</span> bsoncxx::type::k_double: {</div>
<div class="line">            ASSERT(e.key().compare(<span class="stringliteral">&quot;b&quot;</span>) == 0);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__double.html">bsoncxx::types::b_double</a> v = e.get_double();</div>
<div class="line"> </div>
<div class="line">            ASSERT(v.type_id == bsoncxx::type::k_double);</div>
<div class="line">            ASSERT(v.value == 2.0);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">case</span> bsoncxx::type::k_string: {</div>
<div class="line">            ASSERT(e.key().compare(<span class="stringliteral">&quot;c&quot;</span>) == 0);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__string.html">bsoncxx::types::b_string</a> v = e.get_string();</div>
<div class="line"> </div>
<div class="line">            ASSERT(v.type_id == bsoncxx::type::k_string);</div>
<div class="line">            ASSERT(v.value.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="in-an-array"></a>
In an Array</h2>
<h3><a class="anchor" id="for-single-type"></a>
For Single Type</h3>
<div class="fragment"><div class="line"><span class="comment">// [1, 2.0, &quot;three&quot;]</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1array_1_1element.html">bsoncxx::array::element</a> e) {</div>
<div class="line">    <span class="keywordflow">if</span> (e.type() == bsoncxx::type::k_int32) {</div>
<div class="line">        ASSERT(e.key().compare(<span class="stringliteral">&quot;0&quot;</span>) == 0);</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__int32.html">bsoncxx::types::b_int32</a> v = e.get_int32();</div>
<div class="line"> </div>
<div class="line">        ASSERT(v.type_id == bsoncxx::type::k_int32);</div>
<div class="line">        ASSERT(v.value == 1);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        ASSERT(e.key().compare(<span class="stringliteral">&quot;0&quot;</span>) != 0);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="for-multiple-types-1"></a>
For Multiple Types</h3>
<div class="fragment"><div class="line"><span class="comment">// [1, 2.0, &quot;three&quot;]</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1array_1_1element.html">bsoncxx::array::element</a> e) {</div>
<div class="line">    <span class="keywordflow">switch</span> (e.type()) {</div>
<div class="line">        <span class="keywordflow">case</span> bsoncxx::type::k_int32: {</div>
<div class="line">            ASSERT(e.key().compare(<span class="stringliteral">&quot;0&quot;</span>) == 0);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__int32.html">bsoncxx::types::b_int32</a> v = e.get_int32();</div>
<div class="line"> </div>
<div class="line">            ASSERT(v.type_id == bsoncxx::type::k_int32);</div>
<div class="line">            ASSERT(v.value == 1);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">case</span> bsoncxx::type::k_double: {</div>
<div class="line">            ASSERT(e.key().compare(<span class="stringliteral">&quot;1&quot;</span>) == 0);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__double.html">bsoncxx::types::b_double</a> v = e.get_double();</div>
<div class="line"> </div>
<div class="line">            ASSERT(v.type_id == bsoncxx::type::k_double);</div>
<div class="line">            ASSERT(v.value == 2.0);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">case</span> bsoncxx::type::k_string: {</div>
<div class="line">            ASSERT(e.key().compare(<span class="stringliteral">&quot;2&quot;</span>) == 0);</div>
<div class="line"> </div>
<div class="line">            <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__string.html">bsoncxx::types::b_string</a> v = e.get_string();</div>
<div class="line"> </div>
<div class="line">            ASSERT(v.type_id == bsoncxx::type::k_string);</div>
<div class="line">            ASSERT(v.value.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="comparison"></a>
Comparison</h2>
<h3><a class="anchor" id="by-type"></a>
By Type</h3>
<div class="fragment"><div class="line"><span class="comment">// {&quot;a&quot;: {&quot;$numberInt&quot;: &quot;1&quot;}, &quot;b&quot;: {&quot;$numberLong&quot;: &quot;2&quot;}}</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1document_1_1element.html">bsoncxx::document::element</a> e) {</div>
<div class="line">    std::int32_t a{1};</div>
<div class="line">    std::int64_t b{2};</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (e.type() == bsoncxx::type::k_int32) {</div>
<div class="line">        ASSERT(e.key().compare(<span class="stringliteral">&quot;a&quot;</span>) == 0);</div>
<div class="line">        ASSERT(e.get_int32().value == a);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e.type() == bsoncxx::type::k_int64) {</div>
<div class="line">        ASSERT(e.key().compare(<span class="stringliteral">&quot;b&quot;</span>) == 0);</div>
<div class="line">        ASSERT(e.get_int64().value == b);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="by-bson-value"></a>
By BSON Value</h3>
<div class="fragment"><div class="line"><span class="comment">// {&quot;a&quot;: {&quot;$numberInt&quot;: &quot;1&quot;}, &quot;b&quot;: {&quot;$numberLong&quot;: &quot;2&quot;}}</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1document_1_1element.html">bsoncxx::document::element</a> e) {</div>
<div class="line">    <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__int32.html">bsoncxx::types::b_int32</a> a{1};</div>
<div class="line">    <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__int64.html">bsoncxx::types::b_int64</a> b{2};</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (e.get_value() == a) {</div>
<div class="line">        ASSERT(e.key().compare(<span class="stringliteral">&quot;a&quot;</span>) == 0);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e.get_value() == b) {</div>
<div class="line">        ASSERT(e.key().compare(<span class="stringliteral">&quot;b&quot;</span>) == 0);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1types_1_1bson__value_1_1view.html">bsoncxx::types::bson_value::view</a> va{a};</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1types_1_1bson__value_1_1view.html">bsoncxx::types::bson_value::view</a> vb{b};</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (e == va) {</div>
<div class="line">        ASSERT(e.key().compare(<span class="stringliteral">&quot;a&quot;</span>) == 0);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e == vb) {</div>
<div class="line">        ASSERT(e.key().compare(<span class="stringliteral">&quot;b&quot;</span>) == 0);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->  <h1><a class="anchor" id="obtain-a-bson-value"></a>
Obtain a BSON Value</h1>
<h2><a class="anchor" id="from-a-bson-type"></a>
From a BSON Type</h2>
<h3><a class="anchor" id="as-a-view-2"></a>
As a View</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span>view_type = <a class="code hl_class" href="classbsoncxx_1_1types_1_1bson__value_1_1view.html">bsoncxx::types::bson_value::view</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__int32.html">bsoncxx::types::b_int32</a> v0{1};</div>
<div class="line">    <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__double.html">bsoncxx::types::b_double</a> v1{2.0};</div>
<div class="line">    <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__string.html">bsoncxx::types::b_string</a> v2{<span class="stringliteral">&quot;three&quot;</span>};</div>
<div class="line"> </div>
<div class="line">    view_type v;</div>
<div class="line">    ASSERT(v.type() == bsoncxx::type::k_null);</div>
<div class="line">    ASSERT(v.get_null() == <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__null.html">bsoncxx::types::b_null</a>{});</div>
<div class="line"> </div>
<div class="line">    v = view_type(v0);</div>
<div class="line">    ASSERT(v.type() == v0.type_id);</div>
<div class="line">    ASSERT(v.get_int32() == v0);</div>
<div class="line"> </div>
<div class="line">    v = view_type(v1);</div>
<div class="line">    ASSERT(v.type() == v1.type_id);</div>
<div class="line">    ASSERT(v.get_double() == v1);</div>
<div class="line"> </div>
<div class="line">    v = view_type(v2);</div>
<div class="line">    ASSERT(v.type() == v2.type_id);</div>
<div class="line">    ASSERT(v.get_string() == v2);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="as-a-value-2"></a>
As a Value</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1types_1_1bson__value_1_1value.html">bsoncxx::types::bson_value::value</a> v = <span class="keyword">nullptr</span>;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v.view().type() == bsoncxx::type::k_null);</div>
<div class="line">    ASSERT(v.view().get_null() == <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__null.html">bsoncxx::types::b_null</a>{});</div>
<div class="line"> </div>
<div class="line">    v = <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__int32.html">bsoncxx::types::b_int32</a>{1};</div>
<div class="line">    ASSERT(v.view().type() == bsoncxx::type::k_int32);</div>
<div class="line">    ASSERT(v.view().get_int32().value == 1);</div>
<div class="line"> </div>
<div class="line">    v = <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__double.html">bsoncxx::types::b_double</a>{2.0};</div>
<div class="line">    ASSERT(v.view().type() == bsoncxx::type::k_double);</div>
<div class="line">    ASSERT(v.view().get_double().value == 2.0);</div>
<div class="line"> </div>
<div class="line">    v = <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__string.html">bsoncxx::types::b_string</a>{<span class="stringliteral">&quot;three&quot;</span>};</div>
<div class="line">    ASSERT(v.view().type() == bsoncxx::type::k_string);</div>
<div class="line">    ASSERT(v.view().get_string().value.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="from-a-document-element"></a>
From a Document Element</h2>
<h3><a class="anchor" id="as-a-view-3"></a>
As a View</h3>
<div class="fragment"><div class="line"><span class="comment">// {&quot;a&quot;: 1, &quot;b&quot;: 2.0, &quot;c&quot;: &quot;three&quot;}</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1document_1_1element.html">bsoncxx::document::element</a> e) {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1types_1_1bson__value_1_1view.html">bsoncxx::types::bson_value::view</a> v = e.get_value();</div>
<div class="line">    ASSERT(v.type() == e.type());</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span> (v.type()) {</div>
<div class="line">        <span class="keywordflow">case</span> bsoncxx::type::k_int32:</div>
<div class="line">            ASSERT(e.key().compare(<span class="stringliteral">&quot;a&quot;</span>) == 0);</div>
<div class="line">            ASSERT(v.get_int32() == e.get_int32());</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> bsoncxx::type::k_double:</div>
<div class="line">            ASSERT(e.key().compare(<span class="stringliteral">&quot;b&quot;</span>) == 0);</div>
<div class="line">            ASSERT(v.get_double() == e.get_double());</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> bsoncxx::type::k_string:</div>
<div class="line">            ASSERT(e.key().compare(<span class="stringliteral">&quot;c&quot;</span>) == 0);</div>
<div class="line">            ASSERT(v.get_string() == e.get_string());</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="as-a-value-3"></a>
As a Value</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1types_1_1bson__value_1_1value.html">bsoncxx::types::bson_value::value</a> v = <span class="keyword">nullptr</span>;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v.view().type() == bsoncxx::type::k_null);</div>
<div class="line">    ASSERT(v.view().get_null() == <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__null.html">bsoncxx::types::b_null</a>{});</div>
<div class="line"> </div>
<div class="line">    v = <a class="code hl_function" href="namespacebsoncxx.html#acb4c8f97b3588e04426880ec49e6d9a7">bsoncxx::from_json</a>(R<span class="stringliteral">&quot;({&quot;v&quot;: {&quot;key&quot;: &quot;value&quot;}})&quot;)  </span><span class="comment">// Temporary object.</span></div>
<div class="line">            [<span class="stringliteral">&quot;v&quot;</span>]</div>
<div class="line">                .get_owning_value();  <span class="comment">// Copy: no dangling.</span></div>
<div class="line"> </div>
<div class="line">    ASSERT(v.view().type() == bsoncxx::type::k_document);</div>
<div class="line"> </div>
<div class="line">    v = v.view().get_document().value[<span class="stringliteral">&quot;key&quot;</span>].get_string();  <span class="comment">// Copy: no dangling.</span></div>
<div class="line"> </div>
<div class="line">    ASSERT(v.view().type() == bsoncxx::type::k_string);</div>
<div class="line">    ASSERT(v.view().get_string().value.compare(<span class="stringliteral">&quot;value&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="from-an-array-element"></a>
From an Array Element</h2>
<h3><a class="anchor" id="as-a-view-4"></a>
As a View</h3>
<div class="fragment"><div class="line"><span class="comment">// [1, 2.0, &quot;three&quot;]</span></div>
<div class="line"><span class="keywordtype">void</span> example(<a class="code hl_class" href="classbsoncxx_1_1array_1_1element.html">bsoncxx::array::element</a> e) {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1types_1_1bson__value_1_1view.html">bsoncxx::types::bson_value::view</a> v = e.get_value();</div>
<div class="line">    ASSERT(v.type() == e.type());</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span> (v.type()) {</div>
<div class="line">        <span class="keywordflow">case</span> bsoncxx::type::k_int32:</div>
<div class="line">            ASSERT(e.key().compare(<span class="stringliteral">&quot;0&quot;</span>) == 0);</div>
<div class="line">            ASSERT(v.get_int32() == e.get_int32());</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> bsoncxx::type::k_double:</div>
<div class="line">            ASSERT(e.key().compare(<span class="stringliteral">&quot;1&quot;</span>) == 0);</div>
<div class="line">            ASSERT(v.get_double() == e.get_double());</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> bsoncxx::type::k_string:</div>
<div class="line">            ASSERT(e.key().compare(<span class="stringliteral">&quot;2&quot;</span>) == 0);</div>
<div class="line">            ASSERT(v.get_string() == e.get_string());</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="as-a-value-4"></a>
As a Value</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1types_1_1bson__value_1_1value.html">bsoncxx::types::bson_value::value</a> v = <span class="keyword">nullptr</span>;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v.view().type() == bsoncxx::type::k_null);</div>
<div class="line">    ASSERT(v.view().get_null() == <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__null.html">bsoncxx::types::b_null</a>{});</div>
<div class="line"> </div>
<div class="line">    v = <a class="code hl_function" href="namespacebsoncxx.html#acb4c8f97b3588e04426880ec49e6d9a7">bsoncxx::from_json</a>(R<span class="stringliteral">&quot;({&quot;v&quot;: [&quot;value&quot;]})&quot;)  </span><span class="comment">// Temporary object.</span></div>
<div class="line">            [<span class="stringliteral">&quot;v&quot;</span>]</div>
<div class="line">                .get_owning_value();  <span class="comment">// Copy: no dangling.</span></div>
<div class="line"> </div>
<div class="line">    ASSERT(v.view().type() == bsoncxx::type::k_array);</div>
<div class="line"> </div>
<div class="line">    v = v.view().get_array().value[0].get_string();  <span class="comment">// Copy: no dangling.</span></div>
<div class="line"> </div>
<div class="line">    ASSERT(v.view().type() == bsoncxx::type::k_string);</div>
<div class="line">    ASSERT(v.view().get_string().value.compare(<span class="stringliteral">&quot;value&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="from-a-value-type"></a>
From a Value Type</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1types_1_1bson__value_1_1value.html">bsoncxx::types::bson_value::value</a> v = <span class="keyword">nullptr</span>;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v.view().type() == bsoncxx::type::k_null);</div>
<div class="line">    ASSERT(v.view().get_null() == <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__null.html">bsoncxx::types::b_null</a>{});</div>
<div class="line"> </div>
<div class="line">    v = std::int32_t{1};</div>
<div class="line"> </div>
<div class="line">    ASSERT(v.view().type() == bsoncxx::type::k_int32);</div>
<div class="line">    ASSERT(v.view().get_int32().value == 1);</div>
<div class="line"> </div>
<div class="line">    v = 2.0;</div>
<div class="line"> </div>
<div class="line">    ASSERT(v.view().type() == bsoncxx::type::k_double);</div>
<div class="line">    ASSERT(v.view().get_double().value == 2.0);</div>
<div class="line"> </div>
<div class="line">    v = std::string(<span class="stringliteral">&quot;three&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    ASSERT(v.view().type() == bsoncxx::type::k_string);</div>
<div class="line">    ASSERT(v.view().get_string().value.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="with-make_value"></a>
With make_value</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span>value_type = <a class="code hl_class" href="classbsoncxx_1_1types_1_1bson__value_1_1value.html">bsoncxx::types::bson_value::value</a>;</div>
<div class="line">    <span class="keyword">using </span>view_type = <a class="code hl_class" href="classbsoncxx_1_1types_1_1bson__value_1_1view.html">bsoncxx::types::bson_value::view</a>;</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        value_type owner = <a class="code hl_function" href="namespacebsoncxx_1_1types_1_1bson__value.html#a31643a14730d29bb4db1be78078f9db8">bsoncxx::types::bson_value::make_value</a>(1);</div>
<div class="line">        view_type v = owner.view();</div>
<div class="line"> </div>
<div class="line">        ASSERT(v.type() == bsoncxx::type::k_int32);</div>
<div class="line">        ASSERT(v.get_int32().value == 1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        value_type owner = <a class="code hl_function" href="namespacebsoncxx_1_1types_1_1bson__value.html#a31643a14730d29bb4db1be78078f9db8">bsoncxx::types::bson_value::make_value</a>(<a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__int64.html">bsoncxx::types::b_int64</a>{2});</div>
<div class="line">        view_type v = owner.<a class="code hl_function" href="classbsoncxx_1_1v__noabi_1_1types_1_1bson__value_1_1value.html#a4e51b0235ec73b44fa925e03dfe2d96a">view</a>();</div>
<div class="line"> </div>
<div class="line">        ASSERT(v.type() == bsoncxx::type::k_int64);</div>
<div class="line">        ASSERT(v.get_int64().value == 2);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        value_type owner = <a class="code hl_function" href="namespacebsoncxx_1_1types_1_1bson__value.html#a31643a14730d29bb4db1be78078f9db8">bsoncxx::types::bson_value::make_value</a>(std::string(<span class="stringliteral">&quot;three&quot;</span>));</div>
<div class="line">        view_type v = owner.view();</div>
<div class="line"> </div>
<div class="line">        ASSERT(v.type() == bsoncxx::type::k_string);</div>
<div class="line">        ASSERT(v.get_string().value.compare(<span class="stringliteral">&quot;three&quot;</span>) == 0);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->  <h1><a class="anchor" id="convert-to-a-json-string"></a>
Convert to a JSON String</h1>
<h2><a class="anchor" id="from-a-document"></a>
From a Document</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_enumeration" href="namespacebsoncxx.html#abf4510425603ae6dcced22378f24f3aa">bsoncxx::ExtendedJsonMode</a>;</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#adf80191a0f36b90812a4929c7c5f6746">bsoncxx::builder::basic::kvp</a>;</div>
<div class="line"> </div>
<div class="line">    std::uint8_t data[]{<span class="stringliteral">&quot;three&quot;</span>};                                   <span class="comment">// Base64: dGhyZWU=</span></div>
<div class="line">    <span class="keyword">auto</span> data_len = <span class="keyword">static_cast&lt;</span>std::uint32_t<span class="keyword">&gt;</span>(<span class="keyword">sizeof</span>(data) - 1u);  <span class="comment">// Exclude null terminator.</span></div>
<div class="line">    <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__binary.html">bsoncxx::types::b_binary</a> binary{bsoncxx::binary_sub_type::k_binary, data_len, data};</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1value.html">bsoncxx::document::value</a> owner = <a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a4bf5ec569109f7c726a0991650faedbc">bsoncxx::builder::basic::make_document</a>(</div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;a&quot;</span>, std::int32_t{1}),  <span class="comment">// &quot;$numberInt&quot;: &quot;1&quot;</span></div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;b&quot;</span>, std::int64_t{2}),  <span class="comment">// &quot;$numberLong&quot;: &quot;2&quot;</span></div>
<div class="line">        <a class="code hl_function" href="namespacebsoncxx_1_1v__noabi_1_1builder_1_1basic.html#ae71fee431e7f778bc80d2cf7ee519b56">kvp</a>(<span class="stringliteral">&quot;c&quot;</span>, binary)            <span class="comment">// &quot;$binary&quot;: { &quot;$base64&quot;: &quot;dGhyZWU=&quot;, &quot;subType&quot;: 00 }</span></div>
<div class="line">    );</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> doc = owner.view();</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Canonical Extended JSON:</span></div>
<div class="line">        <span class="comment">// {</span></div>
<div class="line">        <span class="comment">//     &quot;a&quot;: { &quot;$numberInt&quot;: &quot;1&quot; },</span></div>
<div class="line">        <span class="comment">//     &quot;b&quot;: { &quot;$numberLong&quot;: &quot;2&quot; },</span></div>
<div class="line">        <span class="comment">//     &quot;c&quot;: {</span></div>
<div class="line">        <span class="comment">//         &quot;$binary&quot;: {</span></div>
<div class="line">        <span class="comment">//             &quot;base64&quot;: &quot;dGhyZWU=&quot;,</span></div>
<div class="line">        <span class="comment">//             &quot;subType&quot;: &quot;00&quot;</span></div>
<div class="line">        <span class="comment">//         }</span></div>
<div class="line">        <span class="comment">//     }</span></div>
<div class="line">        <span class="comment">// }</span></div>
<div class="line">        std::string json = <a class="code hl_function" href="namespacebsoncxx.html#a9131f500c092219ac1f9593ec763b5bf">bsoncxx::to_json</a>(doc, ExtendedJsonMode::k_canonical);</div>
<div class="line">        ASSERT(</div>
<div class="line">            json ==</div>
<div class="line">            R<span class="stringliteral">&quot;({ &quot;a&quot; : { &quot;$numberInt&quot; : &quot;1&quot; }, &quot;b&quot; : { &quot;$numberLong&quot; : &quot;2&quot; }, &quot;c&quot; : { &quot;$binary&quot; : { &quot;base64&quot; : &quot;dGhyZWU=&quot;, &quot;subType&quot; : &quot;00&quot; } } })&quot;);</span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    {</span></div>
<div class="line"><span class="stringliteral">        </span><span class="comment">// Relaxed Extended JSON</span></div>
<div class="line">        <span class="comment">// {</span></div>
<div class="line">        <span class="comment">//     &quot;a&quot;: 1,</span></div>
<div class="line">        <span class="comment">//     &quot;b&quot;: 2,</span></div>
<div class="line">        <span class="comment">//     &quot;c&quot;: {</span></div>
<div class="line">        <span class="comment">//         &quot;$binary&quot;: {</span></div>
<div class="line">        <span class="comment">//             &quot;base64&quot;: &quot;dGhyZWU=&quot;,</span></div>
<div class="line">        <span class="comment">//             &quot;subType&quot;: &quot;00&quot;</span></div>
<div class="line">        <span class="comment">//         }</span></div>
<div class="line">        <span class="comment">//     }</span></div>
<div class="line">        <span class="comment">// }</span></div>
<div class="line">        std::string json = <a class="code hl_function" href="namespacebsoncxx.html#a9131f500c092219ac1f9593ec763b5bf">bsoncxx::to_json</a>(doc, ExtendedJsonMode::k_relaxed);</div>
<div class="line">        ASSERT(</div>
<div class="line">            json ==</div>
<div class="line">            R<span class="stringliteral">&quot;({ &quot;a&quot; : 1, &quot;b&quot; : 2, &quot;c&quot; : { &quot;$binary&quot; : { &quot;base64&quot; : &quot;dGhyZWU=&quot;, &quot;subType&quot; : &quot;00&quot; } } })&quot;);</span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    {</span></div>
<div class="line"><span class="stringliteral">        </span><span class="comment">// Legacy Extended JSON</span></div>
<div class="line">        <span class="comment">// {</span></div>
<div class="line">        <span class="comment">//     &quot;a&quot;: 1,</span></div>
<div class="line">        <span class="comment">//     &quot;b&quot;: 2,</span></div>
<div class="line">        <span class="comment">//     &quot;c&quot;: {</span></div>
<div class="line">        <span class="comment">//         &quot;$binary&quot;: &quot;dGhyZWU=&quot;,</span></div>
<div class="line">        <span class="comment">//         &quot;$type&quot;: &quot;00&quot;</span></div>
<div class="line">        <span class="comment">//     }</span></div>
<div class="line">        <span class="comment">// }</span></div>
<div class="line">        std::string json = <a class="code hl_function" href="namespacebsoncxx.html#a9131f500c092219ac1f9593ec763b5bf">bsoncxx::to_json</a>(doc);</div>
<div class="line">        ASSERT(json == R<span class="stringliteral">&quot;({ &quot;a&quot; : 1, &quot;b&quot; : 2, &quot;c&quot; : { &quot;$binary&quot; : &quot;dGhyZWU=&quot;, &quot;$type&quot; : &quot;00&quot; } })&quot;);</span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    {</span></div>
<div class="line"><span class="stringliteral">        std::string a = <a class="code hl_function" href="namespacebsoncxx.html#a9131f500c092219ac1f9593ec763b5bf">bsoncxx::to_json</a>(doc);</span></div>
<div class="line"><span class="stringliteral">        std::string b = <a class="code hl_function" href="namespacebsoncxx.html#a9131f500c092219ac1f9593ec763b5bf">bsoncxx::to_json</a>(doc, ExtendedJsonMode::k_legacy);</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        ASSERT(a == b);</span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral">}</span></div>
</div><!-- fragment --><h2><a class="anchor" id="from-an-array"></a>
From an Array</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> example() {</div>
<div class="line">    <span class="keyword">using </span><a class="code hl_enumeration" href="namespacebsoncxx.html#abf4510425603ae6dcced22378f24f3aa">bsoncxx::ExtendedJsonMode</a>;</div>
<div class="line"> </div>
<div class="line">    std::uint8_t data[]{<span class="stringliteral">&quot;three&quot;</span>};  <span class="comment">// Base64: dGhyZWU=</span></div>
<div class="line">    std::uint32_t data_len{5u};    <span class="comment">// Exclude null terminator.</span></div>
<div class="line">    <a class="code hl_struct" href="structbsoncxx_1_1types_1_1b__binary.html">bsoncxx::types::b_binary</a> binary{bsoncxx::binary_sub_type::k_binary, data_len, data};</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1value.html">bsoncxx::array::value</a> owner = <a class="code hl_function" href="namespacebsoncxx_1_1builder_1_1basic.html#a8fce27d10ddd45a5963044245a61a94e">bsoncxx::builder::basic::make_array</a>(</div>
<div class="line">        std::int32_t{1},  <span class="comment">// &quot;$numberInt&quot;: &quot;1&quot;</span></div>
<div class="line">        std::int64_t{2},  <span class="comment">// &quot;$numberLong&quot;: &quot;2&quot;</span></div>
<div class="line">        binary            <span class="comment">// &quot;$binary&quot;: { &quot;$base64&quot;: &quot;dGhyZWU=&quot;, &quot;subType&quot;: 00 }</span></div>
<div class="line">    );</div>
<div class="line">    <a class="code hl_class" href="classbsoncxx_1_1array_1_1view.html">bsoncxx::array::view</a> arr = owner.view();</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Canonical Extended JSON:</span></div>
<div class="line">        <span class="comment">// [</span></div>
<div class="line">        <span class="comment">//     { &quot;$numberInt&quot;: &quot;1&quot; },</span></div>
<div class="line">        <span class="comment">//     { &quot;$numberLong&quot;: &quot;2&quot; },</span></div>
<div class="line">        <span class="comment">//     {</span></div>
<div class="line">        <span class="comment">//         &quot;$binary&quot;: {</span></div>
<div class="line">        <span class="comment">//             &quot;base64&quot;: &quot;dGhyZWU=&quot;,</span></div>
<div class="line">        <span class="comment">//             &quot;subType&quot;: &quot;00&quot;</span></div>
<div class="line">        <span class="comment">//         }</span></div>
<div class="line">        <span class="comment">//     }</span></div>
<div class="line">        <span class="comment">// ]</span></div>
<div class="line">        std::string json = <a class="code hl_function" href="namespacebsoncxx.html#a9131f500c092219ac1f9593ec763b5bf">bsoncxx::to_json</a>(arr, ExtendedJsonMode::k_canonical);</div>
<div class="line">        ASSERT(</div>
<div class="line">            json ==</div>
<div class="line">            R<span class="stringliteral">&quot;([ { &quot;$numberInt&quot; : &quot;1&quot; }, { &quot;$numberLong&quot; : &quot;2&quot; }, { &quot;$binary&quot; : { &quot;base64&quot; : &quot;dGhyZWU=&quot;, &quot;subType&quot; : &quot;00&quot; } } ])&quot;);</span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    {</span></div>
<div class="line"><span class="stringliteral">        </span><span class="comment">// Relaxed Extended JSON</span></div>
<div class="line">        <span class="comment">// [</span></div>
<div class="line">        <span class="comment">//     1,</span></div>
<div class="line">        <span class="comment">//     2,</span></div>
<div class="line">        <span class="comment">//     {</span></div>
<div class="line">        <span class="comment">//         &quot;$binary&quot;: {</span></div>
<div class="line">        <span class="comment">//             &quot;base64&quot;: &quot;dGhyZWU=&quot;,</span></div>
<div class="line">        <span class="comment">//             &quot;subType&quot;: &quot;00&quot;</span></div>
<div class="line">        <span class="comment">//         }</span></div>
<div class="line">        <span class="comment">//     }</span></div>
<div class="line">        <span class="comment">// ]</span></div>
<div class="line">        std::string json = <a class="code hl_function" href="namespacebsoncxx.html#a9131f500c092219ac1f9593ec763b5bf">bsoncxx::to_json</a>(arr, ExtendedJsonMode::k_relaxed);</div>
<div class="line">        ASSERT(json == R<span class="stringliteral">&quot;([ 1, 2, { &quot;$binary&quot; : { &quot;base64&quot; : &quot;dGhyZWU=&quot;, &quot;subType&quot; : &quot;00&quot; } } ])&quot;);</span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    {</span></div>
<div class="line"><span class="stringliteral">        </span><span class="comment">// Legacy Extended JSON</span></div>
<div class="line">        <span class="comment">// [</span></div>
<div class="line">        <span class="comment">//     1,</span></div>
<div class="line">        <span class="comment">//     2,</span></div>
<div class="line">        <span class="comment">//     {</span></div>
<div class="line">        <span class="comment">//         &quot;$binary&quot;: &quot;dGhyZWU=&quot;,</span></div>
<div class="line">        <span class="comment">//         &quot;$type&quot;: &quot;00&quot;</span></div>
<div class="line">        <span class="comment">//     }</span></div>
<div class="line">        <span class="comment">// ]</span></div>
<div class="line">        std::string json = <a class="code hl_function" href="namespacebsoncxx.html#a9131f500c092219ac1f9593ec763b5bf">bsoncxx::to_json</a>(arr);</div>
<div class="line">        ASSERT(json == R<span class="stringliteral">&quot;([ 1, 2, { &quot;$binary&quot; : &quot;dGhyZWU=&quot;, &quot;$type&quot; : &quot;00&quot; } ])&quot;);</span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">    {</span></div>
<div class="line"><span class="stringliteral">        std::string a = <a class="code hl_function" href="namespacebsoncxx.html#a9131f500c092219ac1f9593ec763b5bf">bsoncxx::to_json</a>(arr);</span></div>
<div class="line"><span class="stringliteral">        std::string b = <a class="code hl_function" href="namespacebsoncxx.html#a9131f500c092219ac1f9593ec763b5bf">bsoncxx::to_json</a>(arr, ExtendedJsonMode::k_legacy);</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral">        ASSERT(a == b);</span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral">}</span></div>
</div><!-- fragment -->   </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>

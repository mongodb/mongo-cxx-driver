<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>MongoDB C++ Driver: mongocxx::pool Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MongoDB C++ Driver
   &#160;<span id="projectnumber">mongocxx-3.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemongocxx.html">mongocxx</a></li><li class="navelem"><a class="el" href="classmongocxx_1_1pool.html">pool</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmongocxx_1_1pool-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mongocxx::pool Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A pool of <code>client</code> objects associated with a MongoDB deployment.  
 <a href="classmongocxx_1_1pool.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="pool_8hpp_source.html">pool.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a7f28669fe4d5b34c5e9122b128b414cb"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1pool.html#a7f28669fe4d5b34c5e9122b128b414cb">entry</a> = std::unique_ptr&lt; <a class="el" href="classmongocxx_1_1client.html">client</a>, std::function&lt; void(<a class="el" href="classmongocxx_1_1client.html">client</a> *)&gt;&gt;</td></tr>
<tr class="memdesc:a7f28669fe4d5b34c5e9122b128b414cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">An entry is a handle on a <code>client</code> object acquired via the pool.  <a href="#a7f28669fe4d5b34c5e9122b128b414cb">More...</a><br /></td></tr>
<tr class="separator:a7f28669fe4d5b34c5e9122b128b414cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa3d9400392db241478e93c9939f5f3da"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1pool.html#aa3d9400392db241478e93c9939f5f3da">pool</a> (const <a class="el" href="classmongocxx_1_1uri.html">uri</a> &amp;mongodb_uri=<a class="el" href="classmongocxx_1_1uri.html">mongocxx::uri</a>(), const <a class="el" href="classmongocxx_1_1options_1_1pool.html">options::pool</a> &amp;options=<a class="el" href="classmongocxx_1_1options_1_1pool.html">options::pool</a>())</td></tr>
<tr class="memdesc:aa3d9400392db241478e93c9939f5f3da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a pool associated with a connection string.  <a href="#aa3d9400392db241478e93c9939f5f3da">More...</a><br /></td></tr>
<tr class="separator:aa3d9400392db241478e93c9939f5f3da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aeb1d9a619a9f54e7da0651170eedc6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8aeb1d9a619a9f54e7da0651170eedc6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1pool.html#a8aeb1d9a619a9f54e7da0651170eedc6">~pool</a> ()</td></tr>
<tr class="memdesc:a8aeb1d9a619a9f54e7da0651170eedc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys a pool. <br /></td></tr>
<tr class="separator:a8aeb1d9a619a9f54e7da0651170eedc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab23ebaf96c1304842e10aaedb0b52f4e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongocxx_1_1pool.html#a7f28669fe4d5b34c5e9122b128b414cb">entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1pool.html#ab23ebaf96c1304842e10aaedb0b52f4e">acquire</a> ()</td></tr>
<tr class="memdesc:ab23ebaf96c1304842e10aaedb0b52f4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquires a client from the pool.  <a href="#ab23ebaf96c1304842e10aaedb0b52f4e">More...</a><br /></td></tr>
<tr class="separator:ab23ebaf96c1304842e10aaedb0b52f4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae29b99a1d7f18495ee1f40166c7b7fa8"><td class="memItemLeft" align="right" valign="top">stdx::optional&lt; <a class="el" href="classmongocxx_1_1pool.html#a7f28669fe4d5b34c5e9122b128b414cb">entry</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1pool.html#ae29b99a1d7f18495ee1f40166c7b7fa8">try_acquire</a> ()</td></tr>
<tr class="memdesc:ae29b99a1d7f18495ee1f40166c7b7fa8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquires a client from the pool.  <a href="#ae29b99a1d7f18495ee1f40166c7b7fa8">More...</a><br /></td></tr>
<tr class="separator:ae29b99a1d7f18495ee1f40166c7b7fa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A pool of <code>client</code> objects associated with a MongoDB deployment. </p>
<p>For interoperability with other MongoDB drivers, the minimum and maximum number of connections in the pool is configured using the 'minPoolSize' and 'maxPoolSize' connection string options.</p>
<dl class="section see"><dt>See also</dt><dd><a href="https://docs.mongodb.com/master/reference/connection-string/#connection-string-options">https://docs.mongodb.com/master/reference/connection-string/#connection-string-options</a></dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>When connecting to a replica set, it is <b>much</b> more efficient to use a pool as opposed to manually constructing <code>client</code> objects. The pool will use a single background thread used to monitor the topology of the replica set that is shared between all the client objects it creates. Each standalone client, however, will start its own background thread, leading to many redundant threads and network operations.</dd></dl>
<p>As a <code>client</code> is <b>not</b> thread safe, the <code>pool</code> should be preferred in multithreaded programs as it can safely be shared across threads. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a7f28669fe4d5b34c5e9122b128b414cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classmongocxx_1_1pool.html#a7f28669fe4d5b34c5e9122b128b414cb">mongocxx::pool::entry</a> =  std::unique_ptr&lt;<a class="el" href="classmongocxx_1_1client.html">client</a>, std::function&lt;void (<a class="el" href="classmongocxx_1_1client.html">client</a>*)&gt;&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An entry is a handle on a <code>client</code> object acquired via the pool. </p>
<dl class="section note"><dt>Note</dt><dd>The lifetime of any entry object must be a subset of the pool object from which it was acquired. </dd></dl>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa3d9400392db241478e93c9939f5f3da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mongocxx::pool::pool </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmongocxx_1_1uri.html">uri</a> &amp;&#160;</td>
          <td class="paramname"><em>mongodb_uri</em> = <code><a class="el" href="classmongocxx_1_1uri.html">mongocxx::uri</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmongocxx_1_1options_1_1pool.html">options::pool</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em> = <code><a class="el" href="classmongocxx_1_1options_1_1pool.html">options::pool</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a pool associated with a connection string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mongodb_uri</td><td>A MongoDB URI representing the connection parameters </td></tr>
    <tr><td class="paramname">options</td><td>Options to use when connecting to the MongoDB deployment.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classmongocxx_1_1exception.html" title="A class to be used as the base class for all mongocxx exceptions. ">mongocxx::exception</a></td><td>if invalid options are provided (whether from the URI or provided client options). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ab23ebaf96c1304842e10aaedb0b52f4e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongocxx_1_1pool.html#a7f28669fe4d5b34c5e9122b128b414cb">entry</a> mongocxx::pool::acquire </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acquires a client from the pool. </p>
<p>The calling thread will block until a connection is available. </p>

</div>
</div>
<a class="anchor" id="ae29b99a1d7f18495ee1f40166c7b7fa8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stdx::optional&lt;<a class="el" href="classmongocxx_1_1pool.html#a7f28669fe4d5b34c5e9122b128b414cb">entry</a>&gt; mongocxx::pool::try_acquire </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acquires a client from the pool. </p>
<p>This method will return immediately, but may return a disengaged optional if a client is not available. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/mongocxx/<a class="el" href="pool_8hpp_source.html">pool.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MongoDB C++ Driver: mongocxx::read_preference Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MongoDB C++ Driver<span id="projectnumber">&#160;mongocxx-3.1.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemongocxx.html">mongocxx</a></li><li class="navelem"><a class="el" href="classmongocxx_1_1read__preference.html">read_preference</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmongocxx_1_1read__preference-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">mongocxx::read_preference Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class representing a preference for how the driver routes read operations to members of a replica set or to a sharded cluster.  
 <a href="classmongocxx_1_1read__preference.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="read__preference_8hpp_source.html">read_preference.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a180dc16b93d9f5ace72c128def6334df"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334df">read_mode</a> : std::uint8_t { <br />
&#160;&#160;<a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334dfab207f43716d9bd2df75fedcb4ff4708d">k_primary</a> = 0x01
, <a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334dfaf25c7f2a3bd09659341ac2c5c4e48825">k_primary_preferred</a> = 0x05
, <a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334dfad948491bc7f5dcbe9925aba6c01e8454">k_secondary</a> = 0x02
, <a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334dfac17c6f5dbcd3bff7a5ba7cd332d1927d">k_secondary_preferred</a> = 0x06
, <br />
&#160;&#160;<a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334dfa553bf70a232bf3f05606b7090b690c5e">k_nearest</a> = 0x0A
<br />
 }</td></tr>
<tr class="memdesc:a180dc16b93d9f5ace72c128def6334df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines which members in a replica set are acceptable to read from.  <a href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334df">More...</a><br /></td></tr>
<tr class="separator:a180dc16b93d9f5ace72c128def6334df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab5a7dcca174bb899b2cb217758d6282f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1read__preference.html#ab5a7dcca174bb899b2cb217758d6282f">read_preference</a> (<a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334df">read_mode</a> <a class="el" href="classmongocxx_1_1read__preference.html#afe75ba14b36f2ab11f2682109f05382e">mode</a>=<a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334dfab207f43716d9bd2df75fedcb4ff4708d">read_mode::k_primary</a>)</td></tr>
<tr class="memdesc:ab5a7dcca174bb899b2cb217758d6282f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a new <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>.  <br /></td></tr>
<tr class="separator:ab5a7dcca174bb899b2cb217758d6282f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19ed806d9613797fa92f042f907b8a8e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1read__preference.html#a19ed806d9613797fa92f042f907b8a8e">read_preference</a> (<a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334df">read_mode</a> <a class="el" href="classmongocxx_1_1read__preference.html#afe75ba14b36f2ab11f2682109f05382e">mode</a>, <a class="el" href="classbsoncxx_1_1view__or__value.html">bsoncxx::document::view_or_value</a> <a class="el" href="classmongocxx_1_1read__preference.html#a8c7fc0a960d78271f5db0bca69e8c1d5">tags</a>)</td></tr>
<tr class="memdesc:a19ed806d9613797fa92f042f907b8a8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a new <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a> with tags.  <br /></td></tr>
<tr class="separator:a19ed806d9613797fa92f042f907b8a8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b804d835cb7da98e38f5cb2502f55e9"><td class="memItemLeft" align="right" valign="top"><a id="a8b804d835cb7da98e38f5cb2502f55e9" name="a8b804d835cb7da98e38f5cb2502f55e9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>read_preference</b> (const <a class="el" href="classmongocxx_1_1read__preference.html">read_preference</a> &amp;)</td></tr>
<tr class="memdesc:a8b804d835cb7da98e38f5cb2502f55e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy constructs a <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>. <br /></td></tr>
<tr class="separator:a8b804d835cb7da98e38f5cb2502f55e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ea6b79f2932ea7683ebb9052709b53a"><td class="memItemLeft" align="right" valign="top"><a id="a9ea6b79f2932ea7683ebb9052709b53a" name="a9ea6b79f2932ea7683ebb9052709b53a"></a>
<a class="el" href="classmongocxx_1_1read__preference.html">read_preference</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classmongocxx_1_1read__preference.html">read_preference</a> &amp;)</td></tr>
<tr class="memdesc:a9ea6b79f2932ea7683ebb9052709b53a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy assigns a <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>. <br /></td></tr>
<tr class="separator:a9ea6b79f2932ea7683ebb9052709b53a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a32b86f7bf537eb98a5b72ef6cbebbd"><td class="memItemLeft" align="right" valign="top"><a id="a8a32b86f7bf537eb98a5b72ef6cbebbd" name="a8a32b86f7bf537eb98a5b72ef6cbebbd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>read_preference</b> (<a class="el" href="classmongocxx_1_1read__preference.html">read_preference</a> &amp;&amp;) noexcept</td></tr>
<tr class="memdesc:a8a32b86f7bf537eb98a5b72ef6cbebbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move constructs a <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>. <br /></td></tr>
<tr class="separator:a8a32b86f7bf537eb98a5b72ef6cbebbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fe95d4a8fd258ecb9c62c13aaff2d47"><td class="memItemLeft" align="right" valign="top"><a id="a6fe95d4a8fd258ecb9c62c13aaff2d47" name="a6fe95d4a8fd258ecb9c62c13aaff2d47"></a>
<a class="el" href="classmongocxx_1_1read__preference.html">read_preference</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classmongocxx_1_1read__preference.html">read_preference</a> &amp;&amp;) noexcept</td></tr>
<tr class="memdesc:a6fe95d4a8fd258ecb9c62c13aaff2d47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move assigns a <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>. <br /></td></tr>
<tr class="separator:a6fe95d4a8fd258ecb9c62c13aaff2d47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66bcdfc2b6a945d2d1f4e21900f29ec2"><td class="memItemLeft" align="right" valign="top"><a id="a66bcdfc2b6a945d2d1f4e21900f29ec2" name="a66bcdfc2b6a945d2d1f4e21900f29ec2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>~read_preference</b> ()</td></tr>
<tr class="memdesc:a66bcdfc2b6a945d2d1f4e21900f29ec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys a <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>. <br /></td></tr>
<tr class="separator:a66bcdfc2b6a945d2d1f4e21900f29ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe75ba14b36f2ab11f2682109f05382e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1read__preference.html#afe75ba14b36f2ab11f2682109f05382e">mode</a> (<a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334df">read_mode</a> mode)</td></tr>
<tr class="memdesc:afe75ba14b36f2ab11f2682109f05382e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a new mode for this <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>.  <br /></td></tr>
<tr class="separator:afe75ba14b36f2ab11f2682109f05382e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2d70cd8da4da3eb0a233f0a780c0b64"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334df">read_mode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1read__preference.html#ad2d70cd8da4da3eb0a233f0a780c0b64">mode</a> () const</td></tr>
<tr class="memdesc:ad2d70cd8da4da3eb0a233f0a780c0b64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current read_mode for this <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>.  <br /></td></tr>
<tr class="separator:ad2d70cd8da4da3eb0a233f0a780c0b64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c7fc0a960d78271f5db0bca69e8c1d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1read__preference.html#a8c7fc0a960d78271f5db0bca69e8c1d5">tags</a> (<a class="el" href="classbsoncxx_1_1view__or__value.html">bsoncxx::document::view_or_value</a> tags)</td></tr>
<tr class="memdesc:a8c7fc0a960d78271f5db0bca69e8c1d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets or updates the tags for this <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>.  <br /></td></tr>
<tr class="separator:a8c7fc0a960d78271f5db0bca69e8c1d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fdf1b355f5763ddca133125c1ae1cb9"><td class="memItemLeft" align="right" valign="top">stdx::optional&lt; <a class="el" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1read__preference.html#a9fdf1b355f5763ddca133125c1ae1cb9">tags</a> () const</td></tr>
<tr class="memdesc:a9fdf1b355f5763ddca133125c1ae1cb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current tags for this <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>.  <br /></td></tr>
<tr class="separator:a9fdf1b355f5763ddca133125c1ae1cb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87319e404fcda17b6bda4cd3700a4a29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1read__preference.html#a87319e404fcda17b6bda4cd3700a4a29">max_staleness</a> (std::chrono::seconds max_staleness)</td></tr>
<tr class="memdesc:a87319e404fcda17b6bda4cd3700a4a29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the max staleness setting for this <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>.  <br /></td></tr>
<tr class="separator:a87319e404fcda17b6bda4cd3700a4a29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94e933d803e996ca824a55d534843d50"><td class="memItemLeft" align="right" valign="top">stdx::optional&lt; std::chrono::seconds &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongocxx_1_1read__preference.html#a94e933d803e996ca824a55d534843d50">max_staleness</a> () const</td></tr>
<tr class="memdesc:a94e933d803e996ca824a55d534843d50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current max staleness setting for this <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>.  <br /></td></tr>
<tr class="separator:a94e933d803e996ca824a55d534843d50"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class representing a preference for how the driver routes read operations to members of a replica set or to a sharded cluster. </p>
<p>By default read operations are directed to the primary member in a replica set. Reading from the primary guarantees that read operations reflect the latest version of a document. However, by distributing some or all reads to secondary members of the replica set, you can improve read throughput or reduce latency for an application that does not require fully up-to-date data.</p>
<p>Read preference can be broadly specified by setting a mode. It is also possible to set tags in the read preference for more granular control, and to target specific members of a replica set via attributes other than their current state as a primary or secondary node. Furthermore, it is also possible to set a staleness threshold, such that the read is limited to targeting secondaries whose staleness is less than or equal to the given threshold.</p>
<p>Read preferences are ignored for direct connections to a single mongod instance. However, in order to perform read operations on a direct connection to a secondary member of a replica set, you must set a read preference that allows reading from secondaries.</p>
<dl class="section see"><dt>See also</dt><dd><a href="https://docs.mongodb.com/master/core/read-preference/">https://docs.mongodb.com/master/core/read-preference/</a> </dd></dl>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a180dc16b93d9f5ace72c128def6334df" name="a180dc16b93d9f5ace72c128def6334df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a180dc16b93d9f5ace72c128def6334df">&#9670;&#160;</a></span>read_mode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334df">mongocxx::read_preference::read_mode</a> : std::uint8_t</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines which members in a replica set are acceptable to read from. </p>
<dl class="section warning"><dt>Warning</dt><dd>Read preference tags are not respected when the mode is set to primary.</dd>
<dd>
All read preference modes except primary may return stale data because secondaries replicate operations from the primary with some delay. Ensure that your application can tolerate stale data if you choose to use a non-primary mode.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://docs.mongodb.com/master/core/read-preference/#read-preference-modes">https://docs.mongodb.com/master/core/read-preference/#read-preference-modes</a> </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a180dc16b93d9f5ace72c128def6334dfab207f43716d9bd2df75fedcb4ff4708d" name="a180dc16b93d9f5ace72c128def6334dfab207f43716d9bd2df75fedcb4ff4708d"></a>k_primary&#160;</td><td class="fielddoc"><p>Only read from a primary node. </p>
</td></tr>
<tr><td class="fieldname"><a id="a180dc16b93d9f5ace72c128def6334dfaf25c7f2a3bd09659341ac2c5c4e48825" name="a180dc16b93d9f5ace72c128def6334dfaf25c7f2a3bd09659341ac2c5c4e48825"></a>k_primary_preferred&#160;</td><td class="fielddoc"><p>Prefer to read from a primary node. </p>
</td></tr>
<tr><td class="fieldname"><a id="a180dc16b93d9f5ace72c128def6334dfad948491bc7f5dcbe9925aba6c01e8454" name="a180dc16b93d9f5ace72c128def6334dfad948491bc7f5dcbe9925aba6c01e8454"></a>k_secondary&#160;</td><td class="fielddoc"><p>Only read from secondary nodes. </p>
</td></tr>
<tr><td class="fieldname"><a id="a180dc16b93d9f5ace72c128def6334dfac17c6f5dbcd3bff7a5ba7cd332d1927d" name="a180dc16b93d9f5ace72c128def6334dfac17c6f5dbcd3bff7a5ba7cd332d1927d"></a>k_secondary_preferred&#160;</td><td class="fielddoc"><p>Prefer to read from secondary nodes. </p>
</td></tr>
<tr><td class="fieldname"><a id="a180dc16b93d9f5ace72c128def6334dfa553bf70a232bf3f05606b7090b690c5e" name="a180dc16b93d9f5ace72c128def6334dfa553bf70a232bf3f05606b7090b690c5e"></a>k_nearest&#160;</td><td class="fielddoc"><p>Read from the node with the lowest latency irrespective of state. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab5a7dcca174bb899b2cb217758d6282f" name="ab5a7dcca174bb899b2cb217758d6282f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5a7dcca174bb899b2cb217758d6282f">&#9670;&#160;</a></span>read_preference() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mongocxx::read_preference::read_preference </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334df">read_mode</a>&#160;</td>
          <td class="paramname"><em>mode</em> = <code><a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334dfab207f43716d9bd2df75fedcb4ff4708d">read_mode::k_primary</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a new <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>Optional parameter to specify the read_mode, defaults to k_primary. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a19ed806d9613797fa92f042f907b8a8e" name="a19ed806d9613797fa92f042f907b8a8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19ed806d9613797fa92f042f907b8a8e">&#9670;&#160;</a></span>read_preference() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mongocxx::read_preference::read_preference </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334df">read_mode</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbsoncxx_1_1view__or__value.html">bsoncxx::document::view_or_value</a>&#160;</td>
          <td class="paramname"><em>tags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a new <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a> with tags. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>A <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a> read_mode. </td></tr>
    <tr><td class="paramname">tags</td><td>A document representing tags to use for the <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://docs.mongodb.com/master/core/read-preference/#tag-sets">https://docs.mongodb.com/master/core/read-preference/#tag-sets</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a94e933d803e996ca824a55d534843d50" name="a94e933d803e996ca824a55d534843d50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94e933d803e996ca824a55d534843d50">&#9670;&#160;</a></span>max_staleness() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stdx::optional&lt; std::chrono::seconds &gt; mongocxx::read_preference::max_staleness </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current max staleness setting for this <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>The optionally current max staleness setting. </dd></dl>

</div>
</div>
<a id="a87319e404fcda17b6bda4cd3700a4a29" name="a87319e404fcda17b6bda4cd3700a4a29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87319e404fcda17b6bda4cd3700a4a29">&#9670;&#160;</a></span>max_staleness() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongocxx::read_preference::max_staleness </td>
          <td>(</td>
          <td class="paramtype">std::chrono::seconds&#160;</td>
          <td class="paramname"><em>max_staleness</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the max staleness setting for this <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>. </p>
<p>Secondary servers with an estimated lag greater than this value will be excluded from selection under modes that allow secondaries.</p>
<p>Max staleness must be at least 90 seconds, and also at least the sum (in seconds) of the client's heartbeatFrequencyMS and the server's idle write period, which is 10 seconds. For general use, 90 seconds is the effective minimum. If less, an exception will be thrown when an operation is attempted.</p>
<p>Max staleness may only be used with MongoDB version 3.4 or later. If used with an earlier version, an exception will be thrown when an operation is attempted.</p>
<dl class="section note"><dt>Note</dt><dd>The max-staleness feature is designed to prevent badly-lagging servers from being selected. The staleness estimate is imprecise and shouldn't be used to try to select "up-to-date" secondaries.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_staleness</td><td>The new max staleness setting. It must be positive.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classmongocxx_1_1logic__error.html">mongocxx::logic_error</a></td><td>if the argument is invalid. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad2d70cd8da4da3eb0a233f0a780c0b64" name="ad2d70cd8da4da3eb0a233f0a780c0b64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2d70cd8da4da3eb0a233f0a780c0b64">&#9670;&#160;</a></span>mode() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334df">read_mode</a> mongocxx::read_preference::mode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current read_mode for this <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>The current read_mode. </dd></dl>

</div>
</div>
<a id="afe75ba14b36f2ab11f2682109f05382e" name="afe75ba14b36f2ab11f2682109f05382e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe75ba14b36f2ab11f2682109f05382e">&#9670;&#160;</a></span>mode() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongocxx::read_preference::mode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongocxx_1_1read__preference.html#a180dc16b93d9f5ace72c128def6334df">read_mode</a>&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets a new mode for this <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>The new read preference mode. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9fdf1b355f5763ddca133125c1ae1cb9" name="a9fdf1b355f5763ddca133125c1ae1cb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fdf1b355f5763ddca133125c1ae1cb9">&#9670;&#160;</a></span>tags() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stdx::optional&lt; <a class="el" href="classbsoncxx_1_1document_1_1view.html">bsoncxx::document::view</a> &gt; mongocxx::read_preference::tags </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current tags for this <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>The optionally set current tags.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://docs.mongodb.com/master/core/read-preference/#tag-sets">https://docs.mongodb.com/master/core/read-preference/#tag-sets</a> </dd></dl>

</div>
</div>
<a id="a8c7fc0a960d78271f5db0bca69e8c1d5" name="a8c7fc0a960d78271f5db0bca69e8c1d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c7fc0a960d78271f5db0bca69e8c1d5">&#9670;&#160;</a></span>tags() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongocxx::read_preference::tags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbsoncxx_1_1view__or__value.html">bsoncxx::document::view_or_value</a>&#160;</td>
          <td class="paramname"><em>tags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets or updates the tags for this <a class="el" href="classmongocxx_1_1read__preference.html" title="Class representing a preference for how the driver routes read operations to members of a replica set...">read_preference</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tags</td><td>Document representing the tags.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://docs.mongodb.com/master/core/read-preference/#tag-sets">https://docs.mongodb.com/master/core/read-preference/#tag-sets</a> </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/mongocxx/<a class="el" href="read__preference_8hpp_source.html">read_preference.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>

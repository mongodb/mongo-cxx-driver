<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MongoDB C++ Driver: mongocxx::client_session Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-extra.css" rel="stylesheet" type="text/css"/>
<!-- patch-apidocs-current-redirects: mongocxx-4.1.3 -->
<link rel="canonical" href="https://mongocxx.org/api/mongocxx-4.1.3/classmongocxx_1_1client__session.html"/>
<script type="text/javascript">
if (window.location.pathname.startsWith("/api/current/")) {
  window.location.replace(
    window.location.href.replace("/api/current/", "/api/mongocxx-4.1.3/")
  )
}
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MongoDB C++ Driver<span id="projectnumber">&#160;4.1.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a href="namespacemongocxx.html">mongocxx</a></li><li class="navelem"><a href="classmongocxx_1_1client__session.html">client_session</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmongocxx_1_1client__session-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">mongocxx::client_session Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="client__session_8hpp_source.html">mongocxx/v_noabi/mongocxx/client_session.hpp</a>&gt;</code></p>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Description</h2>
<div class="textblock"><p>Supports MongoDB client session operations. </p>
<p>Use a session for a sequence of operations, optionally with either causal consistency or snapshots.</p>
<p>Note that <a class="el" href="classmongocxx_1_1client__session.html" title="Supports MongoDB client session operations.">client_session</a> is not thread-safe. See <a href="https://www.mongodb.com/docs/languages/cpp/cpp-driver/current/thread-safety/">https://www.mongodb.com/docs/languages/cpp/cpp-driver/current/thread-safety/</a> for more details.</p>
<dl class="section see"><dt>See also</dt><dd><ul>
<li><a href="https://www.mongodb.com/docs/manual/core/read-isolation-consistency-recency/#causal-consistency">https://www.mongodb.com/docs/manual/core/read-isolation-consistency-recency/#causal-consistency</a> </li>
</ul>
</dd></dl>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-types" class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a020d7a2cd999a284abf8db5f888be38a" id="r_a020d7a2cd999a284abf8db5f888be38a"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a020d7a2cd999a284abf8db5f888be38a">with_transaction_cb</a> = std::function&lt;void (<a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html">client_session</a>*)&gt;</td></tr>
<tr class="memdesc:a020d7a2cd999a284abf8db5f888be38a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a callback invoked within a transaction.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5e656ce2da95185e7caed108dd9f263d" id="r_a5e656ce2da95185e7caed108dd9f263d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5e656ce2da95185e7caed108dd9f263d">client_session</a> (<a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html">client_session</a> &amp;&amp;) noexcept</td></tr>
<tr class="memdesc:a5e656ce2da95185e7caed108dd9f263d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move constructs a session.  <br /></td></tr>
<tr class="memitem:a44d2b712d5e2cecc291e5df4618aa20a" id="r_a44d2b712d5e2cecc291e5df4618aa20a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a44d2b712d5e2cecc291e5df4618aa20a">~client_session</a> () noexcept</td></tr>
<tr class="memdesc:a44d2b712d5e2cecc291e5df4618aa20a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ends and destroys the session.  <br /></td></tr>
<tr class="memitem:aabb8247a655741af6fe0f78bef8116e1" id="r_aabb8247a655741af6fe0f78bef8116e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aabb8247a655741af6fe0f78bef8116e1">abort_transaction</a> ()</td></tr>
<tr class="memdesc:aabb8247a655741af6fe0f78bef8116e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Aborts a transaction on the current client session.  <br /></td></tr>
<tr class="memitem:ac266dd35a87994fca720cd17620c95e3" id="r_ac266dd35a87994fca720cd17620c95e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac266dd35a87994fca720cd17620c95e3">advance_cluster_time</a> (<a class="el" href="classbsoncxx_1_1v__noabi_1_1document_1_1view.html">bsoncxx::v_noabi::document::view</a> const &amp;<a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#a244887b984f8ae7635ef0d61084278c0">cluster_time</a>)</td></tr>
<tr class="memdesc:ac266dd35a87994fca720cd17620c95e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance the cluster time for a session. Has an effect only if the new cluster time is greater than the session's current cluster time.  <br /></td></tr>
<tr class="memitem:ad2742f061505398956c9c9e7287e4db1" id="r_ad2742f061505398956c9c9e7287e4db1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad2742f061505398956c9c9e7287e4db1">advance_operation_time</a> (<a class="el" href="structbsoncxx_1_1v__noabi_1_1types_1_1b__timestamp.html">bsoncxx::v_noabi::types::b_timestamp</a> const &amp;<a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#a68d61b4309675bd089e8337817d7f803">operation_time</a>)</td></tr>
<tr class="memdesc:ad2742f061505398956c9c9e7287e4db1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance the session's operation time, expressed as a BSON timestamp. Has an effect only if the new operation time is greater than the session's current operation time.  <br /></td></tr>
<tr class="memitem:a27073133f57c869bb7eb2634658cefbb" id="r_a27073133f57c869bb7eb2634658cefbb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongocxx_1_1v__noabi_1_1client.html">mongocxx::v_noabi::client</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a27073133f57c869bb7eb2634658cefbb">client</a> () const noexcept</td></tr>
<tr class="memdesc:a27073133f57c869bb7eb2634658cefbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the client that started this session.  <br /></td></tr>
<tr class="memitem:a244887b984f8ae7635ef0d61084278c0" id="r_a244887b984f8ae7635ef0d61084278c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbsoncxx_1_1v__noabi_1_1document_1_1view.html">bsoncxx::v_noabi::document::view</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a244887b984f8ae7635ef0d61084278c0">cluster_time</a> () const noexcept</td></tr>
<tr class="memdesc:a244887b984f8ae7635ef0d61084278c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the session's clusterTime, as a BSON document. This is an opaque value suitable for passing to <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#ac266dd35a87994fca720cd17620c95e3" title="Advance the cluster time for a session. Has an effect only if the new cluster time is greater than th...">advance_cluster_time()</a>. The document is empty if the session has not been used for any operation and you have not called <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#ac266dd35a87994fca720cd17620c95e3" title="Advance the cluster time for a session. Has an effect only if the new cluster time is greater than th...">advance_cluster_time()</a>. This view is invalid after the session is destroyed.  <br /></td></tr>
<tr class="memitem:ad2d1a8f7c77542db6ec7629d162761ff" id="r_ad2d1a8f7c77542db6ec7629d162761ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad2d1a8f7c77542db6ec7629d162761ff">commit_transaction</a> ()</td></tr>
<tr class="memdesc:ad2d1a8f7c77542db6ec7629d162761ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Commits a transaction on the current client session.  <br /></td></tr>
<tr class="memitem:a6ad1ab1720eed5d2b1e77f994836fdfe" id="r_a6ad1ab1720eed5d2b1e77f994836fdfe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6ad1ab1720eed5d2b1e77f994836fdfe">get_dirty</a> () const noexcept</td></tr>
<tr class="memdesc:a6ad1ab1720eed5d2b1e77f994836fdfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether or not this session is dirty.  <br /></td></tr>
<tr class="memitem:a2a45216da5478f59bd7be2d3d0501108" id="r_a2a45216da5478f59bd7be2d3d0501108"><td class="memItemLeft" align="right" valign="top">transaction_state&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2a45216da5478f59bd7be2d3d0501108">get_transaction_state</a> () const noexcept</td></tr>
<tr class="memdesc:a2a45216da5478f59bd7be2d3d0501108"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current transaction state for this session.  <br /></td></tr>
<tr class="memitem:a65ac864aba6f86953c8bc4cf0d5befc4" id="r_a65ac864aba6f86953c8bc4cf0d5befc4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbsoncxx_1_1v__noabi_1_1document_1_1view.html">bsoncxx::v_noabi::document::view</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a65ac864aba6f86953c8bc4cf0d5befc4">id</a> () const noexcept</td></tr>
<tr class="memdesc:a65ac864aba6f86953c8bc4cf0d5befc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the server-side "logical session ID" associated with this session, as a BSON document. This view is invalid after the session is destroyed.  <br /></td></tr>
<tr class="memitem:a68d61b4309675bd089e8337817d7f803" id="r_a68d61b4309675bd089e8337817d7f803"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structbsoncxx_1_1v__noabi_1_1types_1_1b__timestamp.html">bsoncxx::v_noabi::types::b_timestamp</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a68d61b4309675bd089e8337817d7f803">operation_time</a> () const noexcept</td></tr>
<tr class="memdesc:a68d61b4309675bd089e8337817d7f803"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the session's operationTime, as a BSON timestamp. This is an opaque value suitable for passing to <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#ad2742f061505398956c9c9e7287e4db1" title="Advance the session&#39;s operation time, expressed as a BSON timestamp. Has an effect only if the new op...">advance_operation_time()</a>. The timestamp is zero if the session has not been used for any operation and you have not called <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#ad2742f061505398956c9c9e7287e4db1" title="Advance the session&#39;s operation time, expressed as a BSON timestamp. Has an effect only if the new op...">advance_operation_time()</a>.  <br /></td></tr>
<tr class="memitem:aa40c0715e787884057a9989fc3c9c3c8" id="r_aa40c0715e787884057a9989fc3c9c3c8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html">client_session</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa40c0715e787884057a9989fc3c9c3c8">operator=</a> (<a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html">client_session</a> &amp;&amp;) noexcept</td></tr>
<tr class="memdesc:aa40c0715e787884057a9989fc3c9c3c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move assigns a session.  <br /></td></tr>
<tr class="memitem:aca48f298b0e945968679b86316ec7843" id="r_aca48f298b0e945968679b86316ec7843"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmongocxx_1_1v__noabi_1_1options_1_1client__session.html">options::client_session</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aca48f298b0e945968679b86316ec7843">options</a> () const noexcept</td></tr>
<tr class="memdesc:aca48f298b0e945968679b86316ec7843"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the options this session was created with.  <br /></td></tr>
<tr class="memitem:ab31800e68f9fa0ab9d5e12186931849e" id="r_ab31800e68f9fa0ab9d5e12186931849e"><td class="memItemLeft" align="right" valign="top">std::uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab31800e68f9fa0ab9d5e12186931849e">server_id</a> () const noexcept</td></tr>
<tr class="memdesc:ab31800e68f9fa0ab9d5e12186931849e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the server_id the session is pinned to. The server_id is zero if the session is not pinned to a server.  <br /></td></tr>
<tr class="memitem:a0d1536c17cacce82e0efd84f2c5a8d06" id="r_a0d1536c17cacce82e0efd84f2c5a8d06"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0d1536c17cacce82e0efd84f2c5a8d06">start_transaction</a> (<a class="el" href="classbsoncxx_1_1v1_1_1stdx_1_1optional.html">bsoncxx::v_noabi::stdx::optional</a>&lt; <a class="el" href="classmongocxx_1_1v__noabi_1_1options_1_1transaction.html">options::transaction</a> &gt; const &amp;transaction_opts={})</td></tr>
<tr class="memdesc:a0d1536c17cacce82e0efd84f2c5a8d06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a transaction on the current client session.  <br /></td></tr>
<tr class="memitem:a3dcdf91bf72e69bf7e63a7c8ad859b93" id="r_a3dcdf91bf72e69bf7e63a7c8ad859b93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3dcdf91bf72e69bf7e63a7c8ad859b93">with_transaction</a> (<a class="el" href="#a020d7a2cd999a284abf8db5f888be38a">with_transaction_cb</a> cb, <a class="el" href="classmongocxx_1_1v__noabi_1_1options_1_1transaction.html">options::transaction</a> opts={})</td></tr>
<tr class="memdesc:a3dcdf91bf72e69bf7e63a7c8ad859b93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper to run a user-provided callback within a transaction.  <br /></td></tr>
</table>
<a name="doc-typedef-members" id="doc-typedef-members"></a><h2 id="header-doc-typedef-members" class="groupheader">Member Typedef Documentation</h2>
<a id="a020d7a2cd999a284abf8db5f888be38a" name="a020d7a2cd999a284abf8db5f888be38a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a020d7a2cd999a284abf8db5f888be38a">&#9670;&#160;</a></span>with_transaction_cb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#a020d7a2cd999a284abf8db5f888be38a">mongocxx::v_noabi::client_session::with_transaction_cb</a> = std::function&lt;void (<a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html">client_session</a>*)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Represents a callback invoked within a transaction. </p>

</div>
</div>
<a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5e656ce2da95185e7caed108dd9f263d" name="a5e656ce2da95185e7caed108dd9f263d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e656ce2da95185e7caed108dd9f263d">&#9670;&#160;</a></span>client_session()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mongocxx::v_noabi::client_session::client_session </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html">client_session</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move constructs a session. </p>

</div>
</div>
<a id="a44d2b712d5e2cecc291e5df4618aa20a" name="a44d2b712d5e2cecc291e5df4618aa20a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44d2b712d5e2cecc291e5df4618aa20a">&#9670;&#160;</a></span>~client_session()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mongocxx::v_noabi::client_session::~client_session </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ends and destroys the session. </p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="aabb8247a655741af6fe0f78bef8116e1" name="aabb8247a655741af6fe0f78bef8116e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabb8247a655741af6fe0f78bef8116e1">&#9670;&#160;</a></span>abort_transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongocxx::v_noabi::client_session::abort_transaction </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Aborts a transaction on the current client session. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classmongocxx_1_1v__noabi_1_1operation__exception.html" title="An exception thrown during a MongoDB server operation.">mongocxx::v_noabi::operation_exception</a></td><td>if the options are misconfigured or if there are other errors such as a session with no transaction in progress. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac266dd35a87994fca720cd17620c95e3" name="ac266dd35a87994fca720cd17620c95e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac266dd35a87994fca720cd17620c95e3">&#9670;&#160;</a></span>advance_cluster_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongocxx::v_noabi::client_session::advance_cluster_time </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbsoncxx_1_1v__noabi_1_1document_1_1view.html">bsoncxx::v_noabi::document::view</a> const &amp;</td>          <td class="paramname"><span class="paramname"><em>cluster_time</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Advance the cluster time for a session. Has an effect only if the new cluster time is greater than the session's current cluster time. </p>
<p>Use <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#ad2742f061505398956c9c9e7287e4db1" title="Advance the session&#39;s operation time, expressed as a BSON timestamp. Has an effect only if the new op...">advance_operation_time()</a> and <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#ac266dd35a87994fca720cd17620c95e3" title="Advance the cluster time for a session. Has an effect only if the new cluster time is greater than th...">advance_cluster_time()</a> to copy the operationTime and clusterTime from another session, ensuring subsequent operations in this session are causally consistent with the last operation in the other session. </p>

</div>
</div>
<a id="ad2742f061505398956c9c9e7287e4db1" name="ad2742f061505398956c9c9e7287e4db1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2742f061505398956c9c9e7287e4db1">&#9670;&#160;</a></span>advance_operation_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongocxx::v_noabi::client_session::advance_operation_time </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbsoncxx_1_1v__noabi_1_1types_1_1b__timestamp.html">bsoncxx::v_noabi::types::b_timestamp</a> const &amp;</td>          <td class="paramname"><span class="paramname"><em>operation_time</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Advance the session's operation time, expressed as a BSON timestamp. Has an effect only if the new operation time is greater than the session's current operation time. </p>
<p>Use <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#ad2742f061505398956c9c9e7287e4db1" title="Advance the session&#39;s operation time, expressed as a BSON timestamp. Has an effect only if the new op...">advance_operation_time()</a> and <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#ac266dd35a87994fca720cd17620c95e3" title="Advance the cluster time for a session. Has an effect only if the new cluster time is greater than th...">advance_cluster_time()</a> to copy the operationTime and clusterTime from another session, ensuring subsequent operations in this session are causally consistent with the last operation in the other session. </p>

</div>
</div>
<a id="a27073133f57c869bb7eb2634658cefbb" name="a27073133f57c869bb7eb2634658cefbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27073133f57c869bb7eb2634658cefbb">&#9670;&#160;</a></span>client()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongocxx_1_1v__noabi_1_1client.html">mongocxx::v_noabi::client</a> const  &amp; mongocxx::v_noabi::client_session::client </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the client that started this session. </p>

</div>
</div>
<a id="a244887b984f8ae7635ef0d61084278c0" name="a244887b984f8ae7635ef0d61084278c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a244887b984f8ae7635ef0d61084278c0">&#9670;&#160;</a></span>cluster_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbsoncxx_1_1v__noabi_1_1document_1_1view.html">bsoncxx::v_noabi::document::view</a> mongocxx::v_noabi::client_session::cluster_time </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the session's clusterTime, as a BSON document. This is an opaque value suitable for passing to <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#ac266dd35a87994fca720cd17620c95e3" title="Advance the cluster time for a session. Has an effect only if the new cluster time is greater than th...">advance_cluster_time()</a>. The document is empty if the session has not been used for any operation and you have not called <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#ac266dd35a87994fca720cd17620c95e3" title="Advance the cluster time for a session. Has an effect only if the new cluster time is greater than th...">advance_cluster_time()</a>. This view is invalid after the session is destroyed. </p>

</div>
</div>
<a id="ad2d1a8f7c77542db6ec7629d162761ff" name="ad2d1a8f7c77542db6ec7629d162761ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2d1a8f7c77542db6ec7629d162761ff">&#9670;&#160;</a></span>commit_transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongocxx::v_noabi::client_session::commit_transaction </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Commits a transaction on the current client session. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classmongocxx_1_1v__noabi_1_1operation__exception.html" title="An exception thrown during a MongoDB server operation.">mongocxx::v_noabi::operation_exception</a></td><td>if the options are misconfigured, if there are network or other transient failures, or if there are other errors such as a session with no transaction in progress. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6ad1ab1720eed5d2b1e77f994836fdfe" name="a6ad1ab1720eed5d2b1e77f994836fdfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ad1ab1720eed5d2b1e77f994836fdfe">&#9670;&#160;</a></span>get_dirty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool mongocxx::v_noabi::client_session::get_dirty </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns whether or not this session is dirty. </p>

</div>
</div>
<a id="a2a45216da5478f59bd7be2d3d0501108" name="a2a45216da5478f59bd7be2d3d0501108"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a45216da5478f59bd7be2d3d0501108">&#9670;&#160;</a></span>get_transaction_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">transaction_state mongocxx::v_noabi::client_session::get_transaction_state </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the current transaction state for this session. </p>

</div>
</div>
<a id="a65ac864aba6f86953c8bc4cf0d5befc4" name="a65ac864aba6f86953c8bc4cf0d5befc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65ac864aba6f86953c8bc4cf0d5befc4">&#9670;&#160;</a></span>id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbsoncxx_1_1v__noabi_1_1document_1_1view.html">bsoncxx::v_noabi::document::view</a> mongocxx::v_noabi::client_session::id </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the server-side "logical session ID" associated with this session, as a BSON document. This view is invalid after the session is destroyed. </p>

</div>
</div>
<a id="a68d61b4309675bd089e8337817d7f803" name="a68d61b4309675bd089e8337817d7f803"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68d61b4309675bd089e8337817d7f803">&#9670;&#160;</a></span>operation_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbsoncxx_1_1v__noabi_1_1types_1_1b__timestamp.html">bsoncxx::v_noabi::types::b_timestamp</a> mongocxx::v_noabi::client_session::operation_time </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the session's operationTime, as a BSON timestamp. This is an opaque value suitable for passing to <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#ad2742f061505398956c9c9e7287e4db1" title="Advance the session&#39;s operation time, expressed as a BSON timestamp. Has an effect only if the new op...">advance_operation_time()</a>. The timestamp is zero if the session has not been used for any operation and you have not called <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#ad2742f061505398956c9c9e7287e4db1" title="Advance the session&#39;s operation time, expressed as a BSON timestamp. Has an effect only if the new op...">advance_operation_time()</a>. </p>

</div>
</div>
<a id="aa40c0715e787884057a9989fc3c9c3c8" name="aa40c0715e787884057a9989fc3c9c3c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa40c0715e787884057a9989fc3c9c3c8">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html">client_session</a> &amp; mongocxx::v_noabi::client_session::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html">client_session</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move assigns a session. </p>

</div>
</div>
<a id="aca48f298b0e945968679b86316ec7843" name="aca48f298b0e945968679b86316ec7843"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca48f298b0e945968679b86316ec7843">&#9670;&#160;</a></span>options()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmongocxx_1_1v__noabi_1_1options_1_1client__session.html">options::client_session</a> const  &amp; mongocxx::v_noabi::client_session::options </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the options this session was created with. </p>

</div>
</div>
<a id="ab31800e68f9fa0ab9d5e12186931849e" name="ab31800e68f9fa0ab9d5e12186931849e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab31800e68f9fa0ab9d5e12186931849e">&#9670;&#160;</a></span>server_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::uint32_t mongocxx::v_noabi::client_session::server_id </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the server_id the session is pinned to. The server_id is zero if the session is not pinned to a server. </p>

</div>
</div>
<a id="a0d1536c17cacce82e0efd84f2c5a8d06" name="a0d1536c17cacce82e0efd84f2c5a8d06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d1536c17cacce82e0efd84f2c5a8d06">&#9670;&#160;</a></span>start_transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongocxx::v_noabi::client_session::start_transaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbsoncxx_1_1v1_1_1stdx_1_1optional.html">bsoncxx::v_noabi::stdx::optional</a>&lt; <a class="el" href="classmongocxx_1_1v__noabi_1_1options_1_1transaction.html">options::transaction</a> &gt; const &amp;</td>          <td class="paramname"><span class="paramname"><em>transaction_opts</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts a transaction on the current client session. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transaction_opts</td><td>(optional) The options to use in the transaction.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classmongocxx_1_1v__noabi_1_1operation__exception.html" title="An exception thrown during a MongoDB server operation.">mongocxx::v_noabi::operation_exception</a></td><td>if the options are misconfigured, if there are network or other transient failures, or if there are other errors such as a session with a transaction already in progress. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3dcdf91bf72e69bf7e63a7c8ad859b93" name="a3dcdf91bf72e69bf7e63a7c8ad859b93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dcdf91bf72e69bf7e63a7c8ad859b93">&#9670;&#160;</a></span>with_transaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mongocxx::v_noabi::client_session::with_transaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a020d7a2cd999a284abf8db5f888be38a">with_transaction_cb</a></td>          <td class="paramname"><span class="paramname"><em>cb</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongocxx_1_1v__noabi_1_1options_1_1transaction.html">options::transaction</a></td>          <td class="paramname"><span class="paramname"><em>opts</em></span><span class="paramdefsep"> = </span><span class="paramdefval">{}</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper to run a user-provided callback within a transaction. </p>
<p>This method will start a new transaction on this client session, run the callback, then commit the transaction. If it cannot commit the transaction, the entire sequence may be retried, and the callback may be run multiple times.</p>
<p>This method has an internal non-adjustable time limit of 120 seconds, including all retries.</p>
<p>If the user callback invokes driver methods that run operations against the server which could throw an <a class="el" href="classmongocxx_1_1operation__exception.html" title="An exception thrown during a MongoDB server operation.">operation_exception</a>, the user callback MUST allow those exceptions to propagate up the stack so they can be caught and processed by the <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#a3dcdf91bf72e69bf7e63a7c8ad859b93" title="Helper to run a user-provided callback within a transaction.">with_transaction()</a> helper.</p>
<p>For example, a callback that invokes <a class="el" href="classmongocxx_1_1v__noabi_1_1collection.html#a25f01b9f918a4946db7c97d69e641f24" title="Inserts a single document into the collection. If the document is missing an identifier (_id field) o...">collection::insert_one</a> may encounter a "duplicate key" error with accompanying server-side transaction abort. If this error were not seen by the <a class="el" href="classmongocxx_1_1v__noabi_1_1client__session.html#a3dcdf91bf72e69bf7e63a7c8ad859b93" title="Helper to run a user-provided callback within a transaction.">with_transaction()</a> helper, the entire transaction would retry repeatedly until the overall time limit expires.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>The callback to run inside of a transaction. </td></tr>
    <tr><td class="paramname">opts</td><td>(optional) The options to use to run the transaction.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classmongocxx_1_1v__noabi_1_1operation__exception.html" title="An exception thrown during a MongoDB server operation.">mongocxx::v_noabi::operation_exception</a></td><td>if there are errors completing the transaction. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>mongocxx/v_noabi/mongocxx/<a class="el" href="client__session_8hpp_source.html">client_session.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>

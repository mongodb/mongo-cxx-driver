<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>MongoDB C++ Driver: mongo::WriteOperation Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MongoDB C++ Driver
   &#160;<span id="projectnumber">legacy-1.0.7</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemongo.html">mongo</a></li><li class="navelem"><a class="el" href="classmongo_1_1WriteOperation.html">WriteOperation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmongo_1_1WriteOperation-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mongo::WriteOperation Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Represents a single server side write operation and encapsulates the process for encoding the operation into either a wire protocol request message or a command.  
 <a href="classmongo_1_1WriteOperation.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="write__operation_8h_source.html">write_operation.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for mongo::WriteOperation:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="classmongo_1_1WriteOperation.png" usemap="#mongo::WriteOperation_map" alt=""/>
  <map id="mongo::WriteOperation_map" name="mongo::WriteOperation_map">
<area href="classmongo_1_1WriteOperationBase.html" alt="mongo::WriteOperationBase" shape="rect" coords="189,56,368,80"/>
<area href="classmongo_1_1DeleteWriteOperation.html" alt="mongo::DeleteWriteOperation" shape="rect" coords="0,112,179,136"/>
<area href="classmongo_1_1InsertWriteOperation.html" alt="mongo::InsertWriteOperation" shape="rect" coords="189,112,368,136"/>
<area href="classmongo_1_1UpdateWriteOperation.html" alt="mongo::UpdateWriteOperation" shape="rect" coords="378,112,557,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab2782796171004490d9fd71b16436503"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab2782796171004490d9fd71b16436503"></a>
virtual WriteOpType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1WriteOperation.html#ab2782796171004490d9fd71b16436503">operationType</a> () const  =0</td></tr>
<tr class="memdesc:ab2782796171004490d9fd71b16436503"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the MongoDB wire protocol operation type represented by an instance of this particular write operation. <br /></td></tr>
<tr class="separator:ab2782796171004490d9fd71b16436503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e676723bb8d05a4438a1fde7f28304d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8e676723bb8d05a4438a1fde7f28304d"></a>
virtual const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1WriteOperation.html#a8e676723bb8d05a4438a1fde7f28304d">batchName</a> () const  =0</td></tr>
<tr class="memdesc:a8e676723bb8d05a4438a1fde7f28304d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the name for a batch of this type of write operation. <br /></td></tr>
<tr class="separator:a8e676723bb8d05a4438a1fde7f28304d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aeb2f613bcb448e4248acc9c310062e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8aeb2f613bcb448e4248acc9c310062e"></a>
virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1WriteOperation.html#a8aeb2f613bcb448e4248acc9c310062e">incrementalSize</a> () const  =0</td></tr>
<tr class="memdesc:a8aeb2f613bcb448e4248acc9c310062e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the incremental size (in bytes) required to add this write operation to a batch. <br /></td></tr>
<tr class="separator:a8aeb2f613bcb448e4248acc9c310062e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59c83c27e665b3490fe8d410ae5748d9"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1WriteOperation.html#a59c83c27e665b3490fe8d410ae5748d9">startRequest</a> (const std::string &amp;ns, bool ordered, <a class="el" href="classmongo_1_1__BufBuilder.html">BufBuilder</a> *builder) const  =0</td></tr>
<tr class="memdesc:a59c83c27e665b3490fe8d410ae5748d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appends the preamble for a wire protocol message into the supplied BufBuilder.  <a href="#a59c83c27e665b3490fe8d410ae5748d9">More...</a><br /></td></tr>
<tr class="separator:a59c83c27e665b3490fe8d410ae5748d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53470ffe576b058c71546ad8a1021a46"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1WriteOperation.html#a53470ffe576b058c71546ad8a1021a46">appendSelfToRequest</a> (<a class="el" href="classmongo_1_1__BufBuilder.html">BufBuilder</a> *builder) const  =0</td></tr>
<tr class="memdesc:a53470ffe576b058c71546ad8a1021a46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appends a document (or documents in the case of update) which describe the write operation represented by an instance of this class into the supplied BufBuilder.  <a href="#a53470ffe576b058c71546ad8a1021a46">More...</a><br /></td></tr>
<tr class="separator:a53470ffe576b058c71546ad8a1021a46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68ed6e9f2344eb843db7e719121071e0"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1WriteOperation.html#a68ed6e9f2344eb843db7e719121071e0">startCommand</a> (const std::string &amp;ns, <a class="el" href="classmongo_1_1BSONObjBuilder.html">BSONObjBuilder</a> *command) const  =0</td></tr>
<tr class="memdesc:a68ed6e9f2344eb843db7e719121071e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appends the preamble for a write command into the supplied <a class="el" href="classmongo_1_1BSONObjBuilder.html" title="Utility for creating a BSONObj. ">BSONObjBuilder</a>.  <a href="#a68ed6e9f2344eb843db7e719121071e0">More...</a><br /></td></tr>
<tr class="separator:a68ed6e9f2344eb843db7e719121071e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1748d87c7c029e7697b941880784cfda"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1WriteOperation.html#a1748d87c7c029e7697b941880784cfda">appendSelfToCommand</a> (<a class="el" href="classmongo_1_1BSONArrayBuilder.html">BSONArrayBuilder</a> *batch) const  =0</td></tr>
<tr class="memdesc:a1748d87c7c029e7697b941880784cfda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appends a single document that describes the write operation represented by an instance of this class into the supplied <a class="el" href="classmongo_1_1BSONArrayBuilder.html">BSONArrayBuilder</a>.  <a href="#a1748d87c7c029e7697b941880784cfda">More...</a><br /></td></tr>
<tr class="separator:a1748d87c7c029e7697b941880784cfda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a399fe16e982ba317989ea36e7a08f056"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a399fe16e982ba317989ea36e7a08f056"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1WriteOperation.html#a399fe16e982ba317989ea36e7a08f056">appendSelfToBSONObj</a> (<a class="el" href="classmongo_1_1BSONObjBuilder.html">BSONObjBuilder</a> *obj) const  =0</td></tr>
<tr class="memdesc:a399fe16e982ba317989ea36e7a08f056"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appends the data represented by an instance of this class to a <a class="el" href="classmongo_1_1BSONObjBuilder.html" title="Utility for creating a BSONObj. ">BSONObjBuilder</a>. <br /></td></tr>
<tr class="separator:a399fe16e982ba317989ea36e7a08f056"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abebf3b9a955fa91aaae43ab0cda2a555"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abebf3b9a955fa91aaae43ab0cda2a555"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1WriteOperation.html#abebf3b9a955fa91aaae43ab0cda2a555">setBulkIndex</a> (size_t index)=0</td></tr>
<tr class="memdesc:abebf3b9a955fa91aaae43ab0cda2a555"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the index of this <a class="el" href="classmongo_1_1WriteOperation.html" title="Represents a single server side write operation and encapsulates the process for encoding the operati...">WriteOperation</a> in the context of a larger bulk operation. <br /></td></tr>
<tr class="separator:abebf3b9a955fa91aaae43ab0cda2a555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4124dfe2915ca58399e8ff9b302fb59"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af4124dfe2915ca58399e8ff9b302fb59"></a>
virtual size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmongo_1_1WriteOperation.html#af4124dfe2915ca58399e8ff9b302fb59">getBulkIndex</a> () const  =0</td></tr>
<tr class="memdesc:af4124dfe2915ca58399e8ff9b302fb59"><td class="mdescLeft">&#160;</td><td class="mdescRight">The index of this <a class="el" href="classmongo_1_1WriteOperation.html" title="Represents a single server side write operation and encapsulates the process for encoding the operati...">WriteOperation</a> in the context of a larger bulk operation. <br /></td></tr>
<tr class="separator:af4124dfe2915ca58399e8ff9b302fb59"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Represents a single server side write operation and encapsulates the process for encoding the operation into either a wire protocol request message or a command. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a1748d87c7c029e7697b941880784cfda"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void mongo::WriteOperation::appendSelfToCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONArrayBuilder.html">BSONArrayBuilder</a> *&#160;</td>
          <td class="paramname"><em>batch</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Appends a single document that describes the write operation represented by an instance of this class into the supplied <a class="el" href="classmongo_1_1BSONArrayBuilder.html">BSONArrayBuilder</a>. </p>
<p>This method will be called multiple times by a <a class="el" href="classmongo_1_1DBClientWriter.html">DBClientWriter</a> in order to batch operations of the same type into a single command.</p>
<p>NOTE: The ultimate size of the of the command is bounded by the sever's maxBsonObjectSize. </p>

<p>Implemented in <a class="el" href="classmongo_1_1DeleteWriteOperation.html#a50a0e76b1ac0803ff0c37228edfd7067">mongo::DeleteWriteOperation</a>, <a class="el" href="classmongo_1_1InsertWriteOperation.html#af858a1415128af2da3af8584b8d558d4">mongo::InsertWriteOperation</a>, and <a class="el" href="classmongo_1_1UpdateWriteOperation.html#a163e9561127c8a44a2e64f4dcc4e7cb4">mongo::UpdateWriteOperation</a>.</p>

</div>
</div>
<a class="anchor" id="a53470ffe576b058c71546ad8a1021a46"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void mongo::WriteOperation::appendSelfToRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmongo_1_1__BufBuilder.html">BufBuilder</a> *&#160;</td>
          <td class="paramname"><em>builder</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Appends a document (or documents in the case of update) which describe the write operation represented by an instance of this class into the supplied BufBuilder. </p>
<p>This method may be called multiple times by a <a class="el" href="classmongo_1_1WireProtocolWriter.html">WireProtocolWriter</a> in order to batch operations of the same type into a single wire protocol request.</p>
<p>NOTE: The size of this portion of the message is flexible but the size of the message itself is bounded by the server's maxMessageSizeBytes. </p>

<p>Implemented in <a class="el" href="classmongo_1_1DeleteWriteOperation.html#ab81b0b72ddcc1aeaf2a5c9b9e486facb">mongo::DeleteWriteOperation</a>, <a class="el" href="classmongo_1_1InsertWriteOperation.html#ae14a931471c207d651429c3e5ba90921">mongo::InsertWriteOperation</a>, and <a class="el" href="classmongo_1_1UpdateWriteOperation.html#ae194c64aee1cacb98cd25fd2a00fc3c5">mongo::UpdateWriteOperation</a>.</p>

</div>
</div>
<a class="anchor" id="a68ed6e9f2344eb843db7e719121071e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void mongo::WriteOperation::startCommand </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1BSONObjBuilder.html">BSONObjBuilder</a> *&#160;</td>
          <td class="paramname"><em>command</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Appends the preamble for a write command into the supplied <a class="el" href="classmongo_1_1BSONObjBuilder.html" title="Utility for creating a BSONObj. ">BSONObjBuilder</a>. </p>
<p>Typically this involves a single bson element having a key that represents the operation type and a value which represents the collection to which the operation will be applied. This write op element must be the first element in the document according to the specification. </p>

<p>Implemented in <a class="el" href="classmongo_1_1DeleteWriteOperation.html#aa846747fd1e65b4b0b2468c65a77127a">mongo::DeleteWriteOperation</a>, <a class="el" href="classmongo_1_1InsertWriteOperation.html#a77b7344658b003ba22782ffb03c3889c">mongo::InsertWriteOperation</a>, and <a class="el" href="classmongo_1_1UpdateWriteOperation.html#a5d4271404e2ed2ee259e9daca6edca9a">mongo::UpdateWriteOperation</a>.</p>

</div>
</div>
<a class="anchor" id="a59c83c27e665b3490fe8d410ae5748d9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void mongo::WriteOperation::startRequest </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ordered</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmongo_1_1__BufBuilder.html">BufBuilder</a> *&#160;</td>
          <td class="paramname"><em>builder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Appends the preamble for a wire protocol message into the supplied BufBuilder. </p>
<p>This is the part of the wire protocol message after the header but before the bson document portion. It typically contains the namespace, flags, and potentially space reserved by the protocol for future use.</p>
<p>NOTE: The size of the preamble is fixed but operation type dependant. </p>

<p>Implemented in <a class="el" href="classmongo_1_1DeleteWriteOperation.html#ab6e10b71874896452b5015b5e2049885">mongo::DeleteWriteOperation</a>, <a class="el" href="classmongo_1_1InsertWriteOperation.html#a3d22d5372eb97314afde0c00d67bd383">mongo::InsertWriteOperation</a>, and <a class="el" href="classmongo_1_1UpdateWriteOperation.html#a62b0a44a942e684c052115505dfa6c05">mongo::UpdateWriteOperation</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/mongo/client/<a class="el" href="write__operation_8h_source.html">write_operation.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
